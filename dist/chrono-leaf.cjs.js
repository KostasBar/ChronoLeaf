"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});function ei(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Me={exports:{}};/* @license
Papa Parse
v5.5.3
https://github.com/mholt/PapaParse
License: MIT
*/var ni=Me.exports,En;function ri(){return En||(En=1,function(t,e){((n,r)=>{t.exports=r()})(ni,function n(){var r=typeof self<"u"?self:typeof window<"u"?window:r!==void 0?r:{},i,a=!r.document&&!!r.postMessage,o=r.IS_PAPA_WORKER||!1,s={},c=0,l={};function u(h){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},(function(p){var b=lt(p);b.chunkSize=parseInt(b.chunkSize),p.step||p.chunk||(b.chunkSize=null),this._handle=new U(b),(this._handle.streamer=this)._config=b}).call(this,h),this.parseChunk=function(p,b){var E=parseInt(this._config.skipFirstNLines)||0;if(this.isFirstChunk&&0<E){let X=this._config.newline;X||($=this._config.quoteChar||'"',X=this._handle.guessLineEndings(p,$)),p=[...p.split(X).slice(E)].join(X)}this.isFirstChunk&&H(this._config.beforeFirstChunk)&&($=this._config.beforeFirstChunk(p))!==void 0&&(p=$),this.isFirstChunk=!1,this._halted=!1;var E=this._partialLine+p,$=(this._partialLine="",this._handle.parse(E,this._baseIndex,!this._finished));if(!this._handle.paused()&&!this._handle.aborted()){if(p=$.meta.cursor,E=(this._finished||(this._partialLine=E.substring(p-this._baseIndex),this._baseIndex=p),$&&$.data&&(this._rowCount+=$.data.length),this._finished||this._config.preview&&this._rowCount>=this._config.preview),o)r.postMessage({results:$,workerId:l.WORKER_ID,finished:E});else if(H(this._config.chunk)&&!b){if(this._config.chunk($,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);this._completeResults=$=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat($.data),this._completeResults.errors=this._completeResults.errors.concat($.errors),this._completeResults.meta=$.meta),this._completed||!E||!H(this._config.complete)||$&&$.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),E||$&&$.meta.paused||this._nextChunk(),$}this._halted=!0},this._sendError=function(p){H(this._config.error)?this._config.error(p):o&&this._config.error&&r.postMessage({workerId:l.WORKER_ID,error:p,finished:!1})}}function y(h){var p;(h=h||{}).chunkSize||(h.chunkSize=l.RemoteChunkSize),u.call(this,h),this._nextChunk=a?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(b){this._input=b,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(p=new XMLHttpRequest,this._config.withCredentials&&(p.withCredentials=this._config.withCredentials),a||(p.onload=D(this._chunkLoaded,this),p.onerror=D(this._chunkError,this)),p.open(this._config.downloadRequestBody?"POST":"GET",this._input,!a),this._config.downloadRequestHeaders){var b,E=this._config.downloadRequestHeaders;for(b in E)p.setRequestHeader(b,E[b])}var $;this._config.chunkSize&&($=this._start+this._config.chunkSize-1,p.setRequestHeader("Range","bytes="+this._start+"-"+$));try{p.send(this._config.downloadRequestBody)}catch(X){this._chunkError(X.message)}a&&p.status===0&&this._chunkError()}},this._chunkLoaded=function(){p.readyState===4&&(p.status<200||400<=p.status?this._chunkError():(this._start+=this._config.chunkSize||p.responseText.length,this._finished=!this._config.chunkSize||this._start>=(b=>(b=b.getResponseHeader("Content-Range"))!==null?parseInt(b.substring(b.lastIndexOf("/")+1)):-1)(p),this.parseChunk(p.responseText)))},this._chunkError=function(b){b=p.statusText||b,this._sendError(new Error(b))}}function d(h){(h=h||{}).chunkSize||(h.chunkSize=l.LocalChunkSize),u.call(this,h);var p,b,E=typeof FileReader<"u";this.stream=function($){this._input=$,b=$.slice||$.webkitSlice||$.mozSlice,E?((p=new FileReader).onload=D(this._chunkLoaded,this),p.onerror=D(this._chunkError,this)):p=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var $=this._input,X=(this._config.chunkSize&&(X=Math.min(this._start+this._config.chunkSize,this._input.size),$=b.call($,this._start,X)),p.readAsText($,this._config.encoding));E||this._chunkLoaded({target:{result:X}})},this._chunkLoaded=function($){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk($.target.result)},this._chunkError=function(){this._sendError(p.error)}}function m(h){var p;u.call(this,h=h||{}),this.stream=function(b){return p=b,this._nextChunk()},this._nextChunk=function(){var b,E;if(!this._finished)return b=this._config.chunkSize,p=b?(E=p.substring(0,b),p.substring(b)):(E=p,""),this._finished=!p,this.parseChunk(E)}}function W(h){u.call(this,h=h||{});var p=[],b=!0,E=!1;this.pause=function(){u.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){u.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function($){this._input=$,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){E&&p.length===1&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),p.length?this.parseChunk(p.shift()):b=!0},this._streamData=D(function($){try{p.push(typeof $=="string"?$:$.toString(this._config.encoding)),b&&(b=!1,this._checkIsFinished(),this.parseChunk(p.shift()))}catch(X){this._streamError(X)}},this),this._streamError=D(function($){this._streamCleanUp(),this._sendError($)},this),this._streamEnd=D(function(){this._streamCleanUp(),E=!0,this._streamData("")},this),this._streamCleanUp=D(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function U(h){var p,b,E,$,X=Math.pow(2,53),v=-X,z=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,_=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,S=this,F=0,C=0,q=!1,I=!1,L=[],R={data:[],errors:[],meta:{}};function j(G){return h.skipEmptyLines==="greedy"?G.join("").trim()==="":G.length===1&&G[0].length===0}function nt(){if(R&&E&&(at("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+l.DefaultDelimiter+"'"),E=!1),h.skipEmptyLines&&(R.data=R.data.filter(function(O){return!j(O)})),it()){let O=function(w,rt){H(h.transformHeader)&&(w=h.transformHeader(w,rt)),L.push(w)};if(R)if(Array.isArray(R.data[0])){for(var G=0;it()&&G<R.data.length;G++)R.data[G].forEach(O);R.data.splice(0,1)}else R.data.forEach(O)}function M(O,w){for(var rt=h.header?{}:[],P=0;P<O.length;P++){var J=P,B=O[P],B=((pt,K)=>(ct=>(h.dynamicTypingFunction&&h.dynamicTyping[ct]===void 0&&(h.dynamicTyping[ct]=h.dynamicTypingFunction(ct)),(h.dynamicTyping[ct]||h.dynamicTyping)===!0))(pt)?K==="true"||K==="TRUE"||K!=="false"&&K!=="FALSE"&&((ct=>{if(z.test(ct)&&(ct=parseFloat(ct),v<ct&&ct<X))return 1})(K)?parseFloat(K):_.test(K)?new Date(K):K===""?null:K):K)(J=h.header?P>=L.length?"__parsed_extra":L[P]:J,B=h.transform?h.transform(B,J):B);J==="__parsed_extra"?(rt[J]=rt[J]||[],rt[J].push(B)):rt[J]=B}return h.header&&(P>L.length?at("FieldMismatch","TooManyFields","Too many fields: expected "+L.length+" fields but parsed "+P,C+w):P<L.length&&at("FieldMismatch","TooFewFields","Too few fields: expected "+L.length+" fields but parsed "+P,C+w)),rt}var Y;R&&(h.header||h.dynamicTyping||h.transform)&&(Y=1,!R.data.length||Array.isArray(R.data[0])?(R.data=R.data.map(M),Y=R.data.length):R.data=M(R.data,0),h.header&&R.meta&&(R.meta.fields=L),C+=Y)}function it(){return h.header&&L.length===0}function at(G,M,Y,O){G={type:G,code:M,message:Y},O!==void 0&&(G.row=O),R.errors.push(G)}H(h.step)&&($=h.step,h.step=function(G){R=G,it()?nt():(nt(),R.data.length!==0&&(F+=G.data.length,h.preview&&F>h.preview?b.abort():(R.data=R.data[0],$(R,S))))}),this.parse=function(G,M,Y){var O=h.quoteChar||'"',O=(h.newline||(h.newline=this.guessLineEndings(G,O)),E=!1,h.delimiter?H(h.delimiter)&&(h.delimiter=h.delimiter(G),R.meta.delimiter=h.delimiter):((O=((w,rt,P,J,B)=>{var pt,K,ct,wt;B=B||[",","	","|",";",l.RECORD_SEP,l.UNIT_SEP];for(var kt=0;kt<B.length;kt++){for(var vt,T=B[kt],f=0,g=0,x=0,k=(ct=void 0,new A({comments:J,delimiter:T,newline:rt,preview:10}).parse(w)),N=0;N<k.data.length;N++)P&&j(k.data[N])?x++:(vt=k.data[N].length,g+=vt,ct===void 0?ct=vt:0<vt&&(f+=Math.abs(vt-ct),ct=vt));0<k.data.length&&(g/=k.data.length-x),(K===void 0||f<=K)&&(wt===void 0||wt<g)&&1.99<g&&(K=f,pt=T,wt=g)}return{successful:!!(h.delimiter=pt),bestDelimiter:pt}})(G,h.newline,h.skipEmptyLines,h.comments,h.delimitersToGuess)).successful?h.delimiter=O.bestDelimiter:(E=!0,h.delimiter=l.DefaultDelimiter),R.meta.delimiter=h.delimiter),lt(h));return h.preview&&h.header&&O.preview++,p=G,b=new A(O),R=b.parse(p,M,Y),nt(),q?{meta:{paused:!0}}:R||{meta:{paused:!1}}},this.paused=function(){return q},this.pause=function(){q=!0,b.abort(),p=H(h.chunk)?"":p.substring(b.getCharIndex())},this.resume=function(){S.streamer._halted?(q=!1,S.streamer.parseChunk(p,!0)):setTimeout(S.resume,3)},this.aborted=function(){return I},this.abort=function(){I=!0,b.abort(),R.meta.aborted=!0,H(h.complete)&&h.complete(R),p=""},this.guessLineEndings=function(w,O){w=w.substring(0,1048576);var O=new RegExp(et(O)+"([^]*?)"+et(O),"gm"),Y=(w=w.replace(O,"")).split("\r"),O=w.split(`
`),w=1<O.length&&O[0].length<Y[0].length;if(Y.length===1||w)return`
`;for(var rt=0,P=0;P<Y.length;P++)Y[P][0]===`
`&&rt++;return rt>=Y.length/2?`\r
`:"\r"}}function et(h){return h.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function A(h){var p=(h=h||{}).delimiter,b=h.newline,E=h.comments,$=h.step,X=h.preview,v=h.fastMode,z=null,_=!1,S=h.quoteChar==null?'"':h.quoteChar,F=S;if(h.escapeChar!==void 0&&(F=h.escapeChar),(typeof p!="string"||-1<l.BAD_DELIMITERS.indexOf(p))&&(p=","),E===p)throw new Error("Comment character same as delimiter");E===!0?E="#":(typeof E!="string"||-1<l.BAD_DELIMITERS.indexOf(E))&&(E=!1),b!==`
`&&b!=="\r"&&b!==`\r
`&&(b=`
`);var C=0,q=!1;this.parse=function(I,L,R){if(typeof I!="string")throw new Error("Input must be a string");var j=I.length,nt=p.length,it=b.length,at=E.length,G=H($),M=[],Y=[],O=[],w=C=0;if(!I)return f();if(v||v!==!1&&I.indexOf(S)===-1){for(var rt=I.split(b),P=0;P<rt.length;P++){if(O=rt[P],C+=O.length,P!==rt.length-1)C+=b.length;else if(R)return f();if(!E||O.substring(0,at)!==E){if(G){if(M=[],wt(O.split(p)),g(),q)return f()}else wt(O.split(p));if(X&&X<=P)return M=M.slice(0,X),f(!0)}}return f()}for(var J=I.indexOf(p,C),B=I.indexOf(b,C),pt=new RegExp(et(F)+et(S),"g"),K=I.indexOf(S,C);;)if(I[C]===S)for(K=C,C++;;){if((K=I.indexOf(S,K+1))===-1)return R||Y.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:M.length,index:C}),vt();if(K===j-1)return vt(I.substring(C,K).replace(pt,S));if(S===F&&I[K+1]===F)K++;else if(S===F||K===0||I[K-1]!==F){J!==-1&&J<K+1&&(J=I.indexOf(p,K+1));var ct=kt((B=B!==-1&&B<K+1?I.indexOf(b,K+1):B)===-1?J:Math.min(J,B));if(I.substr(K+1+ct,nt)===p){O.push(I.substring(C,K).replace(pt,S)),I[C=K+1+ct+nt]!==S&&(K=I.indexOf(S,C)),J=I.indexOf(p,C),B=I.indexOf(b,C);break}if(ct=kt(B),I.substring(K+1+ct,K+1+ct+it)===b){if(O.push(I.substring(C,K).replace(pt,S)),T(K+1+ct+it),J=I.indexOf(p,C),K=I.indexOf(S,C),G&&(g(),q))return f();if(X&&M.length>=X)return f(!0);break}Y.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:M.length,index:C}),K++}}else if(E&&O.length===0&&I.substring(C,C+at)===E){if(B===-1)return f();C=B+it,B=I.indexOf(b,C),J=I.indexOf(p,C)}else if(J!==-1&&(J<B||B===-1))O.push(I.substring(C,J)),C=J+nt,J=I.indexOf(p,C);else{if(B===-1)break;if(O.push(I.substring(C,B)),T(B+it),G&&(g(),q))return f();if(X&&M.length>=X)return f(!0)}return vt();function wt(x){M.push(x),w=C}function kt(x){var k=0;return k=x!==-1&&(x=I.substring(K+1,x))&&x.trim()===""?x.length:k}function vt(x){return R||(x===void 0&&(x=I.substring(C)),O.push(x),C=j,wt(O),G&&g()),f()}function T(x){C=x,wt(O),O=[],B=I.indexOf(b,C)}function f(x){if(h.header&&!L&&M.length&&!_){var k=M[0],N=Object.create(null),Z=new Set(k);let ot=!1;for(let ht=0;ht<k.length;ht++){let ft=k[ht];if(N[ft=H(h.transformHeader)?h.transformHeader(ft,ht):ft]){let dt,xt=N[ft];for(;dt=ft+"_"+xt,xt++,Z.has(dt););Z.add(dt),k[ht]=dt,N[ft]++,ot=!0,(z=z===null?{}:z)[dt]=ft}else N[ft]=1,k[ht]=ft;Z.add(ft)}ot&&console.warn("Duplicate headers found and renamed."),_=!0}return{data:M,errors:Y,meta:{delimiter:p,linebreak:b,aborted:q,truncated:!!x,cursor:w+(L||0),renamedHeaders:z}}}function g(){$(f()),M=[],Y=[]}},this.abort=function(){q=!0},this.getCharIndex=function(){return C}}function tt(h){var p=h.data,b=s[p.workerId],E=!1;if(p.error)b.userError(p.error,p.file);else if(p.results&&p.results.data){var $={abort:function(){E=!0,Q(p.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:V,resume:V};if(H(b.userStep)){for(var X=0;X<p.results.data.length&&(b.userStep({data:p.results.data[X],errors:p.results.errors,meta:p.results.meta},$),!E);X++);delete p.results}else H(b.userChunk)&&(b.userChunk(p.results,$,p.file),delete p.results)}p.finished&&!E&&Q(p.workerId,p.results)}function Q(h,p){var b=s[h];H(b.userComplete)&&b.userComplete(p),b.terminate(),delete s[h]}function V(){throw new Error("Not implemented.")}function lt(h){if(typeof h!="object"||h===null)return h;var p,b=Array.isArray(h)?[]:{};for(p in h)b[p]=lt(h[p]);return b}function D(h,p){return function(){h.apply(p,arguments)}}function H(h){return typeof h=="function"}return l.parse=function(h,p){var b=(p=p||{}).dynamicTyping||!1;if(H(b)&&(p.dynamicTypingFunction=b,b={}),p.dynamicTyping=b,p.transform=!!H(p.transform)&&p.transform,!p.worker||!l.WORKERS_SUPPORTED)return b=null,l.NODE_STREAM_INPUT,typeof h=="string"?(h=(E=>E.charCodeAt(0)!==65279?E:E.slice(1))(h),b=new(p.download?y:m)(p)):h.readable===!0&&H(h.read)&&H(h.on)?b=new W(p):(r.File&&h instanceof File||h instanceof Object)&&(b=new d(p)),b.stream(h);(b=(()=>{var E;return!!l.WORKERS_SUPPORTED&&(E=(()=>{var $=r.URL||r.webkitURL||null,X=n.toString();return l.BLOB_URL||(l.BLOB_URL=$.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",X,")();"],{type:"text/javascript"})))})(),(E=new r.Worker(E)).onmessage=tt,E.id=c++,s[E.id]=E)})()).userStep=p.step,b.userChunk=p.chunk,b.userComplete=p.complete,b.userError=p.error,p.step=H(p.step),p.chunk=H(p.chunk),p.complete=H(p.complete),p.error=H(p.error),delete p.worker,b.postMessage({input:h,config:p,workerId:b.id})},l.unparse=function(h,p){var b=!1,E=!0,$=",",X=`\r
`,v='"',z=v+v,_=!1,S=null,F=!1,C=((()=>{if(typeof p=="object"){if(typeof p.delimiter!="string"||l.BAD_DELIMITERS.filter(function(L){return p.delimiter.indexOf(L)!==-1}).length||($=p.delimiter),typeof p.quotes!="boolean"&&typeof p.quotes!="function"&&!Array.isArray(p.quotes)||(b=p.quotes),typeof p.skipEmptyLines!="boolean"&&typeof p.skipEmptyLines!="string"||(_=p.skipEmptyLines),typeof p.newline=="string"&&(X=p.newline),typeof p.quoteChar=="string"&&(v=p.quoteChar),typeof p.header=="boolean"&&(E=p.header),Array.isArray(p.columns)){if(p.columns.length===0)throw new Error("Option columns is empty");S=p.columns}p.escapeChar!==void 0&&(z=p.escapeChar+v),p.escapeFormulae instanceof RegExp?F=p.escapeFormulae:typeof p.escapeFormulae=="boolean"&&p.escapeFormulae&&(F=/^[=+\-@\t\r].*$/)}})(),new RegExp(et(v),"g"));if(typeof h=="string"&&(h=JSON.parse(h)),Array.isArray(h)){if(!h.length||Array.isArray(h[0]))return q(null,h,_);if(typeof h[0]=="object")return q(S||Object.keys(h[0]),h,_)}else if(typeof h=="object")return typeof h.data=="string"&&(h.data=JSON.parse(h.data)),Array.isArray(h.data)&&(h.fields||(h.fields=h.meta&&h.meta.fields||S),h.fields||(h.fields=Array.isArray(h.data[0])?h.fields:typeof h.data[0]=="object"?Object.keys(h.data[0]):[]),Array.isArray(h.data[0])||typeof h.data[0]=="object"||(h.data=[h.data])),q(h.fields||[],h.data||[],_);throw new Error("Unable to serialize unrecognized input");function q(L,R,j){var nt="",it=(typeof L=="string"&&(L=JSON.parse(L)),typeof R=="string"&&(R=JSON.parse(R)),Array.isArray(L)&&0<L.length),at=!Array.isArray(R[0]);if(it&&E){for(var G=0;G<L.length;G++)0<G&&(nt+=$),nt+=I(L[G],G);0<R.length&&(nt+=X)}for(var M=0;M<R.length;M++){var Y=(it?L:R[M]).length,O=!1,w=it?Object.keys(R[M]).length===0:R[M].length===0;if(j&&!it&&(O=j==="greedy"?R[M].join("").trim()==="":R[M].length===1&&R[M][0].length===0),j==="greedy"&&it){for(var rt=[],P=0;P<Y;P++){var J=at?L[P]:P;rt.push(R[M][J])}O=rt.join("").trim()===""}if(!O){for(var B=0;B<Y;B++){0<B&&!w&&(nt+=$);var pt=it&&at?L[B]:B;nt+=I(R[M][pt],B)}M<R.length-1&&(!j||0<Y&&!w)&&(nt+=X)}}return nt}function I(L,R){var j,nt;return L==null?"":L.constructor===Date?JSON.stringify(L).slice(1,25):(nt=!1,F&&typeof L=="string"&&F.test(L)&&(L="'"+L,nt=!0),j=L.toString().replace(C,z),(nt=nt||b===!0||typeof b=="function"&&b(L,R)||Array.isArray(b)&&b[R]||((it,at)=>{for(var G=0;G<at.length;G++)if(-1<it.indexOf(at[G]))return!0;return!1})(j,l.BAD_DELIMITERS)||-1<j.indexOf($)||j.charAt(0)===" "||j.charAt(j.length-1)===" ")?v+j+v:j)}},l.RECORD_SEP="",l.UNIT_SEP="",l.BYTE_ORDER_MARK="\uFEFF",l.BAD_DELIMITERS=["\r",`
`,'"',l.BYTE_ORDER_MARK],l.WORKERS_SUPPORTED=!a&&!!r.Worker,l.NODE_STREAM_INPUT=1,l.LocalChunkSize=10485760,l.RemoteChunkSize=5242880,l.DefaultDelimiter=",",l.Parser=A,l.ParserHandle=U,l.NetworkStreamer=y,l.FileStreamer=d,l.StringStreamer=m,l.ReadableStreamStreamer=W,r.jQuery&&((i=r.jQuery).fn.parse=function(h){var p=h.config||{},b=[];return this.each(function(X){if(!(i(this).prop("tagName").toUpperCase()==="INPUT"&&i(this).attr("type").toLowerCase()==="file"&&r.FileReader)||!this.files||this.files.length===0)return!0;for(var v=0;v<this.files.length;v++)b.push({file:this.files[v],inputElem:this,instanceConfig:i.extend({},p)})}),E(),this;function E(){if(b.length===0)H(h.complete)&&h.complete();else{var X,v,z,_,S=b[0];if(H(h.before)){var F=h.before(S.file,S.inputElem);if(typeof F=="object"){if(F.action==="abort")return X="AbortError",v=S.file,z=S.inputElem,_=F.reason,void(H(h.error)&&h.error({name:X},v,z,_));if(F.action==="skip")return void $();typeof F.config=="object"&&(S.instanceConfig=i.extend(S.instanceConfig,F.config))}else if(F==="skip")return void $()}var C=S.instanceConfig.complete;S.instanceConfig.complete=function(q){H(C)&&C(q,S.file,S.inputElem),$()},l.parse(S.file,S.instanceConfig)}}function $(){b.splice(0,1),E()}}),o&&(r.onmessage=function(h){h=h.data,l.WORKER_ID===void 0&&h&&(l.WORKER_ID=h.workerId),typeof h.input=="string"?r.postMessage({workerId:l.WORKER_ID,results:l.parse(h.input,h.config),finished:!0}):(r.File&&h.input instanceof File||h.input instanceof Object)&&(h=l.parse(h.input,h.config))&&r.postMessage({workerId:l.WORKER_ID,results:h,finished:!0})}),(y.prototype=Object.create(u.prototype)).constructor=y,(d.prototype=Object.create(u.prototype)).constructor=d,(m.prototype=Object.create(m.prototype)).constructor=m,(W.prototype=Object.create(u.prototype)).constructor=W,l})}(Me)),Me.exports}var ii=ri();const ai=ei(ii);function Zt(t){const e=Number(t);return Number.isFinite(e)?e:void 0}class oi{static parse(e){return ai.parse(e,{header:!0,skipEmptyLines:!0}).data.map(r=>{let i;const a=(r.labelKind??"").trim().toLowerCase();if(a==="text"?i={kind:"text",text:r.labelText}:a==="image"?i={kind:"image",src:r.labelSrc||"",width:Zt(r.labelWidth),height:Zt(r.labelHeight),fit:r.labelFit||void 0,zoom:Zt(r.labelZoom)}:a==="video"&&(i={kind:"video",src:r.labelSrc||"",width:Zt(r.labelWidth),height:Zt(r.labelHeight),fit:r.labelFit||void 0,zoom:Zt(r.labelZoom)}),!i&&r.backgroundType){const s=r.backgroundType.trim().toLowerCase();s==="image"&&r.backgroundSource?i={kind:"image",src:r.backgroundSource}:s==="video"&&r.backgroundSource?i={kind:"video",src:r.backgroundSource}:s==="text"&&(i={kind:"text",text:r.description||r.title})}let o;if(r.metadata)try{o=JSON.parse(r.metadata)}catch{}return{title:r.title,start:new Date(r.start),end:r.end?new Date(r.end):void 0,description:r.description,overlayColor:r.overlayColor??r.overlayColor??void 0,label:i,metadata:o}})}}class si{static parse(e){return(typeof e=="string"?JSON.parse(e.replace(/^\uFEFF/,"").trim()):e).items.map(r=>{let i=r.label;if(!i&&r.background){const a=(r.background.type??"").toLowerCase();a==="image"&&r.background.source?i={kind:"image",src:r.background.source}:a==="video"&&r.background.source?i={kind:"video",src:r.background.source}:a==="text"&&(i={kind:"text",text:r.description??r.title})}return{title:r.title,start:new Date(r.start),end:r.end?new Date(r.end):void 0,description:r.description,overlayColor:r.overlayColor??r.background?.overlayColor,label:i,metadata:r.metadata}})}}class li{static parse(e){const r=new DOMParser().parseFromString(e,"application/xml"),i=[];return r.querySelectorAll("item").forEach(a=>{const o=u=>a.querySelector(u)?.textContent?.trim()||"",s=a.querySelector("label");let c;if(s){const u=(s.getAttribute("kind")||"").toLowerCase();u==="text"?c={kind:"text",text:s.textContent?.trim()||void 0}:u==="image"?c={kind:"image",src:s.getAttribute("src")||"",width:s.getAttribute("width")?Number(s.getAttribute("width")):void 0,height:s.getAttribute("height")?Number(s.getAttribute("height")):void 0,fit:s.getAttribute("fit")||void 0,zoom:s.getAttribute("zoom")?Number(s.getAttribute("zoom")):void 0}:u==="video"&&(c={kind:"video",src:s.getAttribute("src")||"",width:s.getAttribute("width")?Number(s.getAttribute("width")):void 0,height:s.getAttribute("height")?Number(s.getAttribute("height")):void 0,fit:s.getAttribute("fit")||void 0,zoom:s.getAttribute("zoom")?Number(s.getAttribute("zoom")):void 0})}const l=o("overlayColor")||s?.getAttribute("overlayColor")||void 0;i.push({title:o("title"),start:new Date(o("start")),end:a.querySelector("end")?new Date(o("end")):void 0,description:o("description"),overlayColor:l,label:c})}),i}}class ci{static parse(e){const r=new DOMParser().parseFromString(e,"application/xml"),i=[];return r.querySelectorAll("listEvent event").forEach(a=>{const o=y=>a.querySelector(y)?.textContent?.trim()||"",s=a.getAttribute("when")||a.querySelector("date")?.getAttribute("when")||"",c=s?new Date(s):new Date(o("date"));let l;const u=a.querySelector("label");if(u){const y=(u.getAttribute("kind")||"").toLowerCase();y==="text"?l={kind:"text",text:u.textContent?.trim()||void 0}:y==="image"?l={kind:"image",src:u.getAttribute("src")||""}:y==="video"&&(l={kind:"video",src:u.getAttribute("src")||""})}else{const y=o("title")||o("desc");y&&(l={kind:"text",text:y})}i.push({title:o("title")||o("desc"),start:c,description:o("desc"),label:l,metadata:{when:s||void 0,type:a.getAttribute("type")||void 0}})}),i}}const qe=new Map;class Ht{static register(e){qe.set(e.name.toLowerCase(),e)}static supportedFormats(){return Array.from(new Set(["csv","json","xml","tei",...qe.keys()]))}static parse(e,n){const r=qe.get(String(n).toLowerCase());if(r)return r.parse(e);switch(n){case"csv":return oi.parse(e);case"json":return si.parse(e);case"xml":return li.parse(e);case"tei":return ci.parse(e);default:throw new Error(`Unsupported data type: ${n}`)}}}function Se(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function ui(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function dn(t){let e,n,r;t.length!==2?(e=Se,n=(s,c)=>Se(t(s),c),r=(s,c)=>t(s)-c):(e=t===Se||t===ui?t:fi,n=t,r=t);function i(s,c,l=0,u=s.length){if(l<u){if(e(c,c)!==0)return u;do{const y=l+u>>>1;n(s[y],c)<0?l=y+1:u=y}while(l<u)}return l}function a(s,c,l=0,u=s.length){if(l<u){if(e(c,c)!==0)return u;do{const y=l+u>>>1;n(s[y],c)<=0?l=y+1:u=y}while(l<u)}return l}function o(s,c,l=0,u=s.length){const y=i(s,c,l,u-1);return y>l&&r(s[y-1],c)>-r(s[y],c)?y-1:y}return{left:i,center:o,right:a}}function fi(){return 0}function hi(t){return t===null?NaN:+t}const di=dn(Se),pi=di.right;dn(hi).center;function pr(t,e){let n,r;for(const i of t)i!=null&&(n===void 0?i>=i&&(n=r=i):(n>i&&(n=i),r<i&&(r=i)));return[n,r]}class Dn extends Map{constructor(e,n=yi){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),e!=null)for(const[r,i]of e)this.set(r,i)}get(e){return super.get(On(this,e))}has(e){return super.has(On(this,e))}set(e,n){return super.set(gi(this,e),n)}delete(e){return super.delete(mi(this,e))}}function On({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):n}function gi({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):(t.set(r,n),n)}function mi({_intern:t,_key:e},n){const r=e(n);return t.has(r)&&(n=t.get(r),t.delete(r)),n}function yi(t){return t!==null&&typeof t=="object"?t.valueOf():t}const vi=Math.sqrt(50),xi=Math.sqrt(10),bi=Math.sqrt(2);function gr(t,e,n){const r=(e-t)/Math.max(0,n),i=Math.floor(Math.log10(r)),a=r/Math.pow(10,i),o=a>=vi?10:a>=xi?5:a>=bi?2:1;let s,c,l;return i<0?(l=Math.pow(10,-i)/o,s=Math.round(t*l),c=Math.round(e*l),s/l<t&&++s,c/l>e&&--c,l=-l):(l=Math.pow(10,i)*o,s=Math.round(t/l),c=Math.round(e/l),s*l<t&&++s,c*l>e&&--c),c<s&&.5<=n&&n<2?gr(t,e,n*2):[s,c,l]}function $n(t,e,n){return e=+e,t=+t,n=+n,gr(t,e,n)[2]}function In(t,e,n){e=+e,t=+t,n=+n;const r=e<t,i=r?$n(e,t,n):$n(t,e,n);return(r?-1:1)*(i<0?1/-i:i)}function wi(t,e,n){t=+t,e=+e,n=(i=arguments.length)<2?(e=t,t=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((e-t)/n))|0,a=new Array(i);++r<i;)a[r]=t+r*n;return a}function _i(t){return t}var Xe=1,Be=2,en=3,fe=4,zn=1e-6;function ki(t){return"translate("+t+",0)"}function Mi(t){return"translate(0,"+t+")"}function Si(t){return e=>+t(e)}function Ti(t,e){return e=Math.max(0,t.bandwidth()-e*2)/2,t.round()&&(e=Math.round(e)),n=>+t(n)+e}function Ci(){return!this.__axis}function mr(t,e){var n=[],r=null,i=null,a=6,o=6,s=3,c=typeof window<"u"&&window.devicePixelRatio>1?0:.5,l=t===Xe||t===fe?-1:1,u=t===fe||t===Be?"x":"y",y=t===Xe||t===en?ki:Mi;function d(m){var W=r??(e.ticks?e.ticks.apply(e,n):e.domain()),U=i??(e.tickFormat?e.tickFormat.apply(e,n):_i),et=Math.max(a,0)+s,A=e.range(),tt=+A[0]+c,Q=+A[A.length-1]+c,V=(e.bandwidth?Ti:Si)(e.copy(),c),lt=m.selection?m.selection():m,D=lt.selectAll(".domain").data([null]),H=lt.selectAll(".tick").data(W,e).order(),h=H.exit(),p=H.enter().append("g").attr("class","tick"),b=H.select("line"),E=H.select("text");D=D.merge(D.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),H=H.merge(p),b=b.merge(p.append("line").attr("stroke","currentColor").attr(u+"2",l*a)),E=E.merge(p.append("text").attr("fill","currentColor").attr(u,l*et).attr("dy",t===Xe?"0em":t===en?"0.71em":"0.32em")),m!==lt&&(D=D.transition(m),H=H.transition(m),b=b.transition(m),E=E.transition(m),h=h.transition(m).attr("opacity",zn).attr("transform",function($){return isFinite($=V($))?y($+c):this.getAttribute("transform")}),p.attr("opacity",zn).attr("transform",function($){var X=this.parentNode.__axis;return y((X&&isFinite(X=X($))?X:V($))+c)})),h.remove(),D.attr("d",t===fe||t===Be?o?"M"+l*o+","+tt+"H"+c+"V"+Q+"H"+l*o:"M"+c+","+tt+"V"+Q:o?"M"+tt+","+l*o+"V"+c+"H"+Q+"V"+l*o:"M"+tt+","+c+"H"+Q),H.attr("opacity",1).attr("transform",function($){return y(V($)+c)}),b.attr(u+"2",l*a),E.attr(u,l*et).text(U),lt.filter(Ci).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",t===Be?"start":t===fe?"end":"middle"),lt.each(function(){this.__axis=V})}return d.scale=function(m){return arguments.length?(e=m,d):e},d.ticks=function(){return n=Array.from(arguments),d},d.tickArguments=function(m){return arguments.length?(n=m==null?[]:Array.from(m),d):n.slice()},d.tickValues=function(m){return arguments.length?(r=m==null?null:Array.from(m),d):r&&r.slice()},d.tickFormat=function(m){return arguments.length?(i=m,d):i},d.tickSize=function(m){return arguments.length?(a=o=+m,d):a},d.tickSizeInner=function(m){return arguments.length?(a=+m,d):a},d.tickSizeOuter=function(m){return arguments.length?(o=+m,d):o},d.tickPadding=function(m){return arguments.length?(s=+m,d):s},d.offset=function(m){return arguments.length?(c=+m,d):c},d}function Ai(t){return mr(en,t)}function Fn(t){return mr(fe,t)}var Ei={value:()=>{}};function pn(){for(var t=0,e=arguments.length,n={},r;t<e;++t){if(!(r=arguments[t]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new Te(n)}function Te(t){this._=t}function Di(t,e){return t.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!e.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}Te.prototype=pn.prototype={constructor:Te,on:function(t,e){var n=this._,r=Di(t+"",n),i,a=-1,o=r.length;if(arguments.length<2){for(;++a<o;)if((i=(t=r[a]).type)&&(i=Oi(n[i],t.name)))return i;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++a<o;)if(i=(t=r[a]).type)n[i]=Nn(n[i],t.name,e);else if(e==null)for(i in n)n[i]=Nn(n[i],t.name,null);return this},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new Te(t)},call:function(t,e){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,a;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(a=this._[t],r=0,i=a.length;r<i;++r)a[r].value.apply(e,n)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,a=r.length;i<a;++i)r[i].value.apply(e,n)}};function Oi(t,e){for(var n=0,r=t.length,i;n<r;++n)if((i=t[n]).name===e)return i.value}function Nn(t,e,n){for(var r=0,i=t.length;r<i;++r)if(t[r].name===e){t[r]=Ei,t=t.slice(0,r).concat(t.slice(r+1));break}return n!=null&&t.push({name:e,value:n}),t}var nn="http://www.w3.org/1999/xhtml";const Rn={svg:"http://www.w3.org/2000/svg",xhtml:nn,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function He(t){var e=t+="",n=e.indexOf(":");return n>=0&&(e=t.slice(0,n))!=="xmlns"&&(t=t.slice(n+1)),Rn.hasOwnProperty(e)?{space:Rn[e],local:t}:t}function $i(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===nn&&e.documentElement.namespaceURI===nn?e.createElement(t):e.createElementNS(n,t)}}function Ii(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function yr(t){var e=He(t);return(e.local?Ii:$i)(e)}function zi(){}function gn(t){return t==null?zi:function(){return this.querySelector(t)}}function Fi(t){typeof t!="function"&&(t=gn(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var a=e[i],o=a.length,s=r[i]=new Array(o),c,l,u=0;u<o;++u)(c=a[u])&&(l=t.call(c,c.__data__,u,a))&&("__data__"in c&&(l.__data__=c.__data__),s[u]=l);return new _t(r,this._parents)}function Ni(t){return t==null?[]:Array.isArray(t)?t:Array.from(t)}function Ri(){return[]}function vr(t){return t==null?Ri:function(){return this.querySelectorAll(t)}}function Li(t){return function(){return Ni(t.apply(this,arguments))}}function Ui(t){typeof t=="function"?t=Li(t):t=vr(t);for(var e=this._groups,n=e.length,r=[],i=[],a=0;a<n;++a)for(var o=e[a],s=o.length,c,l=0;l<s;++l)(c=o[l])&&(r.push(t.call(c,c.__data__,l,o)),i.push(c));return new _t(r,i)}function xr(t){return function(){return this.matches(t)}}function br(t){return function(e){return e.matches(t)}}var Hi=Array.prototype.find;function Yi(t){return function(){return Hi.call(this.children,t)}}function Pi(){return this.firstElementChild}function Wi(t){return this.select(t==null?Pi:Yi(typeof t=="function"?t:br(t)))}var qi=Array.prototype.filter;function Xi(){return Array.from(this.children)}function Bi(t){return function(){return qi.call(this.children,t)}}function Gi(t){return this.selectAll(t==null?Xi:Bi(typeof t=="function"?t:br(t)))}function Vi(t){typeof t!="function"&&(t=xr(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var a=e[i],o=a.length,s=r[i]=[],c,l=0;l<o;++l)(c=a[l])&&t.call(c,c.__data__,l,a)&&s.push(c);return new _t(r,this._parents)}function wr(t){return new Array(t.length)}function ji(){return new _t(this._enter||this._groups.map(wr),this._parents)}function De(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}De.prototype={constructor:De,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function Ki(t){return function(){return t}}function Zi(t,e,n,r,i,a){for(var o=0,s,c=e.length,l=a.length;o<l;++o)(s=e[o])?(s.__data__=a[o],r[o]=s):n[o]=new De(t,a[o]);for(;o<c;++o)(s=e[o])&&(i[o]=s)}function Qi(t,e,n,r,i,a,o){var s,c,l=new Map,u=e.length,y=a.length,d=new Array(u),m;for(s=0;s<u;++s)(c=e[s])&&(d[s]=m=o.call(c,c.__data__,s,e)+"",l.has(m)?i[s]=c:l.set(m,c));for(s=0;s<y;++s)m=o.call(t,a[s],s,a)+"",(c=l.get(m))?(r[s]=c,c.__data__=a[s],l.delete(m)):n[s]=new De(t,a[s]);for(s=0;s<u;++s)(c=e[s])&&l.get(d[s])===c&&(i[s]=c)}function Ji(t){return t.__data__}function ta(t,e){if(!arguments.length)return Array.from(this,Ji);var n=e?Qi:Zi,r=this._parents,i=this._groups;typeof t!="function"&&(t=Ki(t));for(var a=i.length,o=new Array(a),s=new Array(a),c=new Array(a),l=0;l<a;++l){var u=r[l],y=i[l],d=y.length,m=ea(t.call(u,u&&u.__data__,l,r)),W=m.length,U=s[l]=new Array(W),et=o[l]=new Array(W),A=c[l]=new Array(d);n(u,y,U,et,A,m,e);for(var tt=0,Q=0,V,lt;tt<W;++tt)if(V=U[tt]){for(tt>=Q&&(Q=tt+1);!(lt=et[Q])&&++Q<W;);V._next=lt||null}}return o=new _t(o,r),o._enter=s,o._exit=c,o}function ea(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function na(){return new _t(this._exit||this._groups.map(wr),this._parents)}function ra(t,e,n){var r=this.enter(),i=this,a=this.exit();return typeof t=="function"?(r=t(r),r&&(r=r.selection())):r=r.append(t+""),e!=null&&(i=e(i),i&&(i=i.selection())),n==null?a.remove():n(a),r&&i?r.merge(i).order():i}function ia(t){for(var e=t.selection?t.selection():t,n=this._groups,r=e._groups,i=n.length,a=r.length,o=Math.min(i,a),s=new Array(i),c=0;c<o;++c)for(var l=n[c],u=r[c],y=l.length,d=s[c]=new Array(y),m,W=0;W<y;++W)(m=l[W]||u[W])&&(d[W]=m);for(;c<i;++c)s[c]=n[c];return new _t(s,this._parents)}function aa(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var r=t[e],i=r.length-1,a=r[i],o;--i>=0;)(o=r[i])&&(a&&o.compareDocumentPosition(a)^4&&a.parentNode.insertBefore(o,a),a=o);return this}function oa(t){t||(t=sa);function e(y,d){return y&&d?t(y.__data__,d.__data__):!y-!d}for(var n=this._groups,r=n.length,i=new Array(r),a=0;a<r;++a){for(var o=n[a],s=o.length,c=i[a]=new Array(s),l,u=0;u<s;++u)(l=o[u])&&(c[u]=l);c.sort(e)}return new _t(i,this._parents).order()}function sa(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function la(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function ca(){return Array.from(this)}function ua(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,a=r.length;i<a;++i){var o=r[i];if(o)return o}return null}function fa(){let t=0;for(const e of this)++t;return t}function ha(){return!this.node()}function da(t){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var i=e[n],a=0,o=i.length,s;a<o;++a)(s=i[a])&&t.call(s,s.__data__,a,i);return this}function pa(t){return function(){this.removeAttribute(t)}}function ga(t){return function(){this.removeAttributeNS(t.space,t.local)}}function ma(t,e){return function(){this.setAttribute(t,e)}}function ya(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function va(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttribute(t):this.setAttribute(t,n)}}function xa(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function ba(t,e){var n=He(t);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((e==null?n.local?ga:pa:typeof e=="function"?n.local?xa:va:n.local?ya:ma)(n,e))}function _r(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function wa(t){return function(){this.style.removeProperty(t)}}function _a(t,e,n){return function(){this.style.setProperty(t,e,n)}}function ka(t,e,n){return function(){var r=e.apply(this,arguments);r==null?this.style.removeProperty(t):this.style.setProperty(t,r,n)}}function Ma(t,e,n){return arguments.length>1?this.each((e==null?wa:typeof e=="function"?ka:_a)(t,e,n??"")):ne(this.node(),t)}function ne(t,e){return t.style.getPropertyValue(e)||_r(t).getComputedStyle(t,null).getPropertyValue(e)}function Sa(t){return function(){delete this[t]}}function Ta(t,e){return function(){this[t]=e}}function Ca(t,e){return function(){var n=e.apply(this,arguments);n==null?delete this[t]:this[t]=n}}function Aa(t,e){return arguments.length>1?this.each((e==null?Sa:typeof e=="function"?Ca:Ta)(t,e)):this.node()[t]}function kr(t){return t.trim().split(/^|\s+/)}function mn(t){return t.classList||new Mr(t)}function Mr(t){this._node=t,this._names=kr(t.getAttribute("class")||"")}Mr.prototype={add:function(t){var e=this._names.indexOf(t);e<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function Sr(t,e){for(var n=mn(t),r=-1,i=e.length;++r<i;)n.add(e[r])}function Tr(t,e){for(var n=mn(t),r=-1,i=e.length;++r<i;)n.remove(e[r])}function Ea(t){return function(){Sr(this,t)}}function Da(t){return function(){Tr(this,t)}}function Oa(t,e){return function(){(e.apply(this,arguments)?Sr:Tr)(this,t)}}function $a(t,e){var n=kr(t+"");if(arguments.length<2){for(var r=mn(this.node()),i=-1,a=n.length;++i<a;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof e=="function"?Oa:e?Ea:Da)(n,e))}function Ia(){this.textContent=""}function za(t){return function(){this.textContent=t}}function Fa(t){return function(){var e=t.apply(this,arguments);this.textContent=e??""}}function Na(t){return arguments.length?this.each(t==null?Ia:(typeof t=="function"?Fa:za)(t)):this.node().textContent}function Ra(){this.innerHTML=""}function La(t){return function(){this.innerHTML=t}}function Ua(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e??""}}function Ha(t){return arguments.length?this.each(t==null?Ra:(typeof t=="function"?Ua:La)(t)):this.node().innerHTML}function Ya(){this.nextSibling&&this.parentNode.appendChild(this)}function Pa(){return this.each(Ya)}function Wa(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function qa(){return this.each(Wa)}function Xa(t){var e=typeof t=="function"?t:yr(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function Ba(){return null}function Ga(t,e){var n=typeof t=="function"?t:yr(t),r=e==null?Ba:typeof e=="function"?e:gn(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function Va(){var t=this.parentNode;t&&t.removeChild(this)}function ja(){return this.each(Va)}function Ka(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function Za(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function Qa(t){return this.select(t?Za:Ka)}function Ja(t){return arguments.length?this.property("__data__",t):this.node().__data__}function to(t){return function(e){t.call(this,e,this.__data__)}}function eo(t){return t.trim().split(/^|\s+/).map(function(e){var n="",r=e.indexOf(".");return r>=0&&(n=e.slice(r+1),e=e.slice(0,r)),{type:e,name:n}})}function no(t){return function(){var e=this.__on;if(e){for(var n=0,r=-1,i=e.length,a;n<i;++n)a=e[n],(!t.type||a.type===t.type)&&a.name===t.name?this.removeEventListener(a.type,a.listener,a.options):e[++r]=a;++r?e.length=r:delete this.__on}}}function ro(t,e,n){return function(){var r=this.__on,i,a=to(e);if(r){for(var o=0,s=r.length;o<s;++o)if((i=r[o]).type===t.type&&i.name===t.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=a,i.options=n),i.value=e;return}}this.addEventListener(t.type,a,n),i={type:t.type,name:t.name,value:e,listener:a,options:n},r?r.push(i):this.__on=[i]}}function io(t,e,n){var r=eo(t+""),i,a=r.length,o;if(arguments.length<2){var s=this.node().__on;if(s){for(var c=0,l=s.length,u;c<l;++c)for(i=0,u=s[c];i<a;++i)if((o=r[i]).type===u.type&&o.name===u.name)return u.value}return}for(s=e?ro:no,i=0;i<a;++i)this.each(s(r[i],e,n));return this}function Cr(t,e,n){var r=_r(t),i=r.CustomEvent;typeof i=="function"?i=new i(e,n):(i=r.document.createEvent("Event"),n?(i.initEvent(e,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(e,!1,!1)),t.dispatchEvent(i)}function ao(t,e){return function(){return Cr(this,t,e)}}function oo(t,e){return function(){return Cr(this,t,e.apply(this,arguments))}}function so(t,e){return this.each((typeof e=="function"?oo:ao)(t,e))}function*lo(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,a=r.length,o;i<a;++i)(o=r[i])&&(yield o)}var Ar=[null];function _t(t,e){this._groups=t,this._parents=e}function ye(){return new _t([[document.documentElement]],Ar)}function co(){return this}_t.prototype=ye.prototype={constructor:_t,select:Fi,selectAll:Ui,selectChild:Wi,selectChildren:Gi,filter:Vi,data:ta,enter:ji,exit:na,join:ra,merge:ia,selection:co,order:aa,sort:oa,call:la,nodes:ca,node:ua,size:fa,empty:ha,each:da,attr:ba,style:Ma,property:Aa,classed:$a,text:Na,html:Ha,raise:Pa,lower:qa,append:Xa,insert:Ga,remove:ja,clone:Qa,datum:Ja,on:io,dispatch:so,[Symbol.iterator]:lo};function ut(t){return typeof t=="string"?new _t([[document.querySelector(t)]],[document.documentElement]):new _t([[t]],Ar)}function uo(t){let e;for(;e=t.sourceEvent;)t=e;return t}function Yt(t,e){if(t=uo(t),e===void 0&&(e=t.currentTarget),e){var n=e.ownerSVGElement||e;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=t.clientX,r.y=t.clientY,r=r.matrixTransform(e.getScreenCTM().inverse()),[r.x,r.y]}if(e.getBoundingClientRect){var i=e.getBoundingClientRect();return[t.clientX-i.left-e.clientLeft,t.clientY-i.top-e.clientTop]}}return[t.pageX,t.pageY]}const rn={capture:!0,passive:!1};function an(t){t.preventDefault(),t.stopImmediatePropagation()}function fo(t){var e=t.document.documentElement,n=ut(t).on("dragstart.drag",an,rn);"onselectstart"in e?n.on("selectstart.drag",an,rn):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}function ho(t,e){var n=t.document.documentElement,r=ut(t).on("dragstart.drag",null);e&&(r.on("click.drag",an,rn),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}function yn(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function Er(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function ve(){}var pe=.7,Oe=1/pe,ee="\\s*([+-]?\\d+)\\s*",ge="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Et="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",po=/^#([0-9a-f]{3,8})$/,go=new RegExp(`^rgb\\(${ee},${ee},${ee}\\)$`),mo=new RegExp(`^rgb\\(${Et},${Et},${Et}\\)$`),yo=new RegExp(`^rgba\\(${ee},${ee},${ee},${ge}\\)$`),vo=new RegExp(`^rgba\\(${Et},${Et},${Et},${ge}\\)$`),xo=new RegExp(`^hsl\\(${ge},${Et},${Et}\\)$`),bo=new RegExp(`^hsla\\(${ge},${Et},${Et},${ge}\\)$`),Ln={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};yn(ve,Bt,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:Un,formatHex:Un,formatHex8:wo,formatHsl:_o,formatRgb:Hn,toString:Hn});function Un(){return this.rgb().formatHex()}function wo(){return this.rgb().formatHex8()}function _o(){return Dr(this).formatHsl()}function Hn(){return this.rgb().formatRgb()}function Bt(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=po.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?Yn(e):n===3?new bt(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?be(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?be(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=go.exec(t))?new bt(e[1],e[2],e[3],1):(e=mo.exec(t))?new bt(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=yo.exec(t))?be(e[1],e[2],e[3],e[4]):(e=vo.exec(t))?be(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=xo.exec(t))?qn(e[1],e[2]/100,e[3]/100,1):(e=bo.exec(t))?qn(e[1],e[2]/100,e[3]/100,e[4]):Ln.hasOwnProperty(t)?Yn(Ln[t]):t==="transparent"?new bt(NaN,NaN,NaN,0):null}function Yn(t){return new bt(t>>16&255,t>>8&255,t&255,1)}function be(t,e,n,r){return r<=0&&(t=e=n=NaN),new bt(t,e,n,r)}function ko(t){return t instanceof ve||(t=Bt(t)),t?(t=t.rgb(),new bt(t.r,t.g,t.b,t.opacity)):new bt}function on(t,e,n,r){return arguments.length===1?ko(t):new bt(t,e,n,r??1)}function bt(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}yn(bt,on,Er(ve,{brighter(t){return t=t==null?Oe:Math.pow(Oe,t),new bt(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?pe:Math.pow(pe,t),new bt(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new bt(qt(this.r),qt(this.g),qt(this.b),$e(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Pn,formatHex:Pn,formatHex8:Mo,formatRgb:Wn,toString:Wn}));function Pn(){return`#${Wt(this.r)}${Wt(this.g)}${Wt(this.b)}`}function Mo(){return`#${Wt(this.r)}${Wt(this.g)}${Wt(this.b)}${Wt((isNaN(this.opacity)?1:this.opacity)*255)}`}function Wn(){const t=$e(this.opacity);return`${t===1?"rgb(":"rgba("}${qt(this.r)}, ${qt(this.g)}, ${qt(this.b)}${t===1?")":`, ${t})`}`}function $e(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function qt(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function Wt(t){return t=qt(t),(t<16?"0":"")+t.toString(16)}function qn(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new Tt(t,e,n,r)}function Dr(t){if(t instanceof Tt)return new Tt(t.h,t.s,t.l,t.opacity);if(t instanceof ve||(t=Bt(t)),!t)return new Tt;if(t instanceof Tt)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),a=Math.max(e,n,r),o=NaN,s=a-i,c=(a+i)/2;return s?(e===a?o=(n-r)/s+(n<r)*6:n===a?o=(r-e)/s+2:o=(e-n)/s+4,s/=c<.5?a+i:2-a-i,o*=60):s=c>0&&c<1?0:o,new Tt(o,s,c,t.opacity)}function So(t,e,n,r){return arguments.length===1?Dr(t):new Tt(t,e,n,r??1)}function Tt(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}yn(Tt,So,Er(ve,{brighter(t){return t=t==null?Oe:Math.pow(Oe,t),new Tt(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?pe:Math.pow(pe,t),new Tt(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new bt(Ge(t>=240?t-240:t+120,i,r),Ge(t,i,r),Ge(t<120?t+240:t-120,i,r),this.opacity)},clamp(){return new Tt(Xn(this.h),we(this.s),we(this.l),$e(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=$e(this.opacity);return`${t===1?"hsl(":"hsla("}${Xn(this.h)}, ${we(this.s)*100}%, ${we(this.l)*100}%${t===1?")":`, ${t})`}`}}));function Xn(t){return t=(t||0)%360,t<0?t+360:t}function we(t){return Math.max(0,Math.min(1,t||0))}function Ge(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const vn=t=>()=>t;function To(t,e){return function(n){return t+n*e}}function Co(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function Ao(t){return(t=+t)==1?Or:function(e,n){return n-e?Co(e,n,t):vn(isNaN(e)?n:e)}}function Or(t,e){var n=e-t;return n?To(t,n):vn(isNaN(t)?e:t)}const Ie=function t(e){var n=Ao(e);function r(i,a){var o=n((i=on(i)).r,(a=on(a)).r),s=n(i.g,a.g),c=n(i.b,a.b),l=Or(i.opacity,a.opacity);return function(u){return i.r=o(u),i.g=s(u),i.b=c(u),i.opacity=l(u),i+""}}return r.gamma=t,r}(1);function Eo(t,e){e||(e=[]);var n=t?Math.min(e.length,t.length):0,r=e.slice(),i;return function(a){for(i=0;i<n;++i)r[i]=t[i]*(1-a)+e[i]*a;return r}}function Do(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function Oo(t,e){var n=e?e.length:0,r=t?Math.min(n,t.length):0,i=new Array(r),a=new Array(n),o;for(o=0;o<r;++o)i[o]=xn(t[o],e[o]);for(;o<n;++o)a[o]=e[o];return function(s){for(o=0;o<r;++o)a[o]=i[o](s);return a}}function $o(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}}function St(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function Io(t,e){var n={},r={},i;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(i in e)i in t?n[i]=xn(t[i],e[i]):r[i]=e[i];return function(a){for(i in n)r[i]=n[i](a);return r}}var sn=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Ve=new RegExp(sn.source,"g");function zo(t){return function(){return t}}function Fo(t){return function(e){return t(e)+""}}function $r(t,e){var n=sn.lastIndex=Ve.lastIndex=0,r,i,a,o=-1,s=[],c=[];for(t=t+"",e=e+"";(r=sn.exec(t))&&(i=Ve.exec(e));)(a=i.index)>n&&(a=e.slice(n,a),s[o]?s[o]+=a:s[++o]=a),(r=r[0])===(i=i[0])?s[o]?s[o]+=i:s[++o]=i:(s[++o]=null,c.push({i:o,x:St(r,i)})),n=Ve.lastIndex;return n<e.length&&(a=e.slice(n),s[o]?s[o]+=a:s[++o]=a),s.length<2?c[0]?Fo(c[0].x):zo(e):(e=c.length,function(l){for(var u=0,y;u<e;++u)s[(y=c[u]).i]=y.x(l);return s.join("")})}function xn(t,e){var n=typeof e,r;return e==null||n==="boolean"?vn(e):(n==="number"?St:n==="string"?(r=Bt(e))?(e=r,Ie):$r:e instanceof Bt?Ie:e instanceof Date?$o:Do(e)?Eo:Array.isArray(e)?Oo:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?Io:St)(t,e)}function No(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}var Bn=180/Math.PI,ln={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Ir(t,e,n,r,i,a){var o,s,c;return(o=Math.sqrt(t*t+e*e))&&(t/=o,e/=o),(c=t*n+e*r)&&(n-=t*c,r-=e*c),(s=Math.sqrt(n*n+r*r))&&(n/=s,r/=s,c/=s),t*r<e*n&&(t=-t,e=-e,c=-c,o=-o),{translateX:i,translateY:a,rotate:Math.atan2(e,t)*Bn,skewX:Math.atan(c)*Bn,scaleX:o,scaleY:s}}var _e;function Ro(t){const e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?ln:Ir(e.a,e.b,e.c,e.d,e.e,e.f)}function Lo(t){return t==null||(_e||(_e=document.createElementNS("http://www.w3.org/2000/svg","g")),_e.setAttribute("transform",t),!(t=_e.transform.baseVal.consolidate()))?ln:(t=t.matrix,Ir(t.a,t.b,t.c,t.d,t.e,t.f))}function zr(t,e,n,r){function i(l){return l.length?l.pop()+" ":""}function a(l,u,y,d,m,W){if(l!==y||u!==d){var U=m.push("translate(",null,e,null,n);W.push({i:U-4,x:St(l,y)},{i:U-2,x:St(u,d)})}else(y||d)&&m.push("translate("+y+e+d+n)}function o(l,u,y,d){l!==u?(l-u>180?u+=360:u-l>180&&(l+=360),d.push({i:y.push(i(y)+"rotate(",null,r)-2,x:St(l,u)})):u&&y.push(i(y)+"rotate("+u+r)}function s(l,u,y,d){l!==u?d.push({i:y.push(i(y)+"skewX(",null,r)-2,x:St(l,u)}):u&&y.push(i(y)+"skewX("+u+r)}function c(l,u,y,d,m,W){if(l!==y||u!==d){var U=m.push(i(m)+"scale(",null,",",null,")");W.push({i:U-4,x:St(l,y)},{i:U-2,x:St(u,d)})}else(y!==1||d!==1)&&m.push(i(m)+"scale("+y+","+d+")")}return function(l,u){var y=[],d=[];return l=t(l),u=t(u),a(l.translateX,l.translateY,u.translateX,u.translateY,y,d),o(l.rotate,u.rotate,y,d),s(l.skewX,u.skewX,y,d),c(l.scaleX,l.scaleY,u.scaleX,u.scaleY,y,d),l=u=null,function(m){for(var W=-1,U=d.length,et;++W<U;)y[(et=d[W]).i]=et.x(m);return y.join("")}}}var Uo=zr(Ro,"px, ","px)","deg)"),Ho=zr(Lo,", ",")",")"),Yo=1e-12;function Gn(t){return((t=Math.exp(t))+1/t)/2}function Po(t){return((t=Math.exp(t))-1/t)/2}function Wo(t){return((t=Math.exp(2*t))-1)/(t+1)}const qo=function t(e,n,r){function i(a,o){var s=a[0],c=a[1],l=a[2],u=o[0],y=o[1],d=o[2],m=u-s,W=y-c,U=m*m+W*W,et,A;if(U<Yo)A=Math.log(d/l)/e,et=function(H){return[s+H*m,c+H*W,l*Math.exp(e*H*A)]};else{var tt=Math.sqrt(U),Q=(d*d-l*l+r*U)/(2*l*n*tt),V=(d*d-l*l-r*U)/(2*d*n*tt),lt=Math.log(Math.sqrt(Q*Q+1)-Q),D=Math.log(Math.sqrt(V*V+1)-V);A=(D-lt)/e,et=function(H){var h=H*A,p=Gn(lt),b=l/(n*tt)*(p*Wo(e*h+lt)-Po(lt));return[s+b*m,c+b*W,l*p/Gn(e*h+lt)]}}return et.duration=A*1e3*e/Math.SQRT2,et}return i.rho=function(a){var o=Math.max(.001,+a),s=o*o,c=s*s;return t(o,s,c)},i}(Math.SQRT2,2,4);var re=0,he=0,oe=0,Fr=1e3,ze,de,Fe=0,Gt=0,Ye=0,me=typeof performance=="object"&&performance.now?performance:Date,Nr=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function bn(){return Gt||(Nr(Xo),Gt=me.now()+Ye)}function Xo(){Gt=0}function Ne(){this._call=this._time=this._next=null}Ne.prototype=Rr.prototype={constructor:Ne,restart:function(t,e,n){if(typeof t!="function")throw new TypeError("callback is not a function");n=(n==null?bn():+n)+(e==null?0:+e),!this._next&&de!==this&&(de?de._next=this:ze=this,de=this),this._call=t,this._time=n,cn()},stop:function(){this._call&&(this._call=null,this._time=1/0,cn())}};function Rr(t,e,n){var r=new Ne;return r.restart(t,e,n),r}function Bo(){bn(),++re;for(var t=ze,e;t;)(e=Gt-t._time)>=0&&t._call.call(void 0,e),t=t._next;--re}function Vn(){Gt=(Fe=me.now())+Ye,re=he=0;try{Bo()}finally{re=0,Vo(),Gt=0}}function Go(){var t=me.now(),e=t-Fe;e>Fr&&(Ye-=e,Fe=t)}function Vo(){for(var t,e=ze,n,r=1/0;e;)e._call?(r>e._time&&(r=e._time),t=e,e=e._next):(n=e._next,e._next=null,e=t?t._next=n:ze=n);de=t,cn(r)}function cn(t){if(!re){he&&(he=clearTimeout(he));var e=t-Gt;e>24?(t<1/0&&(he=setTimeout(Vn,t-me.now()-Ye)),oe&&(oe=clearInterval(oe))):(oe||(Fe=me.now(),oe=setInterval(Go,Fr)),re=1,Nr(Vn))}}function jn(t,e,n){var r=new Ne;return e=e==null?0:+e,r.restart(i=>{r.stop(),t(i+e)},e,n),r}var jo=pn("start","end","cancel","interrupt"),Ko=[],Lr=0,Kn=1,un=2,Ce=3,Zn=4,fn=5,Ae=6;function Pe(t,e,n,r,i,a){var o=t.__transition;if(!o)t.__transition={};else if(n in o)return;Zo(t,n,{name:e,index:r,group:i,on:jo,tween:Ko,time:a.time,delay:a.delay,duration:a.duration,ease:a.ease,timer:null,state:Lr})}function wn(t,e){var n=Ct(t,e);if(n.state>Lr)throw new Error("too late; already scheduled");return n}function Ot(t,e){var n=Ct(t,e);if(n.state>Ce)throw new Error("too late; already running");return n}function Ct(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}function Zo(t,e,n){var r=t.__transition,i;r[e]=n,n.timer=Rr(a,0,n.time);function a(l){n.state=Kn,n.timer.restart(o,n.delay,n.time),n.delay<=l&&o(l-n.delay)}function o(l){var u,y,d,m;if(n.state!==Kn)return c();for(u in r)if(m=r[u],m.name===n.name){if(m.state===Ce)return jn(o);m.state===Zn?(m.state=Ae,m.timer.stop(),m.on.call("interrupt",t,t.__data__,m.index,m.group),delete r[u]):+u<e&&(m.state=Ae,m.timer.stop(),m.on.call("cancel",t,t.__data__,m.index,m.group),delete r[u])}if(jn(function(){n.state===Ce&&(n.state=Zn,n.timer.restart(s,n.delay,n.time),s(l))}),n.state=un,n.on.call("start",t,t.__data__,n.index,n.group),n.state===un){for(n.state=Ce,i=new Array(d=n.tween.length),u=0,y=-1;u<d;++u)(m=n.tween[u].value.call(t,t.__data__,n.index,n.group))&&(i[++y]=m);i.length=y+1}}function s(l){for(var u=l<n.duration?n.ease.call(null,l/n.duration):(n.timer.restart(c),n.state=fn,1),y=-1,d=i.length;++y<d;)i[y].call(t,u);n.state===fn&&(n.on.call("end",t,t.__data__,n.index,n.group),c())}function c(){n.state=Ae,n.timer.stop(),delete r[e];for(var l in r)return;delete t.__transition}}function Ee(t,e){var n=t.__transition,r,i,a=!0,o;if(n){e=e==null?null:e+"";for(o in n){if((r=n[o]).name!==e){a=!1;continue}i=r.state>un&&r.state<fn,r.state=Ae,r.timer.stop(),r.on.call(i?"interrupt":"cancel",t,t.__data__,r.index,r.group),delete n[o]}a&&delete t.__transition}}function Qo(t){return this.each(function(){Ee(this,t)})}function Jo(t,e){var n,r;return function(){var i=Ot(this,t),a=i.tween;if(a!==n){r=n=a;for(var o=0,s=r.length;o<s;++o)if(r[o].name===e){r=r.slice(),r.splice(o,1);break}}i.tween=r}}function ts(t,e,n){var r,i;if(typeof n!="function")throw new Error;return function(){var a=Ot(this,t),o=a.tween;if(o!==r){i=(r=o).slice();for(var s={name:e,value:n},c=0,l=i.length;c<l;++c)if(i[c].name===e){i[c]=s;break}c===l&&i.push(s)}a.tween=i}}function es(t,e){var n=this._id;if(t+="",arguments.length<2){for(var r=Ct(this.node(),n).tween,i=0,a=r.length,o;i<a;++i)if((o=r[i]).name===t)return o.value;return null}return this.each((e==null?Jo:ts)(n,t,e))}function _n(t,e,n){var r=t._id;return t.each(function(){var i=Ot(this,r);(i.value||(i.value={}))[e]=n.apply(this,arguments)}),function(i){return Ct(i,r).value[e]}}function Ur(t,e){var n;return(typeof e=="number"?St:e instanceof Bt?Ie:(n=Bt(e))?(e=n,Ie):$r)(t,e)}function ns(t){return function(){this.removeAttribute(t)}}function rs(t){return function(){this.removeAttributeNS(t.space,t.local)}}function is(t,e,n){var r,i=n+"",a;return function(){var o=this.getAttribute(t);return o===i?null:o===r?a:a=e(r=o,n)}}function as(t,e,n){var r,i=n+"",a;return function(){var o=this.getAttributeNS(t.space,t.local);return o===i?null:o===r?a:a=e(r=o,n)}}function os(t,e,n){var r,i,a;return function(){var o,s=n(this),c;return s==null?void this.removeAttribute(t):(o=this.getAttribute(t),c=s+"",o===c?null:o===r&&c===i?a:(i=c,a=e(r=o,s)))}}function ss(t,e,n){var r,i,a;return function(){var o,s=n(this),c;return s==null?void this.removeAttributeNS(t.space,t.local):(o=this.getAttributeNS(t.space,t.local),c=s+"",o===c?null:o===r&&c===i?a:(i=c,a=e(r=o,s)))}}function ls(t,e){var n=He(t),r=n==="transform"?Ho:Ur;return this.attrTween(t,typeof e=="function"?(n.local?ss:os)(n,r,_n(this,"attr."+t,e)):e==null?(n.local?rs:ns)(n):(n.local?as:is)(n,r,e))}function cs(t,e){return function(n){this.setAttribute(t,e.call(this,n))}}function us(t,e){return function(n){this.setAttributeNS(t.space,t.local,e.call(this,n))}}function fs(t,e){var n,r;function i(){var a=e.apply(this,arguments);return a!==r&&(n=(r=a)&&us(t,a)),n}return i._value=e,i}function hs(t,e){var n,r;function i(){var a=e.apply(this,arguments);return a!==r&&(n=(r=a)&&cs(t,a)),n}return i._value=e,i}function ds(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(e==null)return this.tween(n,null);if(typeof e!="function")throw new Error;var r=He(t);return this.tween(n,(r.local?fs:hs)(r,e))}function ps(t,e){return function(){wn(this,t).delay=+e.apply(this,arguments)}}function gs(t,e){return e=+e,function(){wn(this,t).delay=e}}function ms(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?ps:gs)(e,t)):Ct(this.node(),e).delay}function ys(t,e){return function(){Ot(this,t).duration=+e.apply(this,arguments)}}function vs(t,e){return e=+e,function(){Ot(this,t).duration=e}}function xs(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?ys:vs)(e,t)):Ct(this.node(),e).duration}function bs(t,e){if(typeof e!="function")throw new Error;return function(){Ot(this,t).ease=e}}function ws(t){var e=this._id;return arguments.length?this.each(bs(e,t)):Ct(this.node(),e).ease}function _s(t,e){return function(){var n=e.apply(this,arguments);if(typeof n!="function")throw new Error;Ot(this,t).ease=n}}function ks(t){if(typeof t!="function")throw new Error;return this.each(_s(this._id,t))}function Ms(t){typeof t!="function"&&(t=xr(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var a=e[i],o=a.length,s=r[i]=[],c,l=0;l<o;++l)(c=a[l])&&t.call(c,c.__data__,l,a)&&s.push(c);return new Nt(r,this._parents,this._name,this._id)}function Ss(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,r=e.length,i=n.length,a=Math.min(r,i),o=new Array(r),s=0;s<a;++s)for(var c=e[s],l=n[s],u=c.length,y=o[s]=new Array(u),d,m=0;m<u;++m)(d=c[m]||l[m])&&(y[m]=d);for(;s<r;++s)o[s]=e[s];return new Nt(o,this._parents,this._name,this._id)}function Ts(t){return(t+"").trim().split(/^|\s+/).every(function(e){var n=e.indexOf(".");return n>=0&&(e=e.slice(0,n)),!e||e==="start"})}function Cs(t,e,n){var r,i,a=Ts(e)?wn:Ot;return function(){var o=a(this,t),s=o.on;s!==r&&(i=(r=s).copy()).on(e,n),o.on=i}}function As(t,e){var n=this._id;return arguments.length<2?Ct(this.node(),n).on.on(t):this.each(Cs(n,t,e))}function Es(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}}function Ds(){return this.on("end.remove",Es(this._id))}function Os(t){var e=this._name,n=this._id;typeof t!="function"&&(t=gn(t));for(var r=this._groups,i=r.length,a=new Array(i),o=0;o<i;++o)for(var s=r[o],c=s.length,l=a[o]=new Array(c),u,y,d=0;d<c;++d)(u=s[d])&&(y=t.call(u,u.__data__,d,s))&&("__data__"in u&&(y.__data__=u.__data__),l[d]=y,Pe(l[d],e,n,d,l,Ct(u,n)));return new Nt(a,this._parents,e,n)}function $s(t){var e=this._name,n=this._id;typeof t!="function"&&(t=vr(t));for(var r=this._groups,i=r.length,a=[],o=[],s=0;s<i;++s)for(var c=r[s],l=c.length,u,y=0;y<l;++y)if(u=c[y]){for(var d=t.call(u,u.__data__,y,c),m,W=Ct(u,n),U=0,et=d.length;U<et;++U)(m=d[U])&&Pe(m,e,n,U,d,W);a.push(d),o.push(u)}return new Nt(a,o,e,n)}var Is=ye.prototype.constructor;function zs(){return new Is(this._groups,this._parents)}function Fs(t,e){var n,r,i;return function(){var a=ne(this,t),o=(this.style.removeProperty(t),ne(this,t));return a===o?null:a===n&&o===r?i:i=e(n=a,r=o)}}function Hr(t){return function(){this.style.removeProperty(t)}}function Ns(t,e,n){var r,i=n+"",a;return function(){var o=ne(this,t);return o===i?null:o===r?a:a=e(r=o,n)}}function Rs(t,e,n){var r,i,a;return function(){var o=ne(this,t),s=n(this),c=s+"";return s==null&&(c=s=(this.style.removeProperty(t),ne(this,t))),o===c?null:o===r&&c===i?a:(i=c,a=e(r=o,s))}}function Ls(t,e){var n,r,i,a="style."+e,o="end."+a,s;return function(){var c=Ot(this,t),l=c.on,u=c.value[a]==null?s||(s=Hr(e)):void 0;(l!==n||i!==u)&&(r=(n=l).copy()).on(o,i=u),c.on=r}}function Us(t,e,n){var r=(t+="")=="transform"?Uo:Ur;return e==null?this.styleTween(t,Fs(t,r)).on("end.style."+t,Hr(t)):typeof e=="function"?this.styleTween(t,Rs(t,r,_n(this,"style."+t,e))).each(Ls(this._id,t)):this.styleTween(t,Ns(t,r,e),n).on("end.style."+t,null)}function Hs(t,e,n){return function(r){this.style.setProperty(t,e.call(this,r),n)}}function Ys(t,e,n){var r,i;function a(){var o=e.apply(this,arguments);return o!==i&&(r=(i=o)&&Hs(t,o,n)),r}return a._value=e,a}function Ps(t,e,n){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(e==null)return this.tween(r,null);if(typeof e!="function")throw new Error;return this.tween(r,Ys(t,e,n??""))}function Ws(t){return function(){this.textContent=t}}function qs(t){return function(){var e=t(this);this.textContent=e??""}}function Xs(t){return this.tween("text",typeof t=="function"?qs(_n(this,"text",t)):Ws(t==null?"":t+""))}function Bs(t){return function(e){this.textContent=t.call(this,e)}}function Gs(t){var e,n;function r(){var i=t.apply(this,arguments);return i!==n&&(e=(n=i)&&Bs(i)),e}return r._value=t,r}function Vs(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(t==null)return this.tween(e,null);if(typeof t!="function")throw new Error;return this.tween(e,Gs(t))}function js(){for(var t=this._name,e=this._id,n=Yr(),r=this._groups,i=r.length,a=0;a<i;++a)for(var o=r[a],s=o.length,c,l=0;l<s;++l)if(c=o[l]){var u=Ct(c,e);Pe(c,t,n,l,o,{time:u.time+u.delay+u.duration,delay:0,duration:u.duration,ease:u.ease})}return new Nt(r,this._parents,t,n)}function Ks(){var t,e,n=this,r=n._id,i=n.size();return new Promise(function(a,o){var s={value:o},c={value:function(){--i===0&&a()}};n.each(function(){var l=Ot(this,r),u=l.on;u!==t&&(e=(t=u).copy(),e._.cancel.push(s),e._.interrupt.push(s),e._.end.push(c)),l.on=e}),i===0&&a()})}var Zs=0;function Nt(t,e,n,r){this._groups=t,this._parents=e,this._name=n,this._id=r}function Yr(){return++Zs}var $t=ye.prototype;Nt.prototype={constructor:Nt,select:Os,selectAll:$s,selectChild:$t.selectChild,selectChildren:$t.selectChildren,filter:Ms,merge:Ss,selection:zs,transition:js,call:$t.call,nodes:$t.nodes,node:$t.node,size:$t.size,empty:$t.empty,each:$t.each,on:As,attr:ls,attrTween:ds,style:Us,styleTween:Ps,text:Xs,textTween:Vs,remove:Ds,tween:es,delay:ms,duration:xs,ease:ws,easeVarying:ks,end:Ks,[Symbol.iterator]:$t[Symbol.iterator]};function Qs(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var Js={time:null,delay:0,duration:250,ease:Qs};function tl(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return n}function el(t){var e,n;t instanceof Nt?(e=t._id,t=t._name):(e=Yr(),(n=Js).time=bn(),t=t==null?null:t+"");for(var r=this._groups,i=r.length,a=0;a<i;++a)for(var o=r[a],s=o.length,c,l=0;l<s;++l)(c=o[l])&&Pe(c,t,e,l,o,n||tl(c,e));return new Nt(r,this._parents,t,e)}ye.prototype.interrupt=Qo;ye.prototype.transition=el;function kn(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}const Qn=Symbol("implicit");function Pr(){var t=new Dn,e=[],n=[],r=Qn;function i(a){let o=t.get(a);if(o===void 0){if(r!==Qn)return r;t.set(a,o=e.push(a)-1)}return n[o%n.length]}return i.domain=function(a){if(!arguments.length)return e.slice();e=[],t=new Dn;for(const o of a)t.has(o)||t.set(o,e.push(o)-1);return i},i.range=function(a){return arguments.length?(n=Array.from(a),i):n.slice()},i.unknown=function(a){return arguments.length?(r=a,i):r},i.copy=function(){return Pr(e,n).unknown(r)},kn.apply(i,arguments),i}function Wr(){var t=Pr().unknown(void 0),e=t.domain,n=t.range,r=0,i=1,a,o,s=!1,c=0,l=0,u=.5;delete t.unknown;function y(){var d=e().length,m=i<r,W=m?i:r,U=m?r:i;a=(U-W)/Math.max(1,d-c+l*2),s&&(a=Math.floor(a)),W+=(U-W-a*(d-c))*u,o=a*(1-c),s&&(W=Math.round(W),o=Math.round(o));var et=wi(d).map(function(A){return W+a*A});return n(m?et.reverse():et)}return t.domain=function(d){return arguments.length?(e(d),y()):e()},t.range=function(d){return arguments.length?([r,i]=d,r=+r,i=+i,y()):[r,i]},t.rangeRound=function(d){return[r,i]=d,r=+r,i=+i,s=!0,y()},t.bandwidth=function(){return o},t.step=function(){return a},t.round=function(d){return arguments.length?(s=!!d,y()):s},t.padding=function(d){return arguments.length?(c=Math.min(1,l=+d),y()):c},t.paddingInner=function(d){return arguments.length?(c=Math.min(1,d),y()):c},t.paddingOuter=function(d){return arguments.length?(l=+d,y()):l},t.align=function(d){return arguments.length?(u=Math.max(0,Math.min(1,d)),y()):u},t.copy=function(){return Wr(e(),[r,i]).round(s).paddingInner(c).paddingOuter(l).align(u)},kn.apply(y(),arguments)}function qr(t){var e=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return qr(e())},t}function Xr(){return qr(Wr.apply(null,arguments).paddingInner(1))}function nl(t){return function(){return t}}function rl(t){return+t}var Jn=[0,1];function Jt(t){return t}function hn(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:nl(isNaN(e)?NaN:.5)}function il(t,e){var n;return t>e&&(n=t,t=e,e=n),function(r){return Math.max(t,Math.min(e,r))}}function al(t,e,n){var r=t[0],i=t[1],a=e[0],o=e[1];return i<r?(r=hn(i,r),a=n(o,a)):(r=hn(r,i),a=n(a,o)),function(s){return a(r(s))}}function ol(t,e,n){var r=Math.min(t.length,e.length)-1,i=new Array(r),a=new Array(r),o=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++o<r;)i[o]=hn(t[o],t[o+1]),a[o]=n(e[o],e[o+1]);return function(s){var c=pi(t,s,1,r)-1;return a[c](i[c](s))}}function sl(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function ll(){var t=Jn,e=Jn,n=xn,r,i,a,o=Jt,s,c,l;function u(){var d=Math.min(t.length,e.length);return o!==Jt&&(o=il(t[0],t[d-1])),s=d>2?ol:al,c=l=null,y}function y(d){return d==null||isNaN(d=+d)?a:(c||(c=s(t.map(r),e,n)))(r(o(d)))}return y.invert=function(d){return o(i((l||(l=s(e,t.map(r),St)))(d)))},y.domain=function(d){return arguments.length?(t=Array.from(d,rl),u()):t.slice()},y.range=function(d){return arguments.length?(e=Array.from(d),u()):e.slice()},y.rangeRound=function(d){return e=Array.from(d),n=No,u()},y.clamp=function(d){return arguments.length?(o=d?!0:Jt,u()):o!==Jt},y.interpolate=function(d){return arguments.length?(n=d,u()):n},y.unknown=function(d){return arguments.length?(a=d,y):a},function(d,m){return r=d,i=m,u()}}function cl(){return ll()(Jt,Jt)}function ul(t,e){t=t.slice();var n=0,r=t.length-1,i=t[n],a=t[r],o;return a<i&&(o=n,n=r,r=o,o=i,i=a,a=o),t[n]=e.floor(i),t[r]=e.ceil(a),t}const je=new Date,Ke=new Date;function gt(t,e,n,r){function i(a){return t(a=arguments.length===0?new Date:new Date(+a)),a}return i.floor=a=>(t(a=new Date(+a)),a),i.ceil=a=>(t(a=new Date(a-1)),e(a,1),t(a),a),i.round=a=>{const o=i(a),s=i.ceil(a);return a-o<s-a?o:s},i.offset=(a,o)=>(e(a=new Date(+a),o==null?1:Math.floor(o)),a),i.range=(a,o,s)=>{const c=[];if(a=i.ceil(a),s=s==null?1:Math.floor(s),!(a<o)||!(s>0))return c;let l;do c.push(l=new Date(+a)),e(a,s),t(a);while(l<a&&a<o);return c},i.filter=a=>gt(o=>{if(o>=o)for(;t(o),!a(o);)o.setTime(o-1)},(o,s)=>{if(o>=o)if(s<0)for(;++s<=0;)for(;e(o,-1),!a(o););else for(;--s>=0;)for(;e(o,1),!a(o););}),n&&(i.count=(a,o)=>(je.setTime(+a),Ke.setTime(+o),t(je),t(Ke),Math.floor(n(je,Ke))),i.every=a=>(a=Math.floor(a),!isFinite(a)||!(a>0)?null:a>1?i.filter(r?o=>r(o)%a===0:o=>i.count(0,o)%a===0):i)),i}const Re=gt(()=>{},(t,e)=>{t.setTime(+t+e)},(t,e)=>e-t);Re.every=t=>(t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?gt(e=>{e.setTime(Math.floor(e/t)*t)},(e,n)=>{e.setTime(+e+n*t)},(e,n)=>(n-e)/t):Re);Re.range;const It=1e3,Mt=It*60,zt=Mt*60,Rt=zt*24,Mn=Rt*7,tr=Rt*30,Ze=Rt*365,te=gt(t=>{t.setTime(t-t.getMilliseconds())},(t,e)=>{t.setTime(+t+e*It)},(t,e)=>(e-t)/It,t=>t.getUTCSeconds());te.range;const Sn=gt(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*It)},(t,e)=>{t.setTime(+t+e*Mt)},(t,e)=>(e-t)/Mt,t=>t.getMinutes());Sn.range;const fl=gt(t=>{t.setUTCSeconds(0,0)},(t,e)=>{t.setTime(+t+e*Mt)},(t,e)=>(e-t)/Mt,t=>t.getUTCMinutes());fl.range;const Tn=gt(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*It-t.getMinutes()*Mt)},(t,e)=>{t.setTime(+t+e*zt)},(t,e)=>(e-t)/zt,t=>t.getHours());Tn.range;const hl=gt(t=>{t.setUTCMinutes(0,0,0)},(t,e)=>{t.setTime(+t+e*zt)},(t,e)=>(e-t)/zt,t=>t.getUTCHours());hl.range;const xe=gt(t=>t.setHours(0,0,0,0),(t,e)=>t.setDate(t.getDate()+e),(t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*Mt)/Rt,t=>t.getDate()-1);xe.range;const Cn=gt(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/Rt,t=>t.getUTCDate()-1);Cn.range;const dl=gt(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/Rt,t=>Math.floor(t/Rt));dl.range;function jt(t){return gt(e=>{e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},(e,n)=>{e.setDate(e.getDate()+n*7)},(e,n)=>(n-e-(n.getTimezoneOffset()-e.getTimezoneOffset())*Mt)/Mn)}const We=jt(0),Le=jt(1),pl=jt(2),gl=jt(3),ie=jt(4),ml=jt(5),yl=jt(6);We.range;Le.range;pl.range;gl.range;ie.range;ml.range;yl.range;function Kt(t){return gt(e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCDate(e.getUTCDate()+n*7)},(e,n)=>(n-e)/Mn)}const Br=Kt(0),Ue=Kt(1),vl=Kt(2),xl=Kt(3),ae=Kt(4),bl=Kt(5),wl=Kt(6);Br.range;Ue.range;vl.range;xl.range;ae.range;bl.range;wl.range;const An=gt(t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,e)=>{t.setMonth(t.getMonth()+e)},(t,e)=>e.getMonth()-t.getMonth()+(e.getFullYear()-t.getFullYear())*12,t=>t.getMonth());An.range;const _l=gt(t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCMonth(t.getUTCMonth()+e)},(t,e)=>e.getUTCMonth()-t.getUTCMonth()+(e.getUTCFullYear()-t.getUTCFullYear())*12,t=>t.getUTCMonth());_l.range;const Dt=gt(t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,e)=>{t.setFullYear(t.getFullYear()+e)},(t,e)=>e.getFullYear()-t.getFullYear(),t=>t.getFullYear());Dt.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:gt(e=>{e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},(e,n)=>{e.setFullYear(e.getFullYear()+n*t)});Dt.range;const Vt=gt(t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCFullYear(t.getUTCFullYear()+e)},(t,e)=>e.getUTCFullYear()-t.getUTCFullYear(),t=>t.getUTCFullYear());Vt.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:gt(e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCFullYear(e.getUTCFullYear()+n*t)});Vt.range;function kl(t,e,n,r,i,a){const o=[[te,1,It],[te,5,5*It],[te,15,15*It],[te,30,30*It],[a,1,Mt],[a,5,5*Mt],[a,15,15*Mt],[a,30,30*Mt],[i,1,zt],[i,3,3*zt],[i,6,6*zt],[i,12,12*zt],[r,1,Rt],[r,2,2*Rt],[n,1,Mn],[e,1,tr],[e,3,3*tr],[t,1,Ze]];function s(l,u,y){const d=u<l;d&&([l,u]=[u,l]);const m=y&&typeof y.range=="function"?y:c(l,u,y),W=m?m.range(l,+u+1):[];return d?W.reverse():W}function c(l,u,y){const d=Math.abs(u-l)/y,m=dn(([,,et])=>et).right(o,d);if(m===o.length)return t.every(In(l/Ze,u/Ze,y));if(m===0)return Re.every(Math.max(In(l,u,y),1));const[W,U]=o[d/o[m-1][2]<o[m][2]/d?m-1:m];return W.every(U)}return[s,c]}const[Ml,Sl]=kl(Dt,An,We,xe,Tn,Sn);function Qe(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function Je(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function se(t,e,n){return{y:t,m:e,d:n,H:0,M:0,S:0,L:0}}function Tl(t){var e=t.dateTime,n=t.date,r=t.time,i=t.periods,a=t.days,o=t.shortDays,s=t.months,c=t.shortMonths,l=le(i),u=ce(i),y=le(a),d=ce(a),m=le(o),W=ce(o),U=le(s),et=ce(s),A=le(c),tt=ce(c),Q={a:S,A:F,b:C,B:q,c:null,d:or,e:or,f:jl,g:ac,G:sc,H:Bl,I:Gl,j:Vl,L:Gr,m:Kl,M:Zl,p:I,q:L,Q:cr,s:ur,S:Ql,u:Jl,U:tc,V:ec,w:nc,W:rc,x:null,X:null,y:ic,Y:oc,Z:lc,"%":lr},V={a:R,A:j,b:nt,B:it,c:null,d:sr,e:sr,f:hc,g:_c,G:Mc,H:cc,I:uc,j:fc,L:jr,m:dc,M:pc,p:at,q:G,Q:cr,s:ur,S:gc,u:mc,U:yc,V:vc,w:xc,W:bc,x:null,X:null,y:wc,Y:kc,Z:Sc,"%":lr},lt={a:b,A:E,b:$,B:X,c:v,d:ir,e:ir,f:Pl,g:rr,G:nr,H:ar,I:ar,j:Ll,L:Yl,m:Rl,M:Ul,p,q:Nl,Q:ql,s:Xl,S:Hl,u:Ol,U:$l,V:Il,w:Dl,W:zl,x:z,X:_,y:rr,Y:nr,Z:Fl,"%":Wl};Q.x=D(n,Q),Q.X=D(r,Q),Q.c=D(e,Q),V.x=D(n,V),V.X=D(r,V),V.c=D(e,V);function D(M,Y){return function(O){var w=[],rt=-1,P=0,J=M.length,B,pt,K;for(O instanceof Date||(O=new Date(+O));++rt<J;)M.charCodeAt(rt)===37&&(w.push(M.slice(P,rt)),(pt=er[B=M.charAt(++rt)])!=null?B=M.charAt(++rt):pt=B==="e"?" ":"0",(K=Y[B])&&(B=K(O,pt)),w.push(B),P=rt+1);return w.push(M.slice(P,rt)),w.join("")}}function H(M,Y){return function(O){var w=se(1900,void 0,1),rt=h(w,M,O+="",0),P,J;if(rt!=O.length)return null;if("Q"in w)return new Date(w.Q);if("s"in w)return new Date(w.s*1e3+("L"in w?w.L:0));if(Y&&!("Z"in w)&&(w.Z=0),"p"in w&&(w.H=w.H%12+w.p*12),w.m===void 0&&(w.m="q"in w?w.q:0),"V"in w){if(w.V<1||w.V>53)return null;"w"in w||(w.w=1),"Z"in w?(P=Je(se(w.y,0,1)),J=P.getUTCDay(),P=J>4||J===0?Ue.ceil(P):Ue(P),P=Cn.offset(P,(w.V-1)*7),w.y=P.getUTCFullYear(),w.m=P.getUTCMonth(),w.d=P.getUTCDate()+(w.w+6)%7):(P=Qe(se(w.y,0,1)),J=P.getDay(),P=J>4||J===0?Le.ceil(P):Le(P),P=xe.offset(P,(w.V-1)*7),w.y=P.getFullYear(),w.m=P.getMonth(),w.d=P.getDate()+(w.w+6)%7)}else("W"in w||"U"in w)&&("w"in w||(w.w="u"in w?w.u%7:"W"in w?1:0),J="Z"in w?Je(se(w.y,0,1)).getUTCDay():Qe(se(w.y,0,1)).getDay(),w.m=0,w.d="W"in w?(w.w+6)%7+w.W*7-(J+5)%7:w.w+w.U*7-(J+6)%7);return"Z"in w?(w.H+=w.Z/100|0,w.M+=w.Z%100,Je(w)):Qe(w)}}function h(M,Y,O,w){for(var rt=0,P=Y.length,J=O.length,B,pt;rt<P;){if(w>=J)return-1;if(B=Y.charCodeAt(rt++),B===37){if(B=Y.charAt(rt++),pt=lt[B in er?Y.charAt(rt++):B],!pt||(w=pt(M,O,w))<0)return-1}else if(B!=O.charCodeAt(w++))return-1}return w}function p(M,Y,O){var w=l.exec(Y.slice(O));return w?(M.p=u.get(w[0].toLowerCase()),O+w[0].length):-1}function b(M,Y,O){var w=m.exec(Y.slice(O));return w?(M.w=W.get(w[0].toLowerCase()),O+w[0].length):-1}function E(M,Y,O){var w=y.exec(Y.slice(O));return w?(M.w=d.get(w[0].toLowerCase()),O+w[0].length):-1}function $(M,Y,O){var w=A.exec(Y.slice(O));return w?(M.m=tt.get(w[0].toLowerCase()),O+w[0].length):-1}function X(M,Y,O){var w=U.exec(Y.slice(O));return w?(M.m=et.get(w[0].toLowerCase()),O+w[0].length):-1}function v(M,Y,O){return h(M,e,Y,O)}function z(M,Y,O){return h(M,n,Y,O)}function _(M,Y,O){return h(M,r,Y,O)}function S(M){return o[M.getDay()]}function F(M){return a[M.getDay()]}function C(M){return c[M.getMonth()]}function q(M){return s[M.getMonth()]}function I(M){return i[+(M.getHours()>=12)]}function L(M){return 1+~~(M.getMonth()/3)}function R(M){return o[M.getUTCDay()]}function j(M){return a[M.getUTCDay()]}function nt(M){return c[M.getUTCMonth()]}function it(M){return s[M.getUTCMonth()]}function at(M){return i[+(M.getUTCHours()>=12)]}function G(M){return 1+~~(M.getUTCMonth()/3)}return{format:function(M){var Y=D(M+="",Q);return Y.toString=function(){return M},Y},parse:function(M){var Y=H(M+="",!1);return Y.toString=function(){return M},Y},utcFormat:function(M){var Y=D(M+="",V);return Y.toString=function(){return M},Y},utcParse:function(M){var Y=H(M+="",!0);return Y.toString=function(){return M},Y}}}var er={"-":"",_:" ",0:"0"},mt=/^\s*\d+/,Cl=/^%/,Al=/[\\^$*+?|[\]().{}]/g;function st(t,e,n){var r=t<0?"-":"",i=(r?-t:t)+"",a=i.length;return r+(a<n?new Array(n-a+1).join(e)+i:i)}function El(t){return t.replace(Al,"\\$&")}function le(t){return new RegExp("^(?:"+t.map(El).join("|")+")","i")}function ce(t){return new Map(t.map((e,n)=>[e.toLowerCase(),n]))}function Dl(t,e,n){var r=mt.exec(e.slice(n,n+1));return r?(t.w=+r[0],n+r[0].length):-1}function Ol(t,e,n){var r=mt.exec(e.slice(n,n+1));return r?(t.u=+r[0],n+r[0].length):-1}function $l(t,e,n){var r=mt.exec(e.slice(n,n+2));return r?(t.U=+r[0],n+r[0].length):-1}function Il(t,e,n){var r=mt.exec(e.slice(n,n+2));return r?(t.V=+r[0],n+r[0].length):-1}function zl(t,e,n){var r=mt.exec(e.slice(n,n+2));return r?(t.W=+r[0],n+r[0].length):-1}function nr(t,e,n){var r=mt.exec(e.slice(n,n+4));return r?(t.y=+r[0],n+r[0].length):-1}function rr(t,e,n){var r=mt.exec(e.slice(n,n+2));return r?(t.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function Fl(t,e,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return r?(t.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function Nl(t,e,n){var r=mt.exec(e.slice(n,n+1));return r?(t.q=r[0]*3-3,n+r[0].length):-1}function Rl(t,e,n){var r=mt.exec(e.slice(n,n+2));return r?(t.m=r[0]-1,n+r[0].length):-1}function ir(t,e,n){var r=mt.exec(e.slice(n,n+2));return r?(t.d=+r[0],n+r[0].length):-1}function Ll(t,e,n){var r=mt.exec(e.slice(n,n+3));return r?(t.m=0,t.d=+r[0],n+r[0].length):-1}function ar(t,e,n){var r=mt.exec(e.slice(n,n+2));return r?(t.H=+r[0],n+r[0].length):-1}function Ul(t,e,n){var r=mt.exec(e.slice(n,n+2));return r?(t.M=+r[0],n+r[0].length):-1}function Hl(t,e,n){var r=mt.exec(e.slice(n,n+2));return r?(t.S=+r[0],n+r[0].length):-1}function Yl(t,e,n){var r=mt.exec(e.slice(n,n+3));return r?(t.L=+r[0],n+r[0].length):-1}function Pl(t,e,n){var r=mt.exec(e.slice(n,n+6));return r?(t.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function Wl(t,e,n){var r=Cl.exec(e.slice(n,n+1));return r?n+r[0].length:-1}function ql(t,e,n){var r=mt.exec(e.slice(n));return r?(t.Q=+r[0],n+r[0].length):-1}function Xl(t,e,n){var r=mt.exec(e.slice(n));return r?(t.s=+r[0],n+r[0].length):-1}function or(t,e){return st(t.getDate(),e,2)}function Bl(t,e){return st(t.getHours(),e,2)}function Gl(t,e){return st(t.getHours()%12||12,e,2)}function Vl(t,e){return st(1+xe.count(Dt(t),t),e,3)}function Gr(t,e){return st(t.getMilliseconds(),e,3)}function jl(t,e){return Gr(t,e)+"000"}function Kl(t,e){return st(t.getMonth()+1,e,2)}function Zl(t,e){return st(t.getMinutes(),e,2)}function Ql(t,e){return st(t.getSeconds(),e,2)}function Jl(t){var e=t.getDay();return e===0?7:e}function tc(t,e){return st(We.count(Dt(t)-1,t),e,2)}function Vr(t){var e=t.getDay();return e>=4||e===0?ie(t):ie.ceil(t)}function ec(t,e){return t=Vr(t),st(ie.count(Dt(t),t)+(Dt(t).getDay()===4),e,2)}function nc(t){return t.getDay()}function rc(t,e){return st(Le.count(Dt(t)-1,t),e,2)}function ic(t,e){return st(t.getFullYear()%100,e,2)}function ac(t,e){return t=Vr(t),st(t.getFullYear()%100,e,2)}function oc(t,e){return st(t.getFullYear()%1e4,e,4)}function sc(t,e){var n=t.getDay();return t=n>=4||n===0?ie(t):ie.ceil(t),st(t.getFullYear()%1e4,e,4)}function lc(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+st(e/60|0,"0",2)+st(e%60,"0",2)}function sr(t,e){return st(t.getUTCDate(),e,2)}function cc(t,e){return st(t.getUTCHours(),e,2)}function uc(t,e){return st(t.getUTCHours()%12||12,e,2)}function fc(t,e){return st(1+Cn.count(Vt(t),t),e,3)}function jr(t,e){return st(t.getUTCMilliseconds(),e,3)}function hc(t,e){return jr(t,e)+"000"}function dc(t,e){return st(t.getUTCMonth()+1,e,2)}function pc(t,e){return st(t.getUTCMinutes(),e,2)}function gc(t,e){return st(t.getUTCSeconds(),e,2)}function mc(t){var e=t.getUTCDay();return e===0?7:e}function yc(t,e){return st(Br.count(Vt(t)-1,t),e,2)}function Kr(t){var e=t.getUTCDay();return e>=4||e===0?ae(t):ae.ceil(t)}function vc(t,e){return t=Kr(t),st(ae.count(Vt(t),t)+(Vt(t).getUTCDay()===4),e,2)}function xc(t){return t.getUTCDay()}function bc(t,e){return st(Ue.count(Vt(t)-1,t),e,2)}function wc(t,e){return st(t.getUTCFullYear()%100,e,2)}function _c(t,e){return t=Kr(t),st(t.getUTCFullYear()%100,e,2)}function kc(t,e){return st(t.getUTCFullYear()%1e4,e,4)}function Mc(t,e){var n=t.getUTCDay();return t=n>=4||n===0?ae(t):ae.ceil(t),st(t.getUTCFullYear()%1e4,e,4)}function Sc(){return"+0000"}function lr(){return"%"}function cr(t){return+t}function ur(t){return Math.floor(+t/1e3)}var Qt,Xt;Tc({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function Tc(t){return Qt=Tl(t),Xt=Qt.format,Qt.parse,Qt.utcFormat,Qt.utcParse,Qt}function Cc(t){return new Date(t)}function Ac(t){return t instanceof Date?+t:+new Date(+t)}function Zr(t,e,n,r,i,a,o,s,c,l){var u=cl(),y=u.invert,d=u.domain,m=l(".%L"),W=l(":%S"),U=l("%I:%M"),et=l("%I %p"),A=l("%a %d"),tt=l("%b %d"),Q=l("%B"),V=l("%Y");function lt(D){return(c(D)<D?m:s(D)<D?W:o(D)<D?U:a(D)<D?et:r(D)<D?i(D)<D?A:tt:n(D)<D?Q:V)(D)}return u.invert=function(D){return new Date(y(D))},u.domain=function(D){return arguments.length?d(Array.from(D,Ac)):d().map(Cc)},u.ticks=function(D){var H=d();return t(H[0],H[H.length-1],D??10)},u.tickFormat=function(D,H){return H==null?lt:l(H)},u.nice=function(D){var H=d();return(!D||typeof D.range!="function")&&(D=e(H[0],H[H.length-1],D??10)),D?d(ul(H,D)):u},u.copy=function(){return sl(u,Zr(t,e,n,r,i,a,o,s,c,l))},u}function Qr(){return kn.apply(Zr(Ml,Sl,Dt,An,We,xe,Tn,Sn,te,Xt).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}const ke=t=>()=>t;function Ec(t,{sourceEvent:e,target:n,transform:r,dispatch:i}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:i}})}function Ft(t,e,n){this.k=t,this.x=e,this.y=n}Ft.prototype={constructor:Ft,scale:function(t){return t===1?this:new Ft(this.k*t,this.x,this.y)},translate:function(t,e){return t===0&e===0?this:new Ft(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var yt=new Ft(1,0,0);Ft.prototype;function tn(t){t.stopImmediatePropagation()}function ue(t){t.preventDefault(),t.stopImmediatePropagation()}function Dc(t){return(!t.ctrlKey||t.type==="wheel")&&!t.button}function Oc(){var t=this;return t instanceof SVGElement?(t=t.ownerSVGElement||t,t.hasAttribute("viewBox")?(t=t.viewBox.baseVal,[[t.x,t.y],[t.x+t.width,t.y+t.height]]):[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]):[[0,0],[t.clientWidth,t.clientHeight]]}function fr(){return this.__zoom||yt}function $c(t){return-t.deltaY*(t.deltaMode===1?.05:t.deltaMode?1:.002)*(t.ctrlKey?10:1)}function Ic(){return navigator.maxTouchPoints||"ontouchstart"in this}function zc(t,e,n){var r=t.invertX(e[0][0])-n[0][0],i=t.invertX(e[1][0])-n[1][0],a=t.invertY(e[0][1])-n[0][1],o=t.invertY(e[1][1])-n[1][1];return t.translate(i>r?(r+i)/2:Math.min(0,r)||Math.max(0,i),o>a?(a+o)/2:Math.min(0,a)||Math.max(0,o))}function Jr(){var t=Dc,e=Oc,n=zc,r=$c,i=Ic,a=[0,1/0],o=[[-1/0,-1/0],[1/0,1/0]],s=250,c=qo,l=pn("start","zoom","end"),u,y,d,m=500,W=150,U=0,et=10;function A(v){v.property("__zoom",fr).on("wheel.zoom",h,{passive:!1}).on("mousedown.zoom",p).on("dblclick.zoom",b).filter(i).on("touchstart.zoom",E).on("touchmove.zoom",$).on("touchend.zoom touchcancel.zoom",X).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}A.transform=function(v,z,_,S){var F=v.selection?v.selection():v;F.property("__zoom",fr),v!==F?lt(v,z,_,S):F.interrupt().each(function(){D(this,arguments).event(S).start().zoom(null,typeof z=="function"?z.apply(this,arguments):z).end()})},A.scaleBy=function(v,z,_,S){A.scaleTo(v,function(){var F=this.__zoom.k,C=typeof z=="function"?z.apply(this,arguments):z;return F*C},_,S)},A.scaleTo=function(v,z,_,S){A.transform(v,function(){var F=e.apply(this,arguments),C=this.__zoom,q=_==null?V(F):typeof _=="function"?_.apply(this,arguments):_,I=C.invert(q),L=typeof z=="function"?z.apply(this,arguments):z;return n(Q(tt(C,L),q,I),F,o)},_,S)},A.translateBy=function(v,z,_,S){A.transform(v,function(){return n(this.__zoom.translate(typeof z=="function"?z.apply(this,arguments):z,typeof _=="function"?_.apply(this,arguments):_),e.apply(this,arguments),o)},null,S)},A.translateTo=function(v,z,_,S,F){A.transform(v,function(){var C=e.apply(this,arguments),q=this.__zoom,I=S==null?V(C):typeof S=="function"?S.apply(this,arguments):S;return n(yt.translate(I[0],I[1]).scale(q.k).translate(typeof z=="function"?-z.apply(this,arguments):-z,typeof _=="function"?-_.apply(this,arguments):-_),C,o)},S,F)};function tt(v,z){return z=Math.max(a[0],Math.min(a[1],z)),z===v.k?v:new Ft(z,v.x,v.y)}function Q(v,z,_){var S=z[0]-_[0]*v.k,F=z[1]-_[1]*v.k;return S===v.x&&F===v.y?v:new Ft(v.k,S,F)}function V(v){return[(+v[0][0]+ +v[1][0])/2,(+v[0][1]+ +v[1][1])/2]}function lt(v,z,_,S){v.on("start.zoom",function(){D(this,arguments).event(S).start()}).on("interrupt.zoom end.zoom",function(){D(this,arguments).event(S).end()}).tween("zoom",function(){var F=this,C=arguments,q=D(F,C).event(S),I=e.apply(F,C),L=_==null?V(I):typeof _=="function"?_.apply(F,C):_,R=Math.max(I[1][0]-I[0][0],I[1][1]-I[0][1]),j=F.__zoom,nt=typeof z=="function"?z.apply(F,C):z,it=c(j.invert(L).concat(R/j.k),nt.invert(L).concat(R/nt.k));return function(at){if(at===1)at=nt;else{var G=it(at),M=R/G[2];at=new Ft(M,L[0]-G[0]*M,L[1]-G[1]*M)}q.zoom(null,at)}})}function D(v,z,_){return!_&&v.__zooming||new H(v,z)}function H(v,z){this.that=v,this.args=z,this.active=0,this.sourceEvent=null,this.extent=e.apply(v,z),this.taps=0}H.prototype={event:function(v){return v&&(this.sourceEvent=v),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(v,z){return this.mouse&&v!=="mouse"&&(this.mouse[1]=z.invert(this.mouse[0])),this.touch0&&v!=="touch"&&(this.touch0[1]=z.invert(this.touch0[0])),this.touch1&&v!=="touch"&&(this.touch1[1]=z.invert(this.touch1[0])),this.that.__zoom=z,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(v){var z=ut(this.that).datum();l.call(v,this.that,new Ec(v,{sourceEvent:this.sourceEvent,target:A,transform:this.that.__zoom,dispatch:l}),z)}};function h(v,...z){if(!t.apply(this,arguments))return;var _=D(this,z).event(v),S=this.__zoom,F=Math.max(a[0],Math.min(a[1],S.k*Math.pow(2,r.apply(this,arguments)))),C=Yt(v);if(_.wheel)(_.mouse[0][0]!==C[0]||_.mouse[0][1]!==C[1])&&(_.mouse[1]=S.invert(_.mouse[0]=C)),clearTimeout(_.wheel);else{if(S.k===F)return;_.mouse=[C,S.invert(C)],Ee(this),_.start()}ue(v),_.wheel=setTimeout(q,W),_.zoom("mouse",n(Q(tt(S,F),_.mouse[0],_.mouse[1]),_.extent,o));function q(){_.wheel=null,_.end()}}function p(v,...z){if(d||!t.apply(this,arguments))return;var _=v.currentTarget,S=D(this,z,!0).event(v),F=ut(v.view).on("mousemove.zoom",L,!0).on("mouseup.zoom",R,!0),C=Yt(v,_),q=v.clientX,I=v.clientY;fo(v.view),tn(v),S.mouse=[C,this.__zoom.invert(C)],Ee(this),S.start();function L(j){if(ue(j),!S.moved){var nt=j.clientX-q,it=j.clientY-I;S.moved=nt*nt+it*it>U}S.event(j).zoom("mouse",n(Q(S.that.__zoom,S.mouse[0]=Yt(j,_),S.mouse[1]),S.extent,o))}function R(j){F.on("mousemove.zoom mouseup.zoom",null),ho(j.view,S.moved),ue(j),S.event(j).end()}}function b(v,...z){if(t.apply(this,arguments)){var _=this.__zoom,S=Yt(v.changedTouches?v.changedTouches[0]:v,this),F=_.invert(S),C=_.k*(v.shiftKey?.5:2),q=n(Q(tt(_,C),S,F),e.apply(this,z),o);ue(v),s>0?ut(this).transition().duration(s).call(lt,q,S,v):ut(this).call(A.transform,q,S,v)}}function E(v,...z){if(t.apply(this,arguments)){var _=v.touches,S=_.length,F=D(this,z,v.changedTouches.length===S).event(v),C,q,I,L;for(tn(v),q=0;q<S;++q)I=_[q],L=Yt(I,this),L=[L,this.__zoom.invert(L),I.identifier],F.touch0?!F.touch1&&F.touch0[2]!==L[2]&&(F.touch1=L,F.taps=0):(F.touch0=L,C=!0,F.taps=1+!!u);u&&(u=clearTimeout(u)),C&&(F.taps<2&&(y=L[0],u=setTimeout(function(){u=null},m)),Ee(this),F.start())}}function $(v,...z){if(this.__zooming){var _=D(this,z).event(v),S=v.changedTouches,F=S.length,C,q,I,L;for(ue(v),C=0;C<F;++C)q=S[C],I=Yt(q,this),_.touch0&&_.touch0[2]===q.identifier?_.touch0[0]=I:_.touch1&&_.touch1[2]===q.identifier&&(_.touch1[0]=I);if(q=_.that.__zoom,_.touch1){var R=_.touch0[0],j=_.touch0[1],nt=_.touch1[0],it=_.touch1[1],at=(at=nt[0]-R[0])*at+(at=nt[1]-R[1])*at,G=(G=it[0]-j[0])*G+(G=it[1]-j[1])*G;q=tt(q,Math.sqrt(at/G)),I=[(R[0]+nt[0])/2,(R[1]+nt[1])/2],L=[(j[0]+it[0])/2,(j[1]+it[1])/2]}else if(_.touch0)I=_.touch0[0],L=_.touch0[1];else return;_.zoom("touch",n(Q(q,I,L),_.extent,o))}}function X(v,...z){if(this.__zooming){var _=D(this,z).event(v),S=v.changedTouches,F=S.length,C,q;for(tn(v),d&&clearTimeout(d),d=setTimeout(function(){d=null},m),C=0;C<F;++C)q=S[C],_.touch0&&_.touch0[2]===q.identifier?delete _.touch0:_.touch1&&_.touch1[2]===q.identifier&&delete _.touch1;if(_.touch1&&!_.touch0&&(_.touch0=_.touch1,delete _.touch1),_.touch0)_.touch0[1]=this.__zoom.invert(_.touch0[0]);else if(_.end(),_.taps===2&&(q=Yt(q,this),Math.hypot(y[0]-q[0],y[1]-q[1])<et)){var I=ut(this).on("dblclick.zoom");I&&I.apply(this,arguments)}}}return A.wheelDelta=function(v){return arguments.length?(r=typeof v=="function"?v:ke(+v),A):r},A.filter=function(v){return arguments.length?(t=typeof v=="function"?v:ke(!!v),A):t},A.touchable=function(v){return arguments.length?(i=typeof v=="function"?v:ke(!!v),A):i},A.extent=function(v){return arguments.length?(e=typeof v=="function"?v:ke([[+v[0][0],+v[0][1]],[+v[1][0],+v[1][1]]]),A):e},A.scaleExtent=function(v){return arguments.length?(a[0]=+v[0],a[1]=+v[1],A):[a[0],a[1]]},A.translateExtent=function(v){return arguments.length?(o[0][0]=+v[0][0],o[1][0]=+v[1][0],o[0][1]=+v[0][1],o[1][1]=+v[1][1],A):[[o[0][0],o[0][1]],[o[1][0],o[1][1]]]},A.constrain=function(v){return arguments.length?(n=v,A):n},A.duration=function(v){return arguments.length?(s=+v,A):s},A.interpolate=function(v){return arguments.length?(c=v,A):c},A.on=function(){var v=l.on.apply(l,arguments);return v===l?A:v},A.clickDistance=function(v){return arguments.length?(U=(v=+v)*v,A):Math.sqrt(U)},A.tapDistance=function(v){return arguments.length?(et=+v,A):et},A}class Fc{static render(e,n,r){const i={axisStrategy:r.axisStrategy??"time",minLabelGap:r.minLabelGap??40,labelYOffset:r.labelYOffset??-16,cardWidth:r.cardWidth??140,cardHeight:r.cardHeight??200,enforceUniformCardSize:r.enforceUniformCardSize??!0,hideOverlappingLabels:r.hideOverlappingLabels??!0,labelCardGap:r.labelCardGap??8,mediaObjectFit:r.mediaObjectFit??"cover",showTooltip:r.showTooltip??!0,...r},a=r.timeTickEveryYears,o=r.pointTickStride;n.innerHTML="";const s={top:10,right:80,bottom:50,left:80},c=n.clientWidth-s.left-s.right,l=n.clientHeight-s.top-s.bottom,u=r.zoom?.minScale??1,y=r.zoom?.maxScale??80,d=ut(n),m=d.append("svg").attr("width",c+s.left+s.right).attr("height",l+s.top+s.bottom).style("background","var(--tl-background-color, #fff)");d.style("position","relative");function W(T,f=600){m.transition().duration(f).call(ct.transform,T)}const U=c+s.left+s.right,et=l+s.top+s.bottom,A=m.append("g").attr("class","tl-canvas-bg"),tt=r.canvasBackground;if(!tt)m.style("background","var(--tl-background-color, #fff)");else if(tt.kind==="color")m.style("background",tt.value??"var(--tl-background-color, #fff)");else if(tt.kind==="image"){const T=tt.fit??"cover";A.append("foreignObject").attr("x",0).attr("y",0).attr("width",U).attr("height",et).append("xhtml:div").style("width",`${U}px`).style("height",`${et}px`).style("opacity",String(tt.opacity??1)).style("backgroundImage",`url("${tt.src}")`).style("backgroundRepeat","no-repeat").style("backgroundPosition","center").style("backgroundSize",T==="contain"?"contain":"cover")}else if(tt.kind==="video"){const T=tt.fit??"cover",g=A.append("foreignObject").attr("x",0).attr("y",0).attr("width",U).attr("height",et).append("xhtml:div").style("width",`${U}px`).style("height",`${et}px`).style("overflow","hidden").style("opacity",String(tt.opacity??1)).append("xhtml:video");g.style("width","100%").style("height","100%").style("objectFit",T==="contain"?"contain":"cover").style("objectPosition","center").attr("src",tt.src).attr("playsinline","true").attr("muted",tt.muted??!0?"":null).attr("loop",tt.loop??!0?"":null).attr("autoplay",tt.autoplay??!0?"":null).attr("controls",tt.controls??!1?"":null),tt.poster&&g.attr("poster",tt.poster);try{g.node()?.play?.().catch(()=>{})}catch{}}const Q=m.append("g").attr("transform",`translate(${s.left},${s.top})`),V=[...e.items].sort((T,f)=>+T.start-+f.start),lt=V.map(T=>T.start),D=r.baselineY??l/2,[H,h]=pr(lt),p=Qr().domain([H,h]).range([0,c]),b=V.map((T,f)=>f.toString()),E=Xr().domain(b).range([0,c]).padding(.5),$=T=>T.rescaleX(p),X=(T,f,g)=>{if(i.axisStrategy==="point"){const x=E(f.toString())??0;return g.applyX(x)}else return $(g)(T.start)};Q.append("line").attr("x1",0).attr("x2",c).attr("y1",D).attr("y2",D).attr("stroke","var(--tl-axis-color, var(--tl-primary-color, #4285f4))").attr("stroke-width",2);const v=Q.append("g").attr("transform",`translate(0,${l+5})`),z=()=>{v.attr("fill",null),v.select(".domain").attr("stroke","var(--tl-axis-color, var(--tl-primary-color, #4285f4))").attr("fill","none"),v.selectAll(".tick line").attr("stroke","var(--tl-axis-color, var(--tl-primary-color, #4285f4))"),v.selectAll(".tick text").attr("fill","var(--tl-tick-color, var(--tl-primary-color, #4285f4))").attr("font-family","var(--tl-font, system-ui)").attr("font-size","10px")},_=Q.append("g"),S=_.append("g"),F=_.append("g").attr("class","tl-date-ticks"),C=_.append("g"),q=S.selectAll("circle").data(V).enter().append("circle").attr("cy",D).attr("r",6).attr("fill","var(--tl-accent-color, var(--tl-primary-color, #4285f4))").style("cursor",T=>i.onItemClick?"pointer":"default").on("click",(T,f)=>i.onItemClick?.(f,T)).on("mouseover",(T,f)=>i.onItemHover?.(f,T)),I=C.selectAll("g.tl-label").data(V).enter().append("g").attr("class","tl-label").style("cursor",T=>i.onItemClick?"pointer":"default").on("click",(T,f)=>i.onItemClick?.(f,T)).on("mouseover",(T,f)=>i.onItemHover?.(f,T));I.each(function(T){const f=T.label,g=ut(this);g.selectAll("*").remove();const x=i.enforceUniformCardSize?i.cardWidth:f?.width??i.cardWidth,k=i.enforceUniformCardSize?i.cardHeight:f?.height??i.cardHeight,N=D+i.labelYOffset,Z=g.append("g").attr("class","tl-card").attr("transform",`translate(${-x/2}, ${N-k})`).attr("data-card-width",String(x));if(Z.append("rect").attr("class","tl-card-bg").attr("x",0).attr("y",0).attr("width",x).attr("height",k).attr("rx",10).attr("ry",10).attr("fill","var(--tl-card-bg, transparent)").attr("stroke","var(--tl-card-border, transparent)"),!f||f.kind==="text")Z.append("foreignObject").attr("class","tl-label-text-card").attr("x",0).attr("y",0).attr("width",x).attr("height",k).append("xhtml:div").style("width",`${x}px`).style("height",`${k}px`).style("display","flex").style("align-items","center").style("justify-content","center").style("padding","8px 12px 8px 10px").style("text-align","center").style("font-family","var(--tl-font, system-ui)").style("color","var(--tl-text-color, #e6eefc)").style("line-height","1.25").style("overflow","hidden").text(f&&f.text||T.title);else if(f.kind==="image"){const dt=f.fit??i.mediaObjectFit??"cover",xt=f.zoom??1,At=Z.append("foreignObject").attr("class","tl-label-image-fo").attr("x",0).attr("y",0).attr("width",x).attr("height",k).append("xhtml:div").style("width",`${x}px`).style("height",`${k}px`).style("overflow","hidden").style("transformOrigin","center").style("transform",xt!==1?`scale(${xt})`:"none"),Ut=At.append("xhtml:img");Ut.attr("src",f.src).attr("alt",f.alt??T.title).style("display","block").style("width","100%").style("height","100%").style("objectFit",dt==="contain"?"contain":"cover").style("objectPosition","center"),Ut.on("error",()=>{At.style("display","none");const ti=dt==="contain"?"xMidYMid meet":"xMidYMid slice";Z.append("image").attr("class","tl-label-image").attr("x",0).attr("y",0).attr("width",x).attr("height",k).attr("preserveAspectRatio",ti).attr("href",f.src).attr("xlink:href",f.src)})}else if(f.kind==="video"){const dt=f.fit??i.mediaObjectFit??"cover",xt=f.zoom??1,Ut=Z.append("foreignObject").attr("class","tl-label-video").attr("x",0).attr("y",0).attr("width",x).attr("height",k).append("xhtml:div").style("width",`${x}px`).style("height",`${k}px`).style("overflow","hidden").style("borderRadius","var(--tl-card-radius, 10px)").style("boxShadow","var(--tl-card-shadow, none)").style("pointerEvents","auto").style("transformOrigin","center").style("transform",xt!==1?`scale(${xt})`:"none").append("xhtml:video");Ut.style("width","100%").style("height","100%").style("objectFit",dt==="contain"?"contain":"cover").style("objectPosition","center").attr("src",f.src).attr("playsinline","true").attr("muted","").attr("loop","").attr("autoplay","").attr("controls",null),f.poster&&Ut.attr("poster",f.poster);try{Ut.node()?.play?.().catch(()=>{})}catch{}}if(T.overlayColor){Z.append("rect").attr("class","tl-card-overlay").attr("x",0).attr("y",0).attr("width",x).attr("height",k).attr("rx",10).attr("ry",10).attr("fill",T.overlayColor).style("opacity","0.4").style("pointer-events","none");const dt=T.overlayText??(T.overlayColor?T.title:null);dt&&Z.append("foreignObject").attr("class","tl-card-overlay-text").attr("x",0).attr("y",0).attr("width",x).attr("height",k).style("pointer-events","none").append("xhtml:div").style("width",`${x}px`).style("height",`${k}px`).style("display","flex").style("align-items","center").style("justify-content","center").style("padding","10px").style("text-align","center").style("font-family","var(--tl-font, system-ui)").style("font-weight","var(--tl-overlay-text-weight, 600)").style("letter-spacing","0.2px").style("line-height","1.15").style("color","var(--tl-overlay-text-color, #fff)").style("opacity","var(--tl-overlay-text-opacity, 0.72)").style("text-shadow","var(--tl-overlay-text-shadow, 0 1px 2px rgba(0,0,0,0.35))").style("mix-blend-mode","normal").style("user-select","none").style("pointer-events","none").append("div").style("max-width",`${Math.max(0,x-16)}px`).style("overflow","hidden").style("text-overflow","ellipsis").style("white-space","nowrap").text(String(dt))}const ot=`translate(${-x/2}, ${N-k})`;Z.attr("transform",ot);const ht=()=>Z.transition().duration(120).attr("transform",`${ot} translate(${x/2},${k/2}) scale(1.07) translate(${-x/2},${-k/2})`),ft=()=>Z.transition().duration(120).attr("transform",ot);g.on("mouseenter",ht).on("mouseleave",ft)});const L=Xt("%Y-%m-%d"),R=6,j=F.selectAll("g.tl-date-tick").data(V).enter().append("g").attr("class","tl-date-tick");j.append("line").attr("y1",D).attr("y2",D+R).attr("stroke","var(--tl-axis-color, var(--tl-primary-color, #4285f4))").attr("stroke-width",1),j.append("text").attr("class","tl-date-text").attr("y",D+R+11).attr("text-anchor","middle").attr("font-family","var(--tl-font, system-ui)").attr("font-size","10px").attr("fill","var(--tl-tick-color, var(--tl-primary-color, #4285f4))").text(T=>L(T.start));let nt=null;i.showTooltip!==!1&&(nt=d.append("div").attr("class","tl-tooltip").style("position","absolute").style("pointer-events","none").style("padding","6px 10px").style("border-radius","4px").style("width","250px").style("background","var(--tl-tooltip-bg, rgba(0,0,0,0.7))").style("color","var(--tl-tooltip-color, #fff)").style("font-family","var(--tl-font, system-ui)").style("font-size","12px").style("opacity","0"));function it(T){const f=T.start.toLocaleDateString(),g=T.end?`  ${T.end.toLocaleDateString()}`:"",x=T.description?`<div>${T.description}</div>`:"";return`<strong>${T.title}</strong><div>${f}${g}</div>${x}`}const at=T=>{nt&&T.on("mouseover",(f,g)=>nt.html(it(g)).style("opacity","1")).on("mousemove",f=>nt.style("left",`${f.pageX+10}px`).style("top",`${f.pageY+10}px`)).on("mouseout",()=>nt.style("opacity","0"))};at(q),at(I),at(j);function G(T){const f=v.selectAll(".tick").nodes();let g=-1/0;f.forEach(x=>{const k=x.transform?.baseVal?.[0]?.matrix?.e??x.getCTM?.()?.e??0;k-g<T?x.style.display="none":(x.style.display="",g=k)})}function M(T,f){let g=-1/0;j.each(function(x,k){const N=X(x,k,f),Z=ut(this),ot=Z.select("text.tl-date-text"),ht=Z.select("line");N-g<T?(ot.style("display","none"),ht.style("display","none")):(ot.style("display",""),ht.style("display",""),g=N)})}const Y=d.append("div").attr("class","tl-nav").style("position","absolute").style("inset","0").style("pointer-events","none");function O(T){const f=Y.append("button").attr("type","button").attr("class",`tl-nav-${T}`).style("position","absolute").style("top","50%").style(T,"8px").style("transform","translateY(-50%)").style("width","40px").style("height","40px").style("border","none").style("borderRadius","999px").style("background","rgba(0,0,0,0.35)").style("backdropFilter","blur(2px)").style("color","#fff").style("fontSize","20px").style("lineHeight","40px").style("display","flex").style("alignItems","center").style("justifyContent","center").style("cursor","pointer").style("opacity","0.85").style("pointer-events","auto").style("user-select","none").style("transition","opacity 120ms ease, transform 120ms ease").text(T==="left"?"":"").on("mouseenter",()=>f.style("opacity","1")).on("mouseleave",()=>f.style("opacity",f.attr("data-disabled")==="true"?"0.35":"0.85"));return f}const w=O("left"),rt=O("right");let P=yt;function J(T){let f=0,g=1/0;for(let x=0;x<V.length;x++){const k=X(V[x],x,T),N=Math.abs(k-c/2);N<g&&(g=N,f=x)}return f}function B(T){T=Math.max(0,Math.min(V.length-1,T));const f=i.axisStrategy==="point"?E(T.toString())??0:p(V[T].start),g=P.k,x=c/2-g*f,k=yt.translate(x,0).scale(g);W(k,600)}function pt(T){const f=J(T),g=f<=0,x=f>=V.length-1;w.attr("data-disabled",g?"true":"false").style("opacity",g?"0.35":"0.85").style("cursor",g?"default":"pointer").style("display",r.axisStrategy==="time"?"":"none"),rt.attr("data-disabled",x?"true":"false").style("opacity",x?"0.35":"0.85").style("cursor",x?"default":"pointer").style("display",r.axisStrategy==="time"?"":"none"),w.on("click",()=>{w.attr("data-disabled")!=="true"&&B(J(P)-1)}),rt.on("click",()=>{rt.attr("data-disabled")!=="true"&&B(J(P)+1)})}const K=T=>{if(P=T,pt(T),q.attr("cx",(f,g)=>X(f,g,T)),I.each(function(f,g){const x=X(f,g,T);ut(this).attr("transform",`translate(${x},0)`).style("display","")}),i.axisStrategy==="point")v.style("display","none"),j.each(function(f,g){const x=X(f,g,T);ut(this).attr("transform",`translate(${x},0)`)}),i.hideOverlappingLabels?o&&o>1?j.each(function(f,g){const x=g%o===0,k=ut(this);k.select("text").style("display",x?"":"none"),k.select("line").style("display",x?"":"none")}):M(i.minLabelGap,T):j.selectAll("text,line").style("display","");else{j.selectAll("text,line").style("display","none"),v.style("display","");const f=$(T),g=Ai(f).tickFormat(Xt("%Y-%m-%d"));a&&Number.isFinite(a)?g.ticks(Dt.every(a)):g.ticks(10),v.call(g),z(),G(i.minLabelGap)}if(i.hideOverlappingLabels&&kt(T),i.onRangeChange)if(i.axisStrategy==="time"){const f=T.rescaleX(p);i.onRangeChange(f.domain())}else{const f=(E.step?.()??1)*T.k,g=Math.max(0,Math.floor((0-T.x)/Math.max(1,f))),x=Math.min(V.length-1,Math.ceil((c-T.x)/Math.max(1,f))),k=V[g]?.start??V[0].start,N=V[x]?.start??V[V.length-1].start;i.onRangeChange([k,N])}},ct=Jr().scaleExtent([u,y]).translateExtent([[0,0],[c,l]]).extent([[0,0],[c,l]]).on("zoom",T=>{const f=T.transform;_.attr("transform",null),K(f)});m.call(ct);function wt(){if(V.length<=1)return yt;const T=r.zoom?.initialScale;if(T&&isFinite(T))return yt.scale(T);if(i.axisStrategy==="point"){const f=E.step?.()??c/Math.max(1,V.length-1),g=Math.max(1,(i.minLabelGap??40)/Math.max(1,f));return yt.scale(Math.min(y,Math.max(u,g)))}else{let f=1/0;for(let k=1;k<V.length;k++){const N=Math.abs(p(V[k].start)-p(V[k-1].start));N>0&&N<f&&(f=N)}if(!isFinite(f)||f===0)return yt;const x=Math.max(i.cardWidth+(i.labelCardGap??8),i.minLabelGap??40)/f;return yt.scale(Math.min(y,Math.max(u,x)))}}function kt(T){const f=I.nodes().map((k,N)=>{const Z=ut(k),ot=Z.datum(),ht=X(ot,N,T),dt=Z.select("g.tl-card").attr("data-card-width"),xt=Number(dt)||i.cardWidth;return{node:k,x:ht,w:xt}});f.sort((k,N)=>k.x-N.x);let g=-1/0;const x=i.labelCardGap;for(const{node:k,x:N,w:Z}of f){const ot=N-Z/2,ht=N+Z/2;ot<g+x?k.style.display="none":(k.style.display="",g=ht)}}const vt=wt();ct.transform(m,vt),K(vt)}}class Nc{static render(e,n,r){const i={axisStrategy:r.axisStrategy??"time",minLabelGap:r.minLabelGap??40,labelYOffset:r.labelXOffset??r.labelYOffset??16,cardWidth:r.cardWidth??140,cardHeight:r.cardHeight??200,enforceUniformCardSize:r.enforceUniformCardSize??!0,hideOverlappingLabels:r.hideOverlappingLabels??!0,labelCardGap:r.labelCardGap??8,mediaObjectFit:r.mediaObjectFit??"cover",baselineX:r.baselineX,hoverScale:r.hoverScale??1.08,hoverDotRadius:r.hoverDotRadius??8,showTooltip:r.showTooltip??!0,...r};n.innerHTML="";const a={top:10,right:80,bottom:50,left:80},o=n.clientWidth-a.left-a.right,s=n.clientHeight-a.top-a.bottom,c=r.zoom?.minScale??1,l=r.zoom?.maxScale??80,u=ut(n);u.style("position","relative");const y=u.append("svg").attr("width",o+a.left+a.right).attr("height",s+a.top+a.bottom).style("background","var(--tl-background-color, #fff)"),d=o+a.left+a.right,m=s+a.top+a.bottom,W=y.append("g").attr("class","tl-canvas-bg"),U=r.canvasBackground;if(!U)y.style("background","var(--tl-background-color, #fff)");else if(U.kind==="color")y.style("background",U.value??"var(--tl-background-color, #fff)");else if(U.kind==="image"){const f=U.fit??"cover";W.append("foreignObject").attr("x",0).attr("y",0).attr("width",d).attr("height",m).append("xhtml:div").style("width",`${d}px`).style("height",`${m}px`).style("opacity",String(U.opacity??1)).style("backgroundImage",`url("${U.src}")`).style("backgroundRepeat","no-repeat").style("backgroundPosition","center").style("backgroundSize",f==="contain"?"contain":"cover")}else if(U.kind==="video"){const f=U.fit??"cover",x=W.append("foreignObject").attr("x",0).attr("y",0).attr("width",d).attr("height",m).append("xhtml:div").style("width",`${d}px`).style("height",`${m}px`).style("overflow","hidden").style("opacity",String(U.opacity??1)).append("xhtml:video");x.style("width","100%").style("height","100%").style("objectFit",f==="contain"?"contain":"cover").style("objectPosition","center").attr("src",U.src).attr("playsinline","true").attr("muted",U.muted??!0?"":null).attr("loop",U.loop??!0?"":null).attr("autoplay",U.autoplay??!0?"":null).attr("controls",U.controls??!1?"":null),U.poster&&x.attr("poster",U.poster);try{x.node()?.play?.().catch(()=>{})}catch{}}const et=y.append("g").attr("transform",`translate(${a.left},${a.top})`),A=[...e.items].sort((f,g)=>+f.start-+g.start),tt=A.map(f=>f.start),Q=i.baselineX??Math.round(o/2),[V,lt]=pr(tt),D=Qr().domain([V,lt]).range([0,s]),H=A.map((f,g)=>g.toString()),h=Xr().domain(H).range([0,s]).padding(.5),p=f=>f.rescaleY(D),b=(f,g,x)=>{if(i.axisStrategy==="point"){const k=h(g.toString())??0;return x.applyY(k)}else return p(x)(f.start)};et.append("line").attr("x1",Q).attr("x2",Q).attr("y1",0).attr("y2",s).attr("stroke","var(--tl-axis-color, var(--tl-primary-color, #4285f4))").attr("stroke-width",2);const E=et.append("g"),$=()=>{E.attr("fill",null),E.select(".domain").attr("stroke","var(--tl-axis-color, var(--tl-primary-color, #4285f4))").attr("fill","none"),E.selectAll(".tick line").attr("stroke","var(--tl-axis-color, var(--tl-primary-color, #4285f4))"),E.selectAll(".tick text").attr("fill","var(--tl-tick-color, var(--tl-primary-color, #4285f4))").attr("font-family","var(--tl-font, system-ui)").attr("font-size","10px")};i.axisStrategy==="time"&&(E.call(Fn(D).ticks(10).tickFormat(Xt("%Y-%m-%d"))),$());const X=et.append("g"),v=X.append("g"),z=X.append("g"),_=X.append("g").attr("class","tl-point-axis").style("display",i.axisStrategy==="point"?"":"none"),S=v.selectAll("circle").data(A).enter().append("circle").attr("cx",Q).attr("r",6).attr("fill","var(--tl-accent-color, var(--tl-primary-color, #4285f4))").style("cursor",f=>i.onItemClick?"pointer":"default").on("click",(f,g)=>i.onItemClick?.(g,f)).on("mouseover",(f,g)=>i.onItemHover?.(g,f)),F=z.selectAll("g.tl-label").data(A).enter().append("g").attr("class","tl-label").style("cursor",f=>i.onItemClick?"pointer":"default").on("click",(f,g)=>i.onItemClick?.(g,f)).on("mouseover",(f,g)=>i.onItemHover?.(g,f));F.each(function(f){const g=f.label,x=ut(this);x.selectAll("*").remove();const k=i.enforceUniformCardSize?i.cardWidth:g?.width??i.cardWidth,N=i.enforceUniformCardSize?i.cardHeight:g?.height??i.cardHeight,Z=Q+i.labelYOffset,ot=x.append("g").attr("class","tl-card").attr("data-card-width",String(k)).attr("data-card-height",String(N)).attr("data-card-tx",String(Z)).attr("transform",C(Z,N,k,1));if(ot.style("transition","transform 120ms ease"),ot.append("rect").attr("class","tl-card-bg").attr("x",0).attr("y",0).attr("width",k).attr("height",N).attr("rx",10).attr("ry",10).attr("fill","var(--tl-card-bg, rgba(12, 19, 33, 0.85))").attr("stroke","var(--tl-card-border, rgba(255,255,255,0.08))"),!g||g.kind==="text")ot.append("foreignObject").attr("class","tl-label-text-card").attr("x",0).attr("y",0).attr("width",k).attr("height",N).append("xhtml:div").style("width",`${k}px`).style("height",`${N}px`).style("display","flex").style("align-items","center").style("justify-content","center").style("padding","8px 12px 8px 10px").style("text-align","center").style("font-family","var(--tl-font, system-ui)").style("color","var(--tl-text-color, #e6eefc)").style("line-height","1.25").style("overflow","hidden").text(g&&g.text||f.title);else if(g.kind==="image"){const ft=g.fit??i.mediaObjectFit??"cover",dt=g.zoom??1,Lt=ot.append("foreignObject").attr("class","tl-label-image-fo").attr("x",0).attr("y",0).attr("width",k).attr("height",N).append("xhtml:div").style("width",`${k}px`).style("height",`${N}px`).style("overflow","hidden").style("transformOrigin","center").style("transform",dt!==1?`scale(${dt})`:"none"),At=Lt.append("xhtml:img");At.attr("src",g.src).attr("alt",g.alt??f.title).style("display","block").style("width","100%").style("height","100%").style("objectFit",ft==="contain"?"contain":"cover").style("objectPosition","center"),At.on("error",()=>{Lt.style("display","none");const Ut=ft==="contain"?"xMidYMid meet":"xMidYMid slice";ot.append("image").attr("class","tl-label-image").attr("x",0).attr("y",0).attr("width",k).attr("height",N).attr("preserveAspectRatio",Ut).attr("href",g.src).attr("xlink:href",g.src)}),g.alt&&ot.append("title").text(g.alt)}else if(g.kind==="video"){const ft=g.fit??i.mediaObjectFit??"cover",dt=g.zoom??1,At=ot.append("foreignObject").attr("class","tl-label-video").attr("x",0).attr("y",0).attr("width",k).attr("height",N).append("xhtml:div").style("width",`${k}px`).style("height",`${N}px`).style("overflow","hidden").style("borderRadius","var(--tl-card-radius, 10px)").style("boxShadow","var(--tl-card-shadow, none)").style("pointerEvents","auto").style("transformOrigin","center").style("transform",dt!==1?`scale(${dt})`:"none").append("xhtml:video");At.style("width","100%").style("height","100%").style("objectFit",ft==="contain"?"contain":"cover").style("objectPosition","center").attr("src",g.src).attr("playsinline","true").attr("muted","").attr("loop","").attr("autoplay","").attr("controls",null),g.poster&&At.attr("poster",g.poster);try{At.node()?.play?.().catch(()=>{})}catch{}}f.overlayColor&&ot.append("rect").attr("class","tl-card-overlay").attr("x",0).attr("y",0).attr("width",k).attr("height",N).attr("rx",10).attr("ry",10).attr("fill",f.overlayColor).style("opacity","0.4").style("pointer-events","none");const ht=f.overlayText??(f.overlayColor?f.title:null);ht&&ot.append("foreignObject").attr("class","tl-card-overlay-text").attr("x",0).attr("y",0).attr("width",k).attr("height",N).style("pointer-events","none").append("xhtml:div").style("width",`${k}px`).style("height",`${N}px`).style("display","flex").style("align-items","center").style("justify-content","center").style("padding","10px").style("text-align","center").style("font-family","var(--tl-font, system-ui)").style("font-weight","var(--tl-overlay-text-weight, 600)").style("letter-spacing","0.2px").style("line-height","1.15").style("color","var(--tl-overlay-text-color, #fff)").style("opacity","var(--tl-overlay-text-opacity, 0.72)").style("text-shadow","var(--tl-overlay-text-shadow, 0 1px 2px rgba(0,0,0,0.35))").style("mix-blend-mode","normal").style("user-select","none").style("pointer-events","none").append("div").style("max-width",`${Math.max(0,k-16)}px`).style("overflow","hidden").style("text-overflow","ellipsis").style("white-space","nowrap").text(String(ht))});function C(f,g,x,k=1){return`translate(${f}, ${-g/2}) translate(${x/2}, ${g/2}) scale(${k}) translate(${-x/2}, ${-g/2})`}function q(f,g=i.hoverScale){const x=f.select("g.tl-card");if(!x.node())return;const k=+(x.attr("data-card-width")||i.cardWidth),N=+(x.attr("data-card-height")||i.cardHeight),Z=+(x.attr("data-card-tx")||Q+i.labelYOffset);x.attr("transform",C(Z,N,k,g))}function I(f){const g=f.select("g.tl-card");if(!g.node())return;const x=+(g.attr("data-card-width")||i.cardWidth),k=+(g.attr("data-card-height")||i.cardHeight),N=+(g.attr("data-card-tx")||Q+i.labelYOffset);g.attr("transform",C(N,k,x,1))}S.style("transition","r 120ms ease").on("mouseenter",function(f,g){const x=ut(this).attr("r");ut(this).attr("data-prev-r",x).attr("r",i.hoverDotRadius);const k=A.indexOf(g),N=F.nodes()[k];q(ut(N))}).on("mouseleave",function(f,g){const x=ut(this).attr("data-prev-r")||6;ut(this).attr("r",x);const k=A.indexOf(g),N=F.nodes()[k];I(ut(N))}),F.on("mouseenter",function(){q(ut(this))}).on("mouseleave",function(){I(ut(this))});let L=null;i.showTooltip!==!1&&(L=u.append("div").attr("class","tl-tooltip").style("position","absolute").style("pointer-events","none").style("padding","6px 10px").style("width","250px").style("border-radius","4px").style("background","var(--tl-tooltip-bg, rgba(0,0,0,0.7))").style("color","var(--tl-tooltip-color, #fff)").style("font-family","var(--tl-font, system-ui)").style("font-size","12px").style("opacity","0"));function R(f){const g=f.start.toLocaleDateString(),x=f.end?`  ${f.end.toLocaleDateString()}`:"",k=f.description?`<div>${f.description}</div>`:"";return`<strong>${f.title}</strong><div>${g}${x}</div>${k}`}const j=f=>{L&&f.on("mouseover",(g,x)=>L.html(R(x)).style("opacity","1")).on("mousemove",g=>L.style("left",`${g.pageX+10}px`).style("top",`${g.pageY+10}px`)).on("mouseout",()=>L.style("opacity","0"))};j(S),j(F);const nt=Xt("%Y-%m-%d"),it=6,at=10,G=_.selectAll("g.tl-date-tick").data(A).enter().append("g").attr("class","tl-date-tick");G.append("line").attr("x1",Q).attr("x2",Q-it).attr("stroke","var(--tl-axis-color, var(--tl-primary-color, #4285f4))").attr("stroke-width",1),G.append("text").attr("class","tl-date-text").attr("x",Q-it-at).attr("text-anchor","end").attr("font-family","var(--tl-font, system-ui)").attr("font-size","10px").attr("fill","var(--tl-tick-color, var(--tl-primary-color, #4285f4))").text(f=>nt(f.start));const M=u.append("div").attr("class","tl-nav").style("position","absolute").style("inset","0").style("pointer-events","none");function Y(f,g){const x=M.append("button").attr("type","button").attr("class",`tl-nav-${f}`).style("position","absolute").style(f,"8px").style("left","50%").style("transform","translateX(-50%)").style("width","40px").style("height","40px").style("border","none").style("borderRadius","999px").style("background","rgba(0,0,0,0.35)").style("backdropFilter","blur(2px)").style("color","#fff").style("fontSize","20px").style("lineHeight","40px").style("display","flex").style("alignItems","center").style("justifyContent","center").style("cursor","pointer").style("opacity","0.85").style("pointer-events","auto").style("user-select","none").style("transition","opacity 120ms ease, transform 120ms ease").style("display",r.axisStrategy==="time"?"":"none").text(g).on("mouseenter",()=>x.style("opacity","1")).on("mouseleave",()=>x.style("opacity",x.attr("data-disabled")==="true"?"0.35":"0.85"));return x}const O=Y("top",""),w=Y("bottom","");function rt(f,g=600){y.transition().duration(g).call(kt.transform,f)}let P=yt;function J(f){let g=0,x=1/0;for(let k=0;k<A.length;k++){const N=b(A[k],k,f),Z=Math.abs(N-s/2);Z<x&&(x=Z,g=k)}return g}function B(f){f=Math.max(0,Math.min(A.length-1,f));const g=i.axisStrategy==="point"?h(f.toString())??0:D(A[f].start),x=P.k,k=s/2-x*g,N=yt.translate(0,k).scale(x);rt(N,600)}function pt(f){const g=J(f),x=g<=0,k=g>=A.length-1;O.attr("data-disabled",x?"true":"false").style("opacity",x?"0.35":"0.85").style("cursor",x?"default":"pointer").style("display",r.axisStrategy==="time"?"":"none"),w.attr("data-disabled",k?"true":"false").style("opacity",k?"0.35":"0.85").style("cursor",k?"default":"pointer").style("display",r.axisStrategy==="time"?"":"none"),O.on("click",()=>{x||B(g-1)}),w.on("click",()=>{k||B(g+1)})}function K(f){const g=F.nodes().map((N,Z)=>{const ot=ut(N),ht=ot.datum(),ft=b(ht,Z,f),xt=ot.select("g.tl-card").attr("data-card-height"),Lt=Number(xt)||i.cardHeight;return{node:N,y:ft,h:Lt}});g.sort((N,Z)=>N.y-Z.y);let x=-1/0;const k=i.labelCardGap;for(const{node:N,y:Z,h:ot}of g){const ht=Z-ot/2,ft=Z+ot/2;ht<x+k?N.style.display="none":(N.style.display="",x=ft)}}function ct(f,g){let x=-1/0;G.each(function(k,N){const Z=b(k,N,g),ot=ut(this),ht=ot.select("text.tl-date-text"),ft=ot.select("line");Z-x<f?(ht.style("display","none"),ft.style("display","none")):(ht.style("display",""),ft.style("display",""),x=Z)})}const wt=f=>{if(P=f,pt(f),S.attr("cy",(g,x)=>b(g,x,f)),F.each(function(g,x){const k=b(g,x,f);ut(this).attr("transform",`translate(0, ${k})`).style("display","")}),i.axisStrategy==="time"){const g=p(f);E.style("display",""),E.call(Fn(g).ticks(10).tickFormat(Xt("%Y-%m-%d"))),_.style("display","none")}else E.style("display","none"),_.style("display",""),G.each(function(g,x){const k=b(g,x,f);ut(this).attr("transform",`translate(0, ${k})`)}),i.hideOverlappingLabels&&ct(i.minLabelGap??40,f);if(i.hideOverlappingLabels&&K(f),i.onRangeChange)if(i.axisStrategy==="time"){const g=f.rescaleY(D);i.onRangeChange(g.domain())}else{const g=(h.step?.()??1)*f.k,x=Math.max(0,Math.floor((0-f.y)/Math.max(1,g))),k=Math.min(A.length-1,Math.ceil((s-f.y)/Math.max(1,g))),N=A[x]?.start??A[0].start,Z=A[k]?.start??A[A.length-1].start;i.onRangeChange([N,Z])}},kt=Jr().scaleExtent([c,l]).translateExtent([[0,0],[o,s]]).extent([[0,0],[o,s]]).on("zoom",f=>{const g=f.transform;X.attr("transform",null),wt(g)});y.call(kt);function vt(){if(A.length<=1)return yt;const f=r.zoom?.initialScale;if(f&&isFinite(f))return yt.scale(f);if(i.axisStrategy==="point"){const g=h.step?.()??s/Math.max(1,A.length-1),x=Math.max(1,(i.minLabelGap??40)/Math.max(1,g));return yt.scale(Math.min(l,Math.max(c,x)))}else{let g=1/0;for(let N=1;N<A.length;N++){const Z=Math.abs(D(A[N].start)-D(A[N-1].start));Z>0&&Z<g&&(g=Z)}if(!isFinite(g)||g===0)return yt;const k=Math.max(i.cardHeight+(i.labelCardGap??8),i.minLabelGap??40)/g;return yt.scale(Math.min(l,Math.max(c,k)))}}const T=vt();kt.transform(y,T),wt(T)}}class Rc{static render(e,n,r){n.innerHTML="";const i="tl-grid-modern-styles";if(!document.getElementById(i)){const c=document.createElement("style");c.id=i,c.textContent=`
        /* ---------- Grid Container ---------- */
        .tl-grid {
          --grid-gap: 16px;
          --grid-pad: 16px;
          --grid-min: 220px;

          --card-radius: var(--tl-card-radius, 16px);
          --card-shadow: var(--tl-card-shadow, 0 10px 30px rgba(0,0,0,0.18));
          --card-bg: color-mix(in oklab, var(--tl-background-color, #0b1020) 75%, white 0%);
          --card-fg: var(--tl-text-color, #e6eefc);

          --glass-bg: color-mix(in oklab, var(--card-bg) 85%, white 0%);
          --accent: var(--tl-primary-color, #4f7fff);

          --chip-bg: color-mix(in oklab, var(--accent) 20%, black 80%);
          --chip-fg: color-mix(in oklab, var(--accent) 95%, white 0%);

          --lift-translate: -4px;
          --lift-scale: 1.02;

          display: grid;
          gap: var(--grid-gap);
          grid-template-columns: repeat(auto-fill, minmax(var(--grid-min), 1fr));
          padding: var(--grid-pad);
          background: var(--tl-background-color, #0b1020);
          border-radius: var(--tl-border-radius, 16px);
          font-family: var(--tl-font, system-ui);
          position: relative;
          overflow: hidden;
        }

        /* ---------- Card ---------- */
        .tl-card {
          position: relative;
          border-radius: var(--card-radius);
          background: var(--glass-bg);
          color: var(--card-fg);
          box-shadow: var(--card-shadow);
          overflow: clip;
          cursor: default;
          transform: translateY(8px);
          opacity: 0;
          transition: transform 420ms cubic-bezier(.2, .8, .2, 1), opacity 420ms ease, box-shadow 200ms ease, filter 200ms ease;
          outline: none;
          border: 1px solid rgba(255,255,255,0.08);
          position: relative;
          isolation: isolate;
        }
        .tl-card::before {
          content: "";
          position: absolute; inset: 0;
          border-radius: inherit;
          padding: 1px; /* gradient stroke */
          background: linear-gradient(180deg, rgba(255,255,255,0.25), rgba(255,255,255,0));
          -webkit-mask:
            linear-gradient(#000 0 0) content-box,
            linear-gradient(#000 0 0);
          -webkit-mask-composite: xor;
                  mask-composite: exclude;
          pointer-events: none;
          z-index: 1;
        }
        .tl-card[data-revealed="true"] {
          transform: translateY(0);
          opacity: 1;
        }
        .tl-card:hover {
          transform: translateY(var(--lift-translate)) scale(var(--lift-scale));
          box-shadow: 0 14px 40px rgba(0,0,0,0.35);
          filter: saturate(1.05);
        }
        .tl-card:focus-visible {
          box-shadow: 0 0 0 2px color-mix(in oklab, var(--accent) 50%, white 0%), var(--card-shadow);
        }
        .tl-card.clickable { cursor: pointer; }

        /* ---------- Media ---------- */
        .tl-media {
          position: relative;
          aspect-ratio: 16 / 9;
          width: 100%;
          overflow: clip;
        }
        .tl-media > img,
        .tl-media > video {
          width: 100%;
          height: 100%;
          object-fit: cover;
          object-position: center;
          display: block;
          transform-origin: center;
        }

        /* ---------- Overlay & Overlay text ---------- */
        .tl-overlay {
          position: absolute;
          inset: 0;
          pointer-events: none;
          mix-blend-mode: normal;
        }
        .tl-overlay-text {
          position: absolute;
          inset: 0;
          display: grid;
          place-items: center;
          padding: 10px;
          text-align: center;
          font-weight: 600;
          letter-spacing: 0.2px;
          color: #fff;
          text-shadow: 0 1px 2px rgba(0,0,0,0.4);
          opacity: .85;
          pointer-events: none;
        }

        /* ---------- Year Chip ---------- */
        .tl-chip {
          position: absolute;
          top: 10px; left: 10px; /*    right: 10px     */
          padding: 4px 8px;
          border-radius: 999px;
          font-size: 12px;
          background: var(--chip-bg);
          color: var(--chip-fg);
          backdrop-filter: blur(4px);
          border: 1px solid rgba(255,255,255,0.12);
          z-index: 2;
          pointer-events: none; /*    click  media/header */
        }

        /* ---------- Header ---------- */
        .tl-head {
          padding: 12px 14px 8px;
          position: relative;
          z-index: 3;
        }
        .tl-title {
          margin: 0;
          font-size: 16px;
          font-weight: 700;
          line-height: 1.2;
          letter-spacing: .2px;
        }
        .tl-date {
          margin-top: 4px;
          font-size: 12px;
          opacity: .8;
        }

        /*    media   chip   card,
              header      . */
        .tl-card[data-has-chip="true"] .tl-head {
          padding-left: 72px;
          min-height: 46px;
          display: flex;
          flex-direction: column;
          justify-content: center;
        }

        /* ---------- Body ---------- */
        .tl-body {
          padding: 12px 14px;
          font-size: 14px;
          line-height: 1.35;
          color: color-mix(in oklab, var(--card-fg) 90%, white 0%);
        }

        /* ---------- Subtle shine on hover ---------- */
        .tl-card::after {
          content: "";
          position: absolute;
          inset: -100% -50%;
          background: linear-gradient(120deg, transparent 30%, rgba(255,255,255,.06) 45%, transparent 60%);
          transform: translateX(-30%) rotate(0.001deg);
          transition: transform 600ms ease;
          pointer-events: none;
        }
        .tl-card:hover::after {
          transform: translateX(30%) rotate(0.001deg);
        }
      `,document.head.appendChild(c)}const a=document.createElement("div");a.className="tl-grid",n.appendChild(a);const o=[],s=new IntersectionObserver(c=>{for(const l of c){const u=l.target;if(l.isIntersecting){u.dataset.revealed="true";const y=u.querySelector("video");if(y)try{y.play().catch(()=>{})}catch{}}else{const y=u.querySelector("video");if(y)try{y.pause()}catch{}}}},{root:n,threshold:.15});for(const c of e.items){const l=document.createElement("article");l.className="tl-card",l.tabIndex=0,r.onItemClick&&l.classList.add("clickable");const u=document.createElement("header");u.className="tl-head",u.innerHTML=`<h4 class="tl-title">${hr(c.title)}</h4><div class="tl-date">${hr(Lc(c))}</div>`,l.appendChild(u);let y=null;if(c.label){if(y=document.createElement("div"),y.className="tl-media",c.label.kind==="image"){const m=document.createElement("img");m.loading="lazy",m.decoding="async",m.src=c.label.src,m.alt=c.label.alt??c.title,c.label.fit==="contain"&&(m.style.objectFit="contain"),c.label.zoom&&c.label.zoom!==1&&(m.style.transform=`scale(${c.label.zoom})`),y.appendChild(m)}else if(c.label.kind==="video"){const m=document.createElement("video");m.src=c.label.src,c.label.poster&&(m.poster=c.label.poster),m.muted=!0,m.loop=!0,m.playsInline=!0,m.autoplay=!1,c.label.fit==="contain"&&(m.style.objectFit="contain"),c.label.zoom&&c.label.zoom!==1&&(m.style.transform=`scale(${c.label.zoom})`),y.appendChild(m)}else if(c.label.kind==="text"){const m=document.createElement("div");m.style.display="grid",m.style.placeItems="center",m.style.padding="18px",m.style.textAlign="center",m.style.height="100%",m.style.fontWeight="600",m.textContent=c.label.text??c.title,y.appendChild(m)}if(c.overlayColor){const m=document.createElement("div");m.className="tl-overlay",m.style.background=c.overlayColor,y.appendChild(m);const W=c.overlayText??null;if(W){const U=document.createElement("div");U.className="tl-overlay-text",U.textContent=String(W),y.appendChild(U)}}const d=document.createElement("div");d.className="tl-chip",d.textContent=String(c.start.getFullYear()),y.appendChild(d),l.appendChild(y)}else{const d=document.createElement("div");d.className="tl-chip",d.textContent=String(c.start.getFullYear()),l.appendChild(d),l.dataset.hasChip="true"}if(c.description){const d=document.createElement("div");d.className="tl-body",d.textContent=c.description,l.appendChild(d)}r.onItemClick&&(l.addEventListener("click",d=>r.onItemClick(c,d)),l.style.cursor="pointer"),r.onItemHover&&l.addEventListener("mouseenter",d=>r.onItemHover(c,d)),s.observe(l),o.push(l),a.appendChild(l)}a.addEventListener("keydown",c=>{const l=c.target,u=o.indexOf(l);if(u<0)return;const y=Uc(a,o),d=c.key;let m=u;if(d==="ArrowRight")m=Math.min(o.length-1,u+1);else if(d==="ArrowLeft")m=Math.max(0,u-1);else if(d==="ArrowDown")m=Math.min(o.length-1,u+y);else if(d==="ArrowUp")m=Math.max(0,u-y);else if(d==="Enter"){l.click();return}else return;const W=o[m];W&&(W.focus(),W.scrollIntoView({behavior:"smooth",block:"center",inline:"center"}),c.preventDefault())})}}function hr(t){return t.replace(/[&<>"']/g,e=>({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"})[e])}function Lc(t){const e=t.start.toLocaleDateString();return t.end?`${e}  ${t.end.toLocaleDateString()}`:e}function Uc(t,e){if(e.length<=1)return 1;const n=e[0].offsetTop;let r=0;for(const i of e){if(i.offsetTop!==n)break;r++}return Math.max(1,r)}function Hc(t){return t.replace(/[A-Z]/g,e=>"-"+e.toLowerCase())}function Yc(t,e){if(t.classList.remove("tl-theme-light","tl-theme-dark"),Array.from(t.style).forEach(n=>{n.startsWith("--tl-")&&t.style.removeProperty(n)}),!!e)if(e==="light"||e==="dark")t.classList.add(`tl-theme-${e}`);else for(const[n,r]of Object.entries(e)){if(r==null)continue;const i=`--tl-${Hc(n)}`;t.style.setProperty(i,r)}}class Pt{constructor(e,n){this.items=e,this.config={theme:"light",mode:"slider",showTodayLine:!0,interactive:!0,language:"en",...n}}render(e){switch(e.innerHTML="",Yc(e,this.config.theme),this.config.mode){case"slider":Fc.render(this,e,this.config);break;case"vertical":Nc.render(this,e,this.config);break;case"grid":Rc.render(this,e,this.config);break;default:e.innerHTML=this.toHTML()}}toHTML(){return`<div class="tl-container">${this.items.map(n=>`<div class="tl-item">
         <strong>${n.title}</strong>
         <time>${n.start.toLocaleDateString()}</time>
       </div>`).join("")}</div>`}static fromCSV(e){const n=Ht.parse(e,"csv");return new Pt(n)}static fromJSON(e){const n=Ht.parse(e,"json");return new Pt(n)}static fromXML(e){const n=Ht.parse(e,"xml");return new Pt(n)}static fromTEI(e){const n=Ht.parse(e,"tei");return new Pt(n)}static from(e,n){const r=Ht.parse(e,n);return new Pt(r)}static registerParser(e){Ht.register(e)}static supportedFormats(){return Ht.supportedFormats()}}const dr="chrono-leaf-default-themes";if(!document.getElementById(dr)){const t=document.createElement("style");t.id=dr,t.textContent=`
     /* Theme classes just set variables */
      .tl-theme-light {
       --tl-primary-color: #4285f4;
       --tl-background-color: #fff;
       --tl-font: system-ui, sans-serif;
       --tl-border-radius: 4px;
       --tl-tooltip-bg: rgba(0,0,0,0.7);
       --tl-tooltip-color: #fff;
       --tl-card-bg: rgba(0,0,0,0.04);
       --tl-card-border: rgba(0,0,0,0.15);
       --tl-card-radius: 10px;
       --tl-card-shadow: 0 2px 8px rgba(0,0,0,0.12);
         --tl-overlay-text-color: #fff;
  --tl-overlay-text-opacity: 0.72;
  --tl-overlay-text-weight: 600;
  --tl-overlay-text-shadow: 0 1px 2px rgba(0,0,0,0.35);
       }
       .tl-theme-dark {
        --tl-primary-color: #8ab4f8;
        --tl-background-color: #222;
        --tl-font: system-ui, sans-serif;
        --tl-border-radius: 4px;
        --tl-tooltip-bg: rgba(255,255,255,0.85);
        --tl-tooltip-color: #000;
        --tl-card-bg: rgba(255,255,255,0.06);
        --tl-card-border: rgba(255,255,255,0.18);
        --tl-card-radius: 10px;
        --tl-card-shadow: 0 2px 10px rgba(0,0,0,0.35);
          --tl-overlay-text-color: #fff;
  --tl-overlay-text-opacity: 0.72;
  --tl-overlay-text-weight: 600;
  --tl-overlay-text-shadow: 0 1px 2px rgba(0,0,0,0.35);
      }

     /* Base container styles */
     .tl-container, .tl-grid {
       background: var(--tl-background-color);
       font-family: var(--tl-font);
       border-radius: var(--tl-border-radius);
      color: inherit;
       color: var(--tl-text-color, inherit);
     }
  .tl-container svg foreignObject.tl-label-video {
    overflow: visible;
  }
  .tl-container svg .tl-label-text {
    user-select: none;
  }

     /* Axis & SVG text defaults (renderer reads these vars) */
     .tl-container svg .domain,
     .tl-container svg .tick line {
       stroke: var(--tl-axis-color, var(--tl-primary-color, #4285f4));
     }
     .tl-container svg .tick text {
       fill: var(--tl-tick-color, var(--tl-primary-color, #4285f4));
       font-family: var(--tl-font);
     }
 
     /* Tooltip */
     .tl-tooltip {
       background: var(--tl-tooltip-bg);
       color: var(--tl-tooltip-color);
       font-family: var(--tl-font);
     }
   `,document.head.appendChild(t)}exports.Timeline=Pt;
//# sourceMappingURL=chrono-leaf.cjs.js.map
