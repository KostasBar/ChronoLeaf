"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});function Zr(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var ye={exports:{}};/* @license
Papa Parse
v5.5.3
https://github.com/mholt/PapaParse
License: MIT
*/var Kr=ye.exports,Mn;function Qr(){return Mn||(Mn=1,function(t,e){((n,r)=>{t.exports=r()})(Kr,function n(){var r=typeof self<"u"?self:typeof window<"u"?window:r!==void 0?r:{},i,o=!r.document&&!!r.postMessage,a=r.IS_PAPA_WORKER||!1,u={},l=0,s={};function c(f){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},(function(h){var v=V(h);v.chunkSize=parseInt(v.chunkSize),h.step||h.chunk||(v.chunkSize=null),this._handle=new H(v),(this._handle.streamer=this)._config=v}).call(this,f),this.parseChunk=function(h,v){var R=parseInt(this._config.skipFirstNLines)||0;if(this.isFirstChunk&&0<R){let Y=this._config.newline;Y||(D=this._config.quoteChar||'"',Y=this._handle.guessLineEndings(h,D)),h=[...h.split(Y).slice(R)].join(Y)}this.isFirstChunk&&I(this._config.beforeFirstChunk)&&(D=this._config.beforeFirstChunk(h))!==void 0&&(h=D),this.isFirstChunk=!1,this._halted=!1;var R=this._partialLine+h,D=(this._partialLine="",this._handle.parse(R,this._baseIndex,!this._finished));if(!this._handle.paused()&&!this._handle.aborted()){if(h=D.meta.cursor,R=(this._finished||(this._partialLine=R.substring(h-this._baseIndex),this._baseIndex=h),D&&D.data&&(this._rowCount+=D.data.length),this._finished||this._config.preview&&this._rowCount>=this._config.preview),a)r.postMessage({results:D,workerId:s.WORKER_ID,finished:R});else if(I(this._config.chunk)&&!v){if(this._config.chunk(D,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);this._completeResults=D=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(D.data),this._completeResults.errors=this._completeResults.errors.concat(D.errors),this._completeResults.meta=D.meta),this._completed||!R||!I(this._config.complete)||D&&D.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),R||D&&D.meta.paused||this._nextChunk(),D}this._halted=!0},this._sendError=function(h){I(this._config.error)?this._config.error(h):a&&this._config.error&&r.postMessage({workerId:s.WORKER_ID,error:h,finished:!1})}}function g(f){var h;(f=f||{}).chunkSize||(f.chunkSize=s.RemoteChunkSize),c.call(this,f),this._nextChunk=o?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(v){this._input=v,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(h=new XMLHttpRequest,this._config.withCredentials&&(h.withCredentials=this._config.withCredentials),o||(h.onload=C(this._chunkLoaded,this),h.onerror=C(this._chunkError,this)),h.open(this._config.downloadRequestBody?"POST":"GET",this._input,!o),this._config.downloadRequestHeaders){var v,R=this._config.downloadRequestHeaders;for(v in R)h.setRequestHeader(v,R[v])}var D;this._config.chunkSize&&(D=this._start+this._config.chunkSize-1,h.setRequestHeader("Range","bytes="+this._start+"-"+D));try{h.send(this._config.downloadRequestBody)}catch(Y){this._chunkError(Y.message)}o&&h.status===0&&this._chunkError()}},this._chunkLoaded=function(){h.readyState===4&&(h.status<200||400<=h.status?this._chunkError():(this._start+=this._config.chunkSize||h.responseText.length,this._finished=!this._config.chunkSize||this._start>=(v=>(v=v.getResponseHeader("Content-Range"))!==null?parseInt(v.substring(v.lastIndexOf("/")+1)):-1)(h),this.parseChunk(h.responseText)))},this._chunkError=function(v){v=h.statusText||v,this._sendError(new Error(v))}}function d(f){(f=f||{}).chunkSize||(f.chunkSize=s.LocalChunkSize),c.call(this,f);var h,v,R=typeof FileReader<"u";this.stream=function(D){this._input=D,v=D.slice||D.webkitSlice||D.mozSlice,R?((h=new FileReader).onload=C(this._chunkLoaded,this),h.onerror=C(this._chunkError,this)):h=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var D=this._input,Y=(this._config.chunkSize&&(Y=Math.min(this._start+this._config.chunkSize,this._input.size),D=v.call(D,this._start,Y)),h.readAsText(D,this._config.encoding));R||this._chunkLoaded({target:{result:Y}})},this._chunkLoaded=function(D){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(D.target.result)},this._chunkError=function(){this._sendError(h.error)}}function y(f){var h;c.call(this,f=f||{}),this.stream=function(v){return h=v,this._nextChunk()},this._nextChunk=function(){var v,R;if(!this._finished)return v=this._config.chunkSize,h=v?(R=h.substring(0,v),h.substring(v)):(R=h,""),this._finished=!h,this.parseChunk(R)}}function O(f){c.call(this,f=f||{});var h=[],v=!0,R=!1;this.pause=function(){c.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){c.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(D){this._input=D,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){R&&h.length===1&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),h.length?this.parseChunk(h.shift()):v=!0},this._streamData=C(function(D){try{h.push(typeof D=="string"?D:D.toString(this._config.encoding)),v&&(v=!1,this._checkIsFinished(),this.parseChunk(h.shift()))}catch(Y){this._streamError(Y)}},this),this._streamError=C(function(D){this._streamCleanUp(),this._sendError(D)},this),this._streamEnd=C(function(){this._streamCleanUp(),R=!0,this._streamData("")},this),this._streamCleanUp=C(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function H(f){var h,v,R,D,Y=Math.pow(2,53),p=-Y,A=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,w=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,k=this,N=0,m=0,b=!1,M=!1,S=[],T={data:[],errors:[],meta:{}};function P(q){return f.skipEmptyLines==="greedy"?q.join("").trim()==="":q.length===1&&q[0].length===0}function Z(){if(T&&R&&(tt("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+s.DefaultDelimiter+"'"),R=!1),f.skipEmptyLines&&(T.data=T.data.filter(function(E){return!P(E)})),j()){let E=function(_,K){I(f.transformHeader)&&(_=f.transformHeader(_,K)),S.push(_)};if(T)if(Array.isArray(T.data[0])){for(var q=0;j()&&q<T.data.length;q++)T.data[q].forEach(E);T.data.splice(0,1)}else T.data.forEach(E)}function x(E,_){for(var K=f.header?{}:[],z=0;z<E.length;z++){var X=z,$=E[z],$=((nt,W)=>(et=>(f.dynamicTypingFunction&&f.dynamicTyping[et]===void 0&&(f.dynamicTyping[et]=f.dynamicTypingFunction(et)),(f.dynamicTyping[et]||f.dynamicTyping)===!0))(nt)?W==="true"||W==="TRUE"||W!=="false"&&W!=="FALSE"&&((et=>{if(A.test(et)&&(et=parseFloat(et),p<et&&et<Y))return 1})(W)?parseFloat(W):w.test(W)?new Date(W):W===""?null:W):W)(X=f.header?z>=S.length?"__parsed_extra":S[z]:X,$=f.transform?f.transform($,X):$);X==="__parsed_extra"?(K[X]=K[X]||[],K[X].push($)):K[X]=$}return f.header&&(z>S.length?tt("FieldMismatch","TooManyFields","Too many fields: expected "+S.length+" fields but parsed "+z,m+_):z<S.length&&tt("FieldMismatch","TooFewFields","Too few fields: expected "+S.length+" fields but parsed "+z,m+_)),K}var L;T&&(f.header||f.dynamicTyping||f.transform)&&(L=1,!T.data.length||Array.isArray(T.data[0])?(T.data=T.data.map(x),L=T.data.length):T.data=x(T.data,0),f.header&&T.meta&&(T.meta.fields=S),m+=L)}function j(){return f.header&&S.length===0}function tt(q,x,L,E){q={type:q,code:x,message:L},E!==void 0&&(q.row=E),T.errors.push(q)}I(f.step)&&(D=f.step,f.step=function(q){T=q,j()?Z():(Z(),T.data.length!==0&&(N+=q.data.length,f.preview&&N>f.preview?v.abort():(T.data=T.data[0],D(T,k))))}),this.parse=function(q,x,L){var E=f.quoteChar||'"',E=(f.newline||(f.newline=this.guessLineEndings(q,E)),R=!1,f.delimiter?I(f.delimiter)&&(f.delimiter=f.delimiter(q),T.meta.delimiter=f.delimiter):((E=((_,K,z,X,$)=>{var nt,W,et,Et;$=$||[",","	","|",";",s.RECORD_SEP,s.UNIT_SEP];for(var zt=0;zt<$.length;zt++){for(var pt,Kt=$[zt],at=0,gt=0,it=0,st=(et=void 0,new U({comments:X,delimiter:Kt,newline:K,preview:10}).parse(_)),_t=0;_t<st.data.length;_t++)z&&P(st.data[_t])?it++:(pt=st.data[_t].length,gt+=pt,et===void 0?et=pt:0<pt&&(at+=Math.abs(pt-et),et=pt));0<st.data.length&&(gt/=st.data.length-it),(W===void 0||at<=W)&&(Et===void 0||Et<gt)&&1.99<gt&&(W=at,nt=Kt,Et=gt)}return{successful:!!(f.delimiter=nt),bestDelimiter:nt}})(q,f.newline,f.skipEmptyLines,f.comments,f.delimitersToGuess)).successful?f.delimiter=E.bestDelimiter:(R=!0,f.delimiter=s.DefaultDelimiter),T.meta.delimiter=f.delimiter),V(f));return f.preview&&f.header&&E.preview++,h=q,v=new U(E),T=v.parse(h,x,L),Z(),b?{meta:{paused:!0}}:T||{meta:{paused:!1}}},this.paused=function(){return b},this.pause=function(){b=!0,v.abort(),h=I(f.chunk)?"":h.substring(v.getCharIndex())},this.resume=function(){k.streamer._halted?(b=!1,k.streamer.parseChunk(h,!0)):setTimeout(k.resume,3)},this.aborted=function(){return M},this.abort=function(){M=!0,v.abort(),T.meta.aborted=!0,I(f.complete)&&f.complete(T),h=""},this.guessLineEndings=function(_,E){_=_.substring(0,1048576);var E=new RegExp(B(E)+"([^]*?)"+B(E),"gm"),L=(_=_.replace(E,"")).split("\r"),E=_.split(`
`),_=1<E.length&&E[0].length<L[0].length;if(L.length===1||_)return`
`;for(var K=0,z=0;z<L.length;z++)L[z][0]===`
`&&K++;return K>=L.length/2?`\r
`:"\r"}}function B(f){return f.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function U(f){var h=(f=f||{}).delimiter,v=f.newline,R=f.comments,D=f.step,Y=f.preview,p=f.fastMode,A=null,w=!1,k=f.quoteChar==null?'"':f.quoteChar,N=k;if(f.escapeChar!==void 0&&(N=f.escapeChar),(typeof h!="string"||-1<s.BAD_DELIMITERS.indexOf(h))&&(h=","),R===h)throw new Error("Comment character same as delimiter");R===!0?R="#":(typeof R!="string"||-1<s.BAD_DELIMITERS.indexOf(R))&&(R=!1),v!==`
`&&v!=="\r"&&v!==`\r
`&&(v=`
`);var m=0,b=!1;this.parse=function(M,S,T){if(typeof M!="string")throw new Error("Input must be a string");var P=M.length,Z=h.length,j=v.length,tt=R.length,q=I(D),x=[],L=[],E=[],_=m=0;if(!M)return at();if(p||p!==!1&&M.indexOf(k)===-1){for(var K=M.split(v),z=0;z<K.length;z++){if(E=K[z],m+=E.length,z!==K.length-1)m+=v.length;else if(T)return at();if(!R||E.substring(0,tt)!==R){if(q){if(x=[],Et(E.split(h)),gt(),b)return at()}else Et(E.split(h));if(Y&&Y<=z)return x=x.slice(0,Y),at(!0)}}return at()}for(var X=M.indexOf(h,m),$=M.indexOf(v,m),nt=new RegExp(B(N)+B(k),"g"),W=M.indexOf(k,m);;)if(M[m]===k)for(W=m,m++;;){if((W=M.indexOf(k,W+1))===-1)return T||L.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:x.length,index:m}),pt();if(W===P-1)return pt(M.substring(m,W).replace(nt,k));if(k===N&&M[W+1]===N)W++;else if(k===N||W===0||M[W-1]!==N){X!==-1&&X<W+1&&(X=M.indexOf(h,W+1));var et=zt(($=$!==-1&&$<W+1?M.indexOf(v,W+1):$)===-1?X:Math.min(X,$));if(M.substr(W+1+et,Z)===h){E.push(M.substring(m,W).replace(nt,k)),M[m=W+1+et+Z]!==k&&(W=M.indexOf(k,m)),X=M.indexOf(h,m),$=M.indexOf(v,m);break}if(et=zt($),M.substring(W+1+et,W+1+et+j)===v){if(E.push(M.substring(m,W).replace(nt,k)),Kt(W+1+et+j),X=M.indexOf(h,m),W=M.indexOf(k,m),q&&(gt(),b))return at();if(Y&&x.length>=Y)return at(!0);break}L.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:x.length,index:m}),W++}}else if(R&&E.length===0&&M.substring(m,m+tt)===R){if($===-1)return at();m=$+j,$=M.indexOf(v,m),X=M.indexOf(h,m)}else if(X!==-1&&(X<$||$===-1))E.push(M.substring(m,X)),m=X+Z,X=M.indexOf(h,m);else{if($===-1)break;if(E.push(M.substring(m,$)),Kt($+j),q&&(gt(),b))return at();if(Y&&x.length>=Y)return at(!0)}return pt();function Et(it){x.push(it),_=m}function zt(it){var st=0;return st=it!==-1&&(it=M.substring(W+1,it))&&it.trim()===""?it.length:st}function pt(it){return T||(it===void 0&&(it=M.substring(m)),E.push(it),m=P,Et(E),q&&gt()),at()}function Kt(it){m=it,Et(E),E=[],$=M.indexOf(v,m)}function at(it){if(f.header&&!S&&x.length&&!w){var st=x[0],_t=Object.create(null),Oe=new Set(st);let bn=!1;for(let $t=0;$t<st.length;$t++){let mt=st[$t];if(_t[mt=I(f.transformHeader)?f.transformHeader(mt,$t):mt]){let Qt,kn=_t[mt];for(;Qt=mt+"_"+kn,kn++,Oe.has(Qt););Oe.add(Qt),st[$t]=Qt,_t[mt]++,bn=!0,(A=A===null?{}:A)[Qt]=mt}else _t[mt]=1,st[$t]=mt;Oe.add(mt)}bn&&console.warn("Duplicate headers found and renamed."),w=!0}return{data:x,errors:L,meta:{delimiter:h,linebreak:v,aborted:b,truncated:!!it,cursor:_+(S||0),renamedHeaders:A}}}function gt(){D(at()),x=[],L=[]}},this.abort=function(){b=!0},this.getCharIndex=function(){return m}}function J(f){var h=f.data,v=u[h.workerId],R=!1;if(h.error)v.userError(h.error,h.file);else if(h.results&&h.results.data){var D={abort:function(){R=!0,G(h.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:F,resume:F};if(I(v.userStep)){for(var Y=0;Y<h.results.data.length&&(v.userStep({data:h.results.data[Y],errors:h.results.errors,meta:h.results.meta},D),!R);Y++);delete h.results}else I(v.userChunk)&&(v.userChunk(h.results,D,h.file),delete h.results)}h.finished&&!R&&G(h.workerId,h.results)}function G(f,h){var v=u[f];I(v.userComplete)&&v.userComplete(h),v.terminate(),delete u[f]}function F(){throw new Error("Not implemented.")}function V(f){if(typeof f!="object"||f===null)return f;var h,v=Array.isArray(f)?[]:{};for(h in f)v[h]=V(f[h]);return v}function C(f,h){return function(){f.apply(h,arguments)}}function I(f){return typeof f=="function"}return s.parse=function(f,h){var v=(h=h||{}).dynamicTyping||!1;if(I(v)&&(h.dynamicTypingFunction=v,v={}),h.dynamicTyping=v,h.transform=!!I(h.transform)&&h.transform,!h.worker||!s.WORKERS_SUPPORTED)return v=null,s.NODE_STREAM_INPUT,typeof f=="string"?(f=(R=>R.charCodeAt(0)!==65279?R:R.slice(1))(f),v=new(h.download?g:y)(h)):f.readable===!0&&I(f.read)&&I(f.on)?v=new O(h):(r.File&&f instanceof File||f instanceof Object)&&(v=new d(h)),v.stream(f);(v=(()=>{var R;return!!s.WORKERS_SUPPORTED&&(R=(()=>{var D=r.URL||r.webkitURL||null,Y=n.toString();return s.BLOB_URL||(s.BLOB_URL=D.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",Y,")();"],{type:"text/javascript"})))})(),(R=new r.Worker(R)).onmessage=J,R.id=l++,u[R.id]=R)})()).userStep=h.step,v.userChunk=h.chunk,v.userComplete=h.complete,v.userError=h.error,h.step=I(h.step),h.chunk=I(h.chunk),h.complete=I(h.complete),h.error=I(h.error),delete h.worker,v.postMessage({input:f,config:h,workerId:v.id})},s.unparse=function(f,h){var v=!1,R=!0,D=",",Y=`\r
`,p='"',A=p+p,w=!1,k=null,N=!1,m=((()=>{if(typeof h=="object"){if(typeof h.delimiter!="string"||s.BAD_DELIMITERS.filter(function(S){return h.delimiter.indexOf(S)!==-1}).length||(D=h.delimiter),typeof h.quotes!="boolean"&&typeof h.quotes!="function"&&!Array.isArray(h.quotes)||(v=h.quotes),typeof h.skipEmptyLines!="boolean"&&typeof h.skipEmptyLines!="string"||(w=h.skipEmptyLines),typeof h.newline=="string"&&(Y=h.newline),typeof h.quoteChar=="string"&&(p=h.quoteChar),typeof h.header=="boolean"&&(R=h.header),Array.isArray(h.columns)){if(h.columns.length===0)throw new Error("Option columns is empty");k=h.columns}h.escapeChar!==void 0&&(A=h.escapeChar+p),h.escapeFormulae instanceof RegExp?N=h.escapeFormulae:typeof h.escapeFormulae=="boolean"&&h.escapeFormulae&&(N=/^[=+\-@\t\r].*$/)}})(),new RegExp(B(p),"g"));if(typeof f=="string"&&(f=JSON.parse(f)),Array.isArray(f)){if(!f.length||Array.isArray(f[0]))return b(null,f,w);if(typeof f[0]=="object")return b(k||Object.keys(f[0]),f,w)}else if(typeof f=="object")return typeof f.data=="string"&&(f.data=JSON.parse(f.data)),Array.isArray(f.data)&&(f.fields||(f.fields=f.meta&&f.meta.fields||k),f.fields||(f.fields=Array.isArray(f.data[0])?f.fields:typeof f.data[0]=="object"?Object.keys(f.data[0]):[]),Array.isArray(f.data[0])||typeof f.data[0]=="object"||(f.data=[f.data])),b(f.fields||[],f.data||[],w);throw new Error("Unable to serialize unrecognized input");function b(S,T,P){var Z="",j=(typeof S=="string"&&(S=JSON.parse(S)),typeof T=="string"&&(T=JSON.parse(T)),Array.isArray(S)&&0<S.length),tt=!Array.isArray(T[0]);if(j&&R){for(var q=0;q<S.length;q++)0<q&&(Z+=D),Z+=M(S[q],q);0<T.length&&(Z+=Y)}for(var x=0;x<T.length;x++){var L=(j?S:T[x]).length,E=!1,_=j?Object.keys(T[x]).length===0:T[x].length===0;if(P&&!j&&(E=P==="greedy"?T[x].join("").trim()==="":T[x].length===1&&T[x][0].length===0),P==="greedy"&&j){for(var K=[],z=0;z<L;z++){var X=tt?S[z]:z;K.push(T[x][X])}E=K.join("").trim()===""}if(!E){for(var $=0;$<L;$++){0<$&&!_&&(Z+=D);var nt=j&&tt?S[$]:$;Z+=M(T[x][nt],$)}x<T.length-1&&(!P||0<L&&!_)&&(Z+=Y)}}return Z}function M(S,T){var P,Z;return S==null?"":S.constructor===Date?JSON.stringify(S).slice(1,25):(Z=!1,N&&typeof S=="string"&&N.test(S)&&(S="'"+S,Z=!0),P=S.toString().replace(m,A),(Z=Z||v===!0||typeof v=="function"&&v(S,T)||Array.isArray(v)&&v[T]||((j,tt)=>{for(var q=0;q<tt.length;q++)if(-1<j.indexOf(tt[q]))return!0;return!1})(P,s.BAD_DELIMITERS)||-1<P.indexOf(D)||P.charAt(0)===" "||P.charAt(P.length-1)===" ")?p+P+p:P)}},s.RECORD_SEP="",s.UNIT_SEP="",s.BYTE_ORDER_MARK="\uFEFF",s.BAD_DELIMITERS=["\r",`
`,'"',s.BYTE_ORDER_MARK],s.WORKERS_SUPPORTED=!o&&!!r.Worker,s.NODE_STREAM_INPUT=1,s.LocalChunkSize=10485760,s.RemoteChunkSize=5242880,s.DefaultDelimiter=",",s.Parser=U,s.ParserHandle=H,s.NetworkStreamer=g,s.FileStreamer=d,s.StringStreamer=y,s.ReadableStreamStreamer=O,r.jQuery&&((i=r.jQuery).fn.parse=function(f){var h=f.config||{},v=[];return this.each(function(Y){if(!(i(this).prop("tagName").toUpperCase()==="INPUT"&&i(this).attr("type").toLowerCase()==="file"&&r.FileReader)||!this.files||this.files.length===0)return!0;for(var p=0;p<this.files.length;p++)v.push({file:this.files[p],inputElem:this,instanceConfig:i.extend({},h)})}),R(),this;function R(){if(v.length===0)I(f.complete)&&f.complete();else{var Y,p,A,w,k=v[0];if(I(f.before)){var N=f.before(k.file,k.inputElem);if(typeof N=="object"){if(N.action==="abort")return Y="AbortError",p=k.file,A=k.inputElem,w=N.reason,void(I(f.error)&&f.error({name:Y},p,A,w));if(N.action==="skip")return void D();typeof N.config=="object"&&(k.instanceConfig=i.extend(k.instanceConfig,N.config))}else if(N==="skip")return void D()}var m=k.instanceConfig.complete;k.instanceConfig.complete=function(b){I(m)&&m(b,k.file,k.inputElem),D()},s.parse(k.file,k.instanceConfig)}}function D(){v.splice(0,1),R()}}),a&&(r.onmessage=function(f){f=f.data,s.WORKER_ID===void 0&&f&&(s.WORKER_ID=f.workerId),typeof f.input=="string"?r.postMessage({workerId:s.WORKER_ID,results:s.parse(f.input,f.config),finished:!0}):(r.File&&f.input instanceof File||f.input instanceof Object)&&(f=s.parse(f.input,f.config))&&r.postMessage({workerId:s.WORKER_ID,results:f,finished:!0})}),(g.prototype=Object.create(c.prototype)).constructor=g,(d.prototype=Object.create(c.prototype)).constructor=d,(y.prototype=Object.create(y.prototype)).constructor=y,(O.prototype=Object.create(c.prototype)).constructor=O,s})}(ye)),ye.exports}var Jr=Qr();const jr=Zr(Jr);class ti{static parse(e){return jr.parse(e,{header:!0,skipEmptyLines:!0}).data.map(r=>({title:r.title,start:new Date(r.start),end:r.end?new Date(r.end):void 0,description:r.description,background:r.backgroundType?{type:r.backgroundType,source:r.backgroundSource,overlayColor:r.overlayColor}:void 0,metadata:r.metadata?JSON.parse(r.metadata):{}}))}}class ei{static parse(e){return(typeof e=="string"?JSON.parse(e):e).items.map(r=>({title:r.title,start:new Date(r.start),end:r.end?new Date(r.end):void 0,description:r.description,background:r.background,metadata:r.metadata}))}}class ni{static parse(e){const r=new DOMParser().parseFromString(e,"application/xml"),i=[];return r.querySelectorAll("item").forEach(o=>{const a=u=>o.querySelector(u)?.textContent||"";i.push({title:a("title"),start:new Date(a("start")),end:o.querySelector("end")?new Date(a("end")):void 0,description:a("description")})}),i}}class ri{static parse(e){const r=new DOMParser().parseFromString(e,"application/xml"),i=[];return r.querySelectorAll("listEvent event").forEach(o=>{const a=u=>o.querySelector(u)?.textContent?.trim()||"";i.push({title:a("title")||a("desc"),start:new Date(a("date")),end:void 0,description:a("desc"),metadata:{when:o.getAttribute("when"),type:o.getAttribute("type")}})}),i}}class he{static parse(e,n){switch(n){case"csv":return ti.parse(e);case"json":return ei.parse(e);case"xml":return ni.parse(e);case"tei":return ri.parse(e);default:throw new Error(`Unsupported data type: ${n}`)}}}function ve(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function ii(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function an(t){let e,n,r;t.length!==2?(e=ve,n=(u,l)=>ve(t(u),l),r=(u,l)=>t(u)-l):(e=t===ve||t===ii?t:oi,n=t,r=t);function i(u,l,s=0,c=u.length){if(s<c){if(e(l,l)!==0)return c;do{const g=s+c>>>1;n(u[g],l)<0?s=g+1:c=g}while(s<c)}return s}function o(u,l,s=0,c=u.length){if(s<c){if(e(l,l)!==0)return c;do{const g=s+c>>>1;n(u[g],l)<=0?s=g+1:c=g}while(s<c)}return s}function a(u,l,s=0,c=u.length){const g=i(u,l,s,c-1);return g>s&&r(u[g-1],l)>-r(u[g],l)?g-1:g}return{left:i,center:a,right:o}}function oi(){return 0}function ai(t){return t===null?NaN:+t}const si=an(ve),ui=si.right;an(ai).center;function cr(t,e){let n,r;for(const i of t)i!=null&&(n===void 0?i>=i&&(n=r=i):(n>i&&(n=i),r<i&&(r=i)));return[n,r]}class Tn extends Map{constructor(e,n=fi){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),e!=null)for(const[r,i]of e)this.set(r,i)}get(e){return super.get(Cn(this,e))}has(e){return super.has(Cn(this,e))}set(e,n){return super.set(li(this,e),n)}delete(e){return super.delete(ci(this,e))}}function Cn({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):n}function li({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):(t.set(r,n),n)}function ci({_intern:t,_key:e},n){const r=e(n);return t.has(r)&&(n=t.get(r),t.delete(r)),n}function fi(t){return t!==null&&typeof t=="object"?t.valueOf():t}const hi=Math.sqrt(50),di=Math.sqrt(10),pi=Math.sqrt(2);function fr(t,e,n){const r=(e-t)/Math.max(0,n),i=Math.floor(Math.log10(r)),o=r/Math.pow(10,i),a=o>=hi?10:o>=di?5:o>=pi?2:1;let u,l,s;return i<0?(s=Math.pow(10,-i)/a,u=Math.round(t*s),l=Math.round(e*s),u/s<t&&++u,l/s>e&&--l,s=-s):(s=Math.pow(10,i)*a,u=Math.round(t/s),l=Math.round(e/s),u*s<t&&++u,l*s>e&&--l),l<u&&.5<=n&&n<2?fr(t,e,n*2):[u,l,s]}function Sn(t,e,n){return e=+e,t=+t,n=+n,fr(t,e,n)[2]}function En(t,e,n){e=+e,t=+t,n=+n;const r=e<t,i=r?Sn(e,t,n):Sn(t,e,n);return(r?-1:1)*(i<0?1/-i:i)}function gi(t,e,n){t=+t,e=+e,n=(i=arguments.length)<2?(e=t,t=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((e-t)/n))|0,o=new Array(i);++r<i;)o[r]=t+r*n;return o}function mi(t){return t}var ze=1,$e=2,Ge=3,re=4,Dn=1e-6;function yi(t){return"translate("+t+",0)"}function vi(t){return"translate(0,"+t+")"}function _i(t){return e=>+t(e)}function wi(t,e){return e=Math.max(0,t.bandwidth()-e*2)/2,t.round()&&(e=Math.round(e)),n=>+t(n)+e}function xi(){return!this.__axis}function hr(t,e){var n=[],r=null,i=null,o=6,a=6,u=3,l=typeof window<"u"&&window.devicePixelRatio>1?0:.5,s=t===ze||t===re?-1:1,c=t===re||t===$e?"x":"y",g=t===ze||t===Ge?yi:vi;function d(y){var O=r??(e.ticks?e.ticks.apply(e,n):e.domain()),H=i??(e.tickFormat?e.tickFormat.apply(e,n):mi),B=Math.max(o,0)+u,U=e.range(),J=+U[0]+l,G=+U[U.length-1]+l,F=(e.bandwidth?wi:_i)(e.copy(),l),V=y.selection?y.selection():y,C=V.selectAll(".domain").data([null]),I=V.selectAll(".tick").data(O,e).order(),f=I.exit(),h=I.enter().append("g").attr("class","tick"),v=I.select("line"),R=I.select("text");C=C.merge(C.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),I=I.merge(h),v=v.merge(h.append("line").attr("stroke","currentColor").attr(c+"2",s*o)),R=R.merge(h.append("text").attr("fill","currentColor").attr(c,s*B).attr("dy",t===ze?"0em":t===Ge?"0.71em":"0.32em")),y!==V&&(C=C.transition(y),I=I.transition(y),v=v.transition(y),R=R.transition(y),f=f.transition(y).attr("opacity",Dn).attr("transform",function(D){return isFinite(D=F(D))?g(D+l):this.getAttribute("transform")}),h.attr("opacity",Dn).attr("transform",function(D){var Y=this.parentNode.__axis;return g((Y&&isFinite(Y=Y(D))?Y:F(D))+l)})),f.remove(),C.attr("d",t===re||t===$e?a?"M"+s*a+","+J+"H"+l+"V"+G+"H"+s*a:"M"+l+","+J+"V"+G:a?"M"+J+","+s*a+"V"+l+"H"+G+"V"+s*a:"M"+J+","+l+"H"+G),I.attr("opacity",1).attr("transform",function(D){return g(F(D)+l)}),v.attr(c+"2",s*o),R.attr(c,s*B).text(H),V.filter(xi).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",t===$e?"start":t===re?"end":"middle"),V.each(function(){this.__axis=F})}return d.scale=function(y){return arguments.length?(e=y,d):e},d.ticks=function(){return n=Array.from(arguments),d},d.tickArguments=function(y){return arguments.length?(n=y==null?[]:Array.from(y),d):n.slice()},d.tickValues=function(y){return arguments.length?(r=y==null?null:Array.from(y),d):r&&r.slice()},d.tickFormat=function(y){return arguments.length?(i=y,d):i},d.tickSize=function(y){return arguments.length?(o=a=+y,d):o},d.tickSizeInner=function(y){return arguments.length?(o=+y,d):o},d.tickSizeOuter=function(y){return arguments.length?(a=+y,d):a},d.tickPadding=function(y){return arguments.length?(u=+y,d):u},d.offset=function(y){return arguments.length?(l=+y,d):l},d}function An(t){return hr(Ge,t)}function Rn(t){return hr(re,t)}var bi={value:()=>{}};function sn(){for(var t=0,e=arguments.length,n={},r;t<e;++t){if(!(r=arguments[t]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new _e(n)}function _e(t){this._=t}function ki(t,e){return t.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!e.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}_e.prototype=sn.prototype={constructor:_e,on:function(t,e){var n=this._,r=ki(t+"",n),i,o=-1,a=r.length;if(arguments.length<2){for(;++o<a;)if((i=(t=r[o]).type)&&(i=Mi(n[i],t.name)))return i;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++o<a;)if(i=(t=r[o]).type)n[i]=Nn(n[i],t.name,e);else if(e==null)for(i in n)n[i]=Nn(n[i],t.name,null);return this},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new _e(t)},call:function(t,e){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,o;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(o=this._[t],r=0,i=o.length;r<i;++r)o[r].value.apply(e,n)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,o=r.length;i<o;++i)r[i].value.apply(e,n)}};function Mi(t,e){for(var n=0,r=t.length,i;n<r;++n)if((i=t[n]).name===e)return i.value}function Nn(t,e,n){for(var r=0,i=t.length;r<i;++r)if(t[r].name===e){t[r]=bi,t=t.slice(0,r).concat(t.slice(r+1));break}return n!=null&&t.push({name:e,value:n}),t}var Ze="http://www.w3.org/1999/xhtml";const Un={svg:"http://www.w3.org/2000/svg",xhtml:Ze,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Ue(t){var e=t+="",n=e.indexOf(":");return n>=0&&(e=t.slice(0,n))!=="xmlns"&&(t=t.slice(n+1)),Un.hasOwnProperty(e)?{space:Un[e],local:t}:t}function Ti(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===Ze&&e.documentElement.namespaceURI===Ze?e.createElement(t):e.createElementNS(n,t)}}function Ci(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function dr(t){var e=Ue(t);return(e.local?Ci:Ti)(e)}function Si(){}function un(t){return t==null?Si:function(){return this.querySelector(t)}}function Ei(t){typeof t!="function"&&(t=un(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var o=e[i],a=o.length,u=r[i]=new Array(a),l,s,c=0;c<a;++c)(l=o[c])&&(s=t.call(l,l.__data__,c,o))&&("__data__"in l&&(s.__data__=l.__data__),u[c]=s);return new lt(r,this._parents)}function Di(t){return t==null?[]:Array.isArray(t)?t:Array.from(t)}function Ai(){return[]}function pr(t){return t==null?Ai:function(){return this.querySelectorAll(t)}}function Ri(t){return function(){return Di(t.apply(this,arguments))}}function Ni(t){typeof t=="function"?t=Ri(t):t=pr(t);for(var e=this._groups,n=e.length,r=[],i=[],o=0;o<n;++o)for(var a=e[o],u=a.length,l,s=0;s<u;++s)(l=a[s])&&(r.push(t.call(l,l.__data__,s,a)),i.push(l));return new lt(r,i)}function gr(t){return function(){return this.matches(t)}}function mr(t){return function(e){return e.matches(t)}}var Ui=Array.prototype.find;function Fi(t){return function(){return Ui.call(this.children,t)}}function Ii(){return this.firstElementChild}function Li(t){return this.select(t==null?Ii:Fi(typeof t=="function"?t:mr(t)))}var Oi=Array.prototype.filter;function zi(){return Array.from(this.children)}function $i(t){return function(){return Oi.call(this.children,t)}}function Hi(t){return this.selectAll(t==null?zi:$i(typeof t=="function"?t:mr(t)))}function Yi(t){typeof t!="function"&&(t=gr(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var o=e[i],a=o.length,u=r[i]=[],l,s=0;s<a;++s)(l=o[s])&&t.call(l,l.__data__,s,o)&&u.push(l);return new lt(r,this._parents)}function yr(t){return new Array(t.length)}function Pi(){return new lt(this._enter||this._groups.map(yr),this._parents)}function ke(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}ke.prototype={constructor:ke,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function qi(t){return function(){return t}}function Wi(t,e,n,r,i,o){for(var a=0,u,l=e.length,s=o.length;a<s;++a)(u=e[a])?(u.__data__=o[a],r[a]=u):n[a]=new ke(t,o[a]);for(;a<l;++a)(u=e[a])&&(i[a]=u)}function Xi(t,e,n,r,i,o,a){var u,l,s=new Map,c=e.length,g=o.length,d=new Array(c),y;for(u=0;u<c;++u)(l=e[u])&&(d[u]=y=a.call(l,l.__data__,u,e)+"",s.has(y)?i[u]=l:s.set(y,l));for(u=0;u<g;++u)y=a.call(t,o[u],u,o)+"",(l=s.get(y))?(r[u]=l,l.__data__=o[u],s.delete(y)):n[u]=new ke(t,o[u]);for(u=0;u<c;++u)(l=e[u])&&s.get(d[u])===l&&(i[u]=l)}function Vi(t){return t.__data__}function Bi(t,e){if(!arguments.length)return Array.from(this,Vi);var n=e?Xi:Wi,r=this._parents,i=this._groups;typeof t!="function"&&(t=qi(t));for(var o=i.length,a=new Array(o),u=new Array(o),l=new Array(o),s=0;s<o;++s){var c=r[s],g=i[s],d=g.length,y=Gi(t.call(c,c&&c.__data__,s,r)),O=y.length,H=u[s]=new Array(O),B=a[s]=new Array(O),U=l[s]=new Array(d);n(c,g,H,B,U,y,e);for(var J=0,G=0,F,V;J<O;++J)if(F=H[J]){for(J>=G&&(G=J+1);!(V=B[G])&&++G<O;);F._next=V||null}}return a=new lt(a,r),a._enter=u,a._exit=l,a}function Gi(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function Zi(){return new lt(this._exit||this._groups.map(yr),this._parents)}function Ki(t,e,n){var r=this.enter(),i=this,o=this.exit();return typeof t=="function"?(r=t(r),r&&(r=r.selection())):r=r.append(t+""),e!=null&&(i=e(i),i&&(i=i.selection())),n==null?o.remove():n(o),r&&i?r.merge(i).order():i}function Qi(t){for(var e=t.selection?t.selection():t,n=this._groups,r=e._groups,i=n.length,o=r.length,a=Math.min(i,o),u=new Array(i),l=0;l<a;++l)for(var s=n[l],c=r[l],g=s.length,d=u[l]=new Array(g),y,O=0;O<g;++O)(y=s[O]||c[O])&&(d[O]=y);for(;l<i;++l)u[l]=n[l];return new lt(u,this._parents)}function Ji(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var r=t[e],i=r.length-1,o=r[i],a;--i>=0;)(a=r[i])&&(o&&a.compareDocumentPosition(o)^4&&o.parentNode.insertBefore(a,o),o=a);return this}function ji(t){t||(t=to);function e(g,d){return g&&d?t(g.__data__,d.__data__):!g-!d}for(var n=this._groups,r=n.length,i=new Array(r),o=0;o<r;++o){for(var a=n[o],u=a.length,l=i[o]=new Array(u),s,c=0;c<u;++c)(s=a[c])&&(l[c]=s);l.sort(e)}return new lt(i,this._parents).order()}function to(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function eo(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function no(){return Array.from(this)}function ro(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,o=r.length;i<o;++i){var a=r[i];if(a)return a}return null}function io(){let t=0;for(const e of this)++t;return t}function oo(){return!this.node()}function ao(t){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var i=e[n],o=0,a=i.length,u;o<a;++o)(u=i[o])&&t.call(u,u.__data__,o,i);return this}function so(t){return function(){this.removeAttribute(t)}}function uo(t){return function(){this.removeAttributeNS(t.space,t.local)}}function lo(t,e){return function(){this.setAttribute(t,e)}}function co(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function fo(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttribute(t):this.setAttribute(t,n)}}function ho(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function po(t,e){var n=Ue(t);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((e==null?n.local?uo:so:typeof e=="function"?n.local?ho:fo:n.local?co:lo)(n,e))}function vr(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function go(t){return function(){this.style.removeProperty(t)}}function mo(t,e,n){return function(){this.style.setProperty(t,e,n)}}function yo(t,e,n){return function(){var r=e.apply(this,arguments);r==null?this.style.removeProperty(t):this.style.setProperty(t,r,n)}}function vo(t,e,n){return arguments.length>1?this.each((e==null?go:typeof e=="function"?yo:mo)(t,e,n??"")):Xt(this.node(),t)}function Xt(t,e){return t.style.getPropertyValue(e)||vr(t).getComputedStyle(t,null).getPropertyValue(e)}function _o(t){return function(){delete this[t]}}function wo(t,e){return function(){this[t]=e}}function xo(t,e){return function(){var n=e.apply(this,arguments);n==null?delete this[t]:this[t]=n}}function bo(t,e){return arguments.length>1?this.each((e==null?_o:typeof e=="function"?xo:wo)(t,e)):this.node()[t]}function _r(t){return t.trim().split(/^|\s+/)}function ln(t){return t.classList||new wr(t)}function wr(t){this._node=t,this._names=_r(t.getAttribute("class")||"")}wr.prototype={add:function(t){var e=this._names.indexOf(t);e<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function xr(t,e){for(var n=ln(t),r=-1,i=e.length;++r<i;)n.add(e[r])}function br(t,e){for(var n=ln(t),r=-1,i=e.length;++r<i;)n.remove(e[r])}function ko(t){return function(){xr(this,t)}}function Mo(t){return function(){br(this,t)}}function To(t,e){return function(){(e.apply(this,arguments)?xr:br)(this,t)}}function Co(t,e){var n=_r(t+"");if(arguments.length<2){for(var r=ln(this.node()),i=-1,o=n.length;++i<o;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof e=="function"?To:e?ko:Mo)(n,e))}function So(){this.textContent=""}function Eo(t){return function(){this.textContent=t}}function Do(t){return function(){var e=t.apply(this,arguments);this.textContent=e??""}}function Ao(t){return arguments.length?this.each(t==null?So:(typeof t=="function"?Do:Eo)(t)):this.node().textContent}function Ro(){this.innerHTML=""}function No(t){return function(){this.innerHTML=t}}function Uo(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e??""}}function Fo(t){return arguments.length?this.each(t==null?Ro:(typeof t=="function"?Uo:No)(t)):this.node().innerHTML}function Io(){this.nextSibling&&this.parentNode.appendChild(this)}function Lo(){return this.each(Io)}function Oo(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function zo(){return this.each(Oo)}function $o(t){var e=typeof t=="function"?t:dr(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function Ho(){return null}function Yo(t,e){var n=typeof t=="function"?t:dr(t),r=e==null?Ho:typeof e=="function"?e:un(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function Po(){var t=this.parentNode;t&&t.removeChild(this)}function qo(){return this.each(Po)}function Wo(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function Xo(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function Vo(t){return this.select(t?Xo:Wo)}function Bo(t){return arguments.length?this.property("__data__",t):this.node().__data__}function Go(t){return function(e){t.call(this,e,this.__data__)}}function Zo(t){return t.trim().split(/^|\s+/).map(function(e){var n="",r=e.indexOf(".");return r>=0&&(n=e.slice(r+1),e=e.slice(0,r)),{type:e,name:n}})}function Ko(t){return function(){var e=this.__on;if(e){for(var n=0,r=-1,i=e.length,o;n<i;++n)o=e[n],(!t.type||o.type===t.type)&&o.name===t.name?this.removeEventListener(o.type,o.listener,o.options):e[++r]=o;++r?e.length=r:delete this.__on}}}function Qo(t,e,n){return function(){var r=this.__on,i,o=Go(e);if(r){for(var a=0,u=r.length;a<u;++a)if((i=r[a]).type===t.type&&i.name===t.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=o,i.options=n),i.value=e;return}}this.addEventListener(t.type,o,n),i={type:t.type,name:t.name,value:e,listener:o,options:n},r?r.push(i):this.__on=[i]}}function Jo(t,e,n){var r=Zo(t+""),i,o=r.length,a;if(arguments.length<2){var u=this.node().__on;if(u){for(var l=0,s=u.length,c;l<s;++l)for(i=0,c=u[l];i<o;++i)if((a=r[i]).type===c.type&&a.name===c.name)return c.value}return}for(u=e?Qo:Ko,i=0;i<o;++i)this.each(u(r[i],e,n));return this}function kr(t,e,n){var r=vr(t),i=r.CustomEvent;typeof i=="function"?i=new i(e,n):(i=r.document.createEvent("Event"),n?(i.initEvent(e,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(e,!1,!1)),t.dispatchEvent(i)}function jo(t,e){return function(){return kr(this,t,e)}}function ta(t,e){return function(){return kr(this,t,e.apply(this,arguments))}}function ea(t,e){return this.each((typeof e=="function"?ta:jo)(t,e))}function*na(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,o=r.length,a;i<o;++i)(a=r[i])&&(yield a)}var Mr=[null];function lt(t,e){this._groups=t,this._parents=e}function le(){return new lt([[document.documentElement]],Mr)}function ra(){return this}lt.prototype=le.prototype={constructor:lt,select:Ei,selectAll:Ni,selectChild:Li,selectChildren:Hi,filter:Yi,data:Bi,enter:Pi,exit:Zi,join:Ki,merge:Qi,selection:ra,order:Ji,sort:ji,call:eo,nodes:no,node:ro,size:io,empty:oo,each:ao,attr:po,style:vo,property:bo,classed:Co,text:Ao,html:Fo,raise:Lo,lower:zo,append:$o,insert:Yo,remove:qo,clone:Vo,datum:Bo,on:Jo,dispatch:ea,[Symbol.iterator]:na};function xt(t){return typeof t=="string"?new lt([[document.querySelector(t)]],[document.documentElement]):new lt([[t]],Mr)}function ia(t){let e;for(;e=t.sourceEvent;)t=e;return t}function At(t,e){if(t=ia(t),e===void 0&&(e=t.currentTarget),e){var n=e.ownerSVGElement||e;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=t.clientX,r.y=t.clientY,r=r.matrixTransform(e.getScreenCTM().inverse()),[r.x,r.y]}if(e.getBoundingClientRect){var i=e.getBoundingClientRect();return[t.clientX-i.left-e.clientLeft,t.clientY-i.top-e.clientTop]}}return[t.pageX,t.pageY]}const Ke={capture:!0,passive:!1};function Qe(t){t.preventDefault(),t.stopImmediatePropagation()}function oa(t){var e=t.document.documentElement,n=xt(t).on("dragstart.drag",Qe,Ke);"onselectstart"in e?n.on("selectstart.drag",Qe,Ke):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}function aa(t,e){var n=t.document.documentElement,r=xt(t).on("dragstart.drag",null);e&&(r.on("click.drag",Qe,Ke),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}function cn(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function Tr(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function ce(){}var ae=.7,Me=1/ae,Wt="\\s*([+-]?\\d+)\\s*",se="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",yt="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",sa=/^#([0-9a-f]{3,8})$/,ua=new RegExp(`^rgb\\(${Wt},${Wt},${Wt}\\)$`),la=new RegExp(`^rgb\\(${yt},${yt},${yt}\\)$`),ca=new RegExp(`^rgba\\(${Wt},${Wt},${Wt},${se}\\)$`),fa=new RegExp(`^rgba\\(${yt},${yt},${yt},${se}\\)$`),ha=new RegExp(`^hsl\\(${se},${yt},${yt}\\)$`),da=new RegExp(`^hsla\\(${se},${yt},${yt},${se}\\)$`),Fn={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};cn(ce,Ut,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:In,formatHex:In,formatHex8:pa,formatHsl:ga,formatRgb:Ln,toString:Ln});function In(){return this.rgb().formatHex()}function pa(){return this.rgb().formatHex8()}function ga(){return Cr(this).formatHsl()}function Ln(){return this.rgb().formatRgb()}function Ut(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=sa.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?On(e):n===3?new ut(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?de(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?de(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=ua.exec(t))?new ut(e[1],e[2],e[3],1):(e=la.exec(t))?new ut(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=ca.exec(t))?de(e[1],e[2],e[3],e[4]):(e=fa.exec(t))?de(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=ha.exec(t))?Hn(e[1],e[2]/100,e[3]/100,1):(e=da.exec(t))?Hn(e[1],e[2]/100,e[3]/100,e[4]):Fn.hasOwnProperty(t)?On(Fn[t]):t==="transparent"?new ut(NaN,NaN,NaN,0):null}function On(t){return new ut(t>>16&255,t>>8&255,t&255,1)}function de(t,e,n,r){return r<=0&&(t=e=n=NaN),new ut(t,e,n,r)}function ma(t){return t instanceof ce||(t=Ut(t)),t?(t=t.rgb(),new ut(t.r,t.g,t.b,t.opacity)):new ut}function Je(t,e,n,r){return arguments.length===1?ma(t):new ut(t,e,n,r??1)}function ut(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}cn(ut,Je,Tr(ce,{brighter(t){return t=t==null?Me:Math.pow(Me,t),new ut(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?ae:Math.pow(ae,t),new ut(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new ut(Nt(this.r),Nt(this.g),Nt(this.b),Te(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:zn,formatHex:zn,formatHex8:ya,formatRgb:$n,toString:$n}));function zn(){return`#${Rt(this.r)}${Rt(this.g)}${Rt(this.b)}`}function ya(){return`#${Rt(this.r)}${Rt(this.g)}${Rt(this.b)}${Rt((isNaN(this.opacity)?1:this.opacity)*255)}`}function $n(){const t=Te(this.opacity);return`${t===1?"rgb(":"rgba("}${Nt(this.r)}, ${Nt(this.g)}, ${Nt(this.b)}${t===1?")":`, ${t})`}`}function Te(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function Nt(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function Rt(t){return t=Nt(t),(t<16?"0":"")+t.toString(16)}function Hn(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new ht(t,e,n,r)}function Cr(t){if(t instanceof ht)return new ht(t.h,t.s,t.l,t.opacity);if(t instanceof ce||(t=Ut(t)),!t)return new ht;if(t instanceof ht)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),o=Math.max(e,n,r),a=NaN,u=o-i,l=(o+i)/2;return u?(e===o?a=(n-r)/u+(n<r)*6:n===o?a=(r-e)/u+2:a=(e-n)/u+4,u/=l<.5?o+i:2-o-i,a*=60):u=l>0&&l<1?0:a,new ht(a,u,l,t.opacity)}function va(t,e,n,r){return arguments.length===1?Cr(t):new ht(t,e,n,r??1)}function ht(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}cn(ht,va,Tr(ce,{brighter(t){return t=t==null?Me:Math.pow(Me,t),new ht(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?ae:Math.pow(ae,t),new ht(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new ut(He(t>=240?t-240:t+120,i,r),He(t,i,r),He(t<120?t+240:t-120,i,r),this.opacity)},clamp(){return new ht(Yn(this.h),pe(this.s),pe(this.l),Te(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=Te(this.opacity);return`${t===1?"hsl(":"hsla("}${Yn(this.h)}, ${pe(this.s)*100}%, ${pe(this.l)*100}%${t===1?")":`, ${t})`}`}}));function Yn(t){return t=(t||0)%360,t<0?t+360:t}function pe(t){return Math.max(0,Math.min(1,t||0))}function He(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const fn=t=>()=>t;function _a(t,e){return function(n){return t+n*e}}function wa(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function xa(t){return(t=+t)==1?Sr:function(e,n){return n-e?wa(e,n,t):fn(isNaN(e)?n:e)}}function Sr(t,e){var n=e-t;return n?_a(t,n):fn(isNaN(t)?e:t)}const Ce=function t(e){var n=xa(e);function r(i,o){var a=n((i=Je(i)).r,(o=Je(o)).r),u=n(i.g,o.g),l=n(i.b,o.b),s=Sr(i.opacity,o.opacity);return function(c){return i.r=a(c),i.g=u(c),i.b=l(c),i.opacity=s(c),i+""}}return r.gamma=t,r}(1);function ba(t,e){e||(e=[]);var n=t?Math.min(e.length,t.length):0,r=e.slice(),i;return function(o){for(i=0;i<n;++i)r[i]=t[i]*(1-o)+e[i]*o;return r}}function ka(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function Ma(t,e){var n=e?e.length:0,r=t?Math.min(n,t.length):0,i=new Array(r),o=new Array(n),a;for(a=0;a<r;++a)i[a]=hn(t[a],e[a]);for(;a<n;++a)o[a]=e[a];return function(u){for(a=0;a<r;++a)o[a]=i[a](u);return o}}function Ta(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}}function ft(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function Ca(t,e){var n={},r={},i;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(i in e)i in t?n[i]=hn(t[i],e[i]):r[i]=e[i];return function(o){for(i in n)r[i]=n[i](o);return r}}var je=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Ye=new RegExp(je.source,"g");function Sa(t){return function(){return t}}function Ea(t){return function(e){return t(e)+""}}function Er(t,e){var n=je.lastIndex=Ye.lastIndex=0,r,i,o,a=-1,u=[],l=[];for(t=t+"",e=e+"";(r=je.exec(t))&&(i=Ye.exec(e));)(o=i.index)>n&&(o=e.slice(n,o),u[a]?u[a]+=o:u[++a]=o),(r=r[0])===(i=i[0])?u[a]?u[a]+=i:u[++a]=i:(u[++a]=null,l.push({i:a,x:ft(r,i)})),n=Ye.lastIndex;return n<e.length&&(o=e.slice(n),u[a]?u[a]+=o:u[++a]=o),u.length<2?l[0]?Ea(l[0].x):Sa(e):(e=l.length,function(s){for(var c=0,g;c<e;++c)u[(g=l[c]).i]=g.x(s);return u.join("")})}function hn(t,e){var n=typeof e,r;return e==null||n==="boolean"?fn(e):(n==="number"?ft:n==="string"?(r=Ut(e))?(e=r,Ce):Er:e instanceof Ut?Ce:e instanceof Date?Ta:ka(e)?ba:Array.isArray(e)?Ma:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?Ca:ft)(t,e)}function Da(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}var Pn=180/Math.PI,tn={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Dr(t,e,n,r,i,o){var a,u,l;return(a=Math.sqrt(t*t+e*e))&&(t/=a,e/=a),(l=t*n+e*r)&&(n-=t*l,r-=e*l),(u=Math.sqrt(n*n+r*r))&&(n/=u,r/=u,l/=u),t*r<e*n&&(t=-t,e=-e,l=-l,a=-a),{translateX:i,translateY:o,rotate:Math.atan2(e,t)*Pn,skewX:Math.atan(l)*Pn,scaleX:a,scaleY:u}}var ge;function Aa(t){const e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?tn:Dr(e.a,e.b,e.c,e.d,e.e,e.f)}function Ra(t){return t==null||(ge||(ge=document.createElementNS("http://www.w3.org/2000/svg","g")),ge.setAttribute("transform",t),!(t=ge.transform.baseVal.consolidate()))?tn:(t=t.matrix,Dr(t.a,t.b,t.c,t.d,t.e,t.f))}function Ar(t,e,n,r){function i(s){return s.length?s.pop()+" ":""}function o(s,c,g,d,y,O){if(s!==g||c!==d){var H=y.push("translate(",null,e,null,n);O.push({i:H-4,x:ft(s,g)},{i:H-2,x:ft(c,d)})}else(g||d)&&y.push("translate("+g+e+d+n)}function a(s,c,g,d){s!==c?(s-c>180?c+=360:c-s>180&&(s+=360),d.push({i:g.push(i(g)+"rotate(",null,r)-2,x:ft(s,c)})):c&&g.push(i(g)+"rotate("+c+r)}function u(s,c,g,d){s!==c?d.push({i:g.push(i(g)+"skewX(",null,r)-2,x:ft(s,c)}):c&&g.push(i(g)+"skewX("+c+r)}function l(s,c,g,d,y,O){if(s!==g||c!==d){var H=y.push(i(y)+"scale(",null,",",null,")");O.push({i:H-4,x:ft(s,g)},{i:H-2,x:ft(c,d)})}else(g!==1||d!==1)&&y.push(i(y)+"scale("+g+","+d+")")}return function(s,c){var g=[],d=[];return s=t(s),c=t(c),o(s.translateX,s.translateY,c.translateX,c.translateY,g,d),a(s.rotate,c.rotate,g,d),u(s.skewX,c.skewX,g,d),l(s.scaleX,s.scaleY,c.scaleX,c.scaleY,g,d),s=c=null,function(y){for(var O=-1,H=d.length,B;++O<H;)g[(B=d[O]).i]=B.x(y);return g.join("")}}}var Na=Ar(Aa,"px, ","px)","deg)"),Ua=Ar(Ra,", ",")",")"),Fa=1e-12;function qn(t){return((t=Math.exp(t))+1/t)/2}function Ia(t){return((t=Math.exp(t))-1/t)/2}function La(t){return((t=Math.exp(2*t))-1)/(t+1)}const Oa=function t(e,n,r){function i(o,a){var u=o[0],l=o[1],s=o[2],c=a[0],g=a[1],d=a[2],y=c-u,O=g-l,H=y*y+O*O,B,U;if(H<Fa)U=Math.log(d/s)/e,B=function(I){return[u+I*y,l+I*O,s*Math.exp(e*I*U)]};else{var J=Math.sqrt(H),G=(d*d-s*s+r*H)/(2*s*n*J),F=(d*d-s*s-r*H)/(2*d*n*J),V=Math.log(Math.sqrt(G*G+1)-G),C=Math.log(Math.sqrt(F*F+1)-F);U=(C-V)/e,B=function(I){var f=I*U,h=qn(V),v=s/(n*J)*(h*La(e*f+V)-Ia(V));return[u+v*y,l+v*O,s*h/qn(e*f+V)]}}return B.duration=U*1e3*e/Math.SQRT2,B}return i.rho=function(o){var a=Math.max(.001,+o),u=a*a,l=u*u;return t(a,u,l)},i}(Math.SQRT2,2,4);var Vt=0,ie=0,Jt=0,Rr=1e3,Se,oe,Ee=0,Ft=0,Fe=0,ue=typeof performance=="object"&&performance.now?performance:Date,Nr=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function dn(){return Ft||(Nr(za),Ft=ue.now()+Fe)}function za(){Ft=0}function De(){this._call=this._time=this._next=null}De.prototype=Ur.prototype={constructor:De,restart:function(t,e,n){if(typeof t!="function")throw new TypeError("callback is not a function");n=(n==null?dn():+n)+(e==null?0:+e),!this._next&&oe!==this&&(oe?oe._next=this:Se=this,oe=this),this._call=t,this._time=n,en()},stop:function(){this._call&&(this._call=null,this._time=1/0,en())}};function Ur(t,e,n){var r=new De;return r.restart(t,e,n),r}function $a(){dn(),++Vt;for(var t=Se,e;t;)(e=Ft-t._time)>=0&&t._call.call(void 0,e),t=t._next;--Vt}function Wn(){Ft=(Ee=ue.now())+Fe,Vt=ie=0;try{$a()}finally{Vt=0,Ya(),Ft=0}}function Ha(){var t=ue.now(),e=t-Ee;e>Rr&&(Fe-=e,Ee=t)}function Ya(){for(var t,e=Se,n,r=1/0;e;)e._call?(r>e._time&&(r=e._time),t=e,e=e._next):(n=e._next,e._next=null,e=t?t._next=n:Se=n);oe=t,en(r)}function en(t){if(!Vt){ie&&(ie=clearTimeout(ie));var e=t-Ft;e>24?(t<1/0&&(ie=setTimeout(Wn,t-ue.now()-Fe)),Jt&&(Jt=clearInterval(Jt))):(Jt||(Ee=ue.now(),Jt=setInterval(Ha,Rr)),Vt=1,Nr(Wn))}}function Xn(t,e,n){var r=new De;return e=e==null?0:+e,r.restart(i=>{r.stop(),t(i+e)},e,n),r}var Pa=sn("start","end","cancel","interrupt"),qa=[],Fr=0,Vn=1,nn=2,we=3,Bn=4,rn=5,xe=6;function Ie(t,e,n,r,i,o){var a=t.__transition;if(!a)t.__transition={};else if(n in a)return;Wa(t,n,{name:e,index:r,group:i,on:Pa,tween:qa,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:Fr})}function pn(t,e){var n=dt(t,e);if(n.state>Fr)throw new Error("too late; already scheduled");return n}function vt(t,e){var n=dt(t,e);if(n.state>we)throw new Error("too late; already running");return n}function dt(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}function Wa(t,e,n){var r=t.__transition,i;r[e]=n,n.timer=Ur(o,0,n.time);function o(s){n.state=Vn,n.timer.restart(a,n.delay,n.time),n.delay<=s&&a(s-n.delay)}function a(s){var c,g,d,y;if(n.state!==Vn)return l();for(c in r)if(y=r[c],y.name===n.name){if(y.state===we)return Xn(a);y.state===Bn?(y.state=xe,y.timer.stop(),y.on.call("interrupt",t,t.__data__,y.index,y.group),delete r[c]):+c<e&&(y.state=xe,y.timer.stop(),y.on.call("cancel",t,t.__data__,y.index,y.group),delete r[c])}if(Xn(function(){n.state===we&&(n.state=Bn,n.timer.restart(u,n.delay,n.time),u(s))}),n.state=nn,n.on.call("start",t,t.__data__,n.index,n.group),n.state===nn){for(n.state=we,i=new Array(d=n.tween.length),c=0,g=-1;c<d;++c)(y=n.tween[c].value.call(t,t.__data__,n.index,n.group))&&(i[++g]=y);i.length=g+1}}function u(s){for(var c=s<n.duration?n.ease.call(null,s/n.duration):(n.timer.restart(l),n.state=rn,1),g=-1,d=i.length;++g<d;)i[g].call(t,c);n.state===rn&&(n.on.call("end",t,t.__data__,n.index,n.group),l())}function l(){n.state=xe,n.timer.stop(),delete r[e];for(var s in r)return;delete t.__transition}}function be(t,e){var n=t.__transition,r,i,o=!0,a;if(n){e=e==null?null:e+"";for(a in n){if((r=n[a]).name!==e){o=!1;continue}i=r.state>nn&&r.state<rn,r.state=xe,r.timer.stop(),r.on.call(i?"interrupt":"cancel",t,t.__data__,r.index,r.group),delete n[a]}o&&delete t.__transition}}function Xa(t){return this.each(function(){be(this,t)})}function Va(t,e){var n,r;return function(){var i=vt(this,t),o=i.tween;if(o!==n){r=n=o;for(var a=0,u=r.length;a<u;++a)if(r[a].name===e){r=r.slice(),r.splice(a,1);break}}i.tween=r}}function Ba(t,e,n){var r,i;if(typeof n!="function")throw new Error;return function(){var o=vt(this,t),a=o.tween;if(a!==r){i=(r=a).slice();for(var u={name:e,value:n},l=0,s=i.length;l<s;++l)if(i[l].name===e){i[l]=u;break}l===s&&i.push(u)}o.tween=i}}function Ga(t,e){var n=this._id;if(t+="",arguments.length<2){for(var r=dt(this.node(),n).tween,i=0,o=r.length,a;i<o;++i)if((a=r[i]).name===t)return a.value;return null}return this.each((e==null?Va:Ba)(n,t,e))}function gn(t,e,n){var r=t._id;return t.each(function(){var i=vt(this,r);(i.value||(i.value={}))[e]=n.apply(this,arguments)}),function(i){return dt(i,r).value[e]}}function Ir(t,e){var n;return(typeof e=="number"?ft:e instanceof Ut?Ce:(n=Ut(e))?(e=n,Ce):Er)(t,e)}function Za(t){return function(){this.removeAttribute(t)}}function Ka(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Qa(t,e,n){var r,i=n+"",o;return function(){var a=this.getAttribute(t);return a===i?null:a===r?o:o=e(r=a,n)}}function Ja(t,e,n){var r,i=n+"",o;return function(){var a=this.getAttributeNS(t.space,t.local);return a===i?null:a===r?o:o=e(r=a,n)}}function ja(t,e,n){var r,i,o;return function(){var a,u=n(this),l;return u==null?void this.removeAttribute(t):(a=this.getAttribute(t),l=u+"",a===l?null:a===r&&l===i?o:(i=l,o=e(r=a,u)))}}function ts(t,e,n){var r,i,o;return function(){var a,u=n(this),l;return u==null?void this.removeAttributeNS(t.space,t.local):(a=this.getAttributeNS(t.space,t.local),l=u+"",a===l?null:a===r&&l===i?o:(i=l,o=e(r=a,u)))}}function es(t,e){var n=Ue(t),r=n==="transform"?Ua:Ir;return this.attrTween(t,typeof e=="function"?(n.local?ts:ja)(n,r,gn(this,"attr."+t,e)):e==null?(n.local?Ka:Za)(n):(n.local?Ja:Qa)(n,r,e))}function ns(t,e){return function(n){this.setAttribute(t,e.call(this,n))}}function rs(t,e){return function(n){this.setAttributeNS(t.space,t.local,e.call(this,n))}}function is(t,e){var n,r;function i(){var o=e.apply(this,arguments);return o!==r&&(n=(r=o)&&rs(t,o)),n}return i._value=e,i}function os(t,e){var n,r;function i(){var o=e.apply(this,arguments);return o!==r&&(n=(r=o)&&ns(t,o)),n}return i._value=e,i}function as(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(e==null)return this.tween(n,null);if(typeof e!="function")throw new Error;var r=Ue(t);return this.tween(n,(r.local?is:os)(r,e))}function ss(t,e){return function(){pn(this,t).delay=+e.apply(this,arguments)}}function us(t,e){return e=+e,function(){pn(this,t).delay=e}}function ls(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?ss:us)(e,t)):dt(this.node(),e).delay}function cs(t,e){return function(){vt(this,t).duration=+e.apply(this,arguments)}}function fs(t,e){return e=+e,function(){vt(this,t).duration=e}}function hs(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?cs:fs)(e,t)):dt(this.node(),e).duration}function ds(t,e){if(typeof e!="function")throw new Error;return function(){vt(this,t).ease=e}}function ps(t){var e=this._id;return arguments.length?this.each(ds(e,t)):dt(this.node(),e).ease}function gs(t,e){return function(){var n=e.apply(this,arguments);if(typeof n!="function")throw new Error;vt(this,t).ease=n}}function ms(t){if(typeof t!="function")throw new Error;return this.each(gs(this._id,t))}function ys(t){typeof t!="function"&&(t=gr(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var o=e[i],a=o.length,u=r[i]=[],l,s=0;s<a;++s)(l=o[s])&&t.call(l,l.__data__,s,o)&&u.push(l);return new Tt(r,this._parents,this._name,this._id)}function vs(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,r=e.length,i=n.length,o=Math.min(r,i),a=new Array(r),u=0;u<o;++u)for(var l=e[u],s=n[u],c=l.length,g=a[u]=new Array(c),d,y=0;y<c;++y)(d=l[y]||s[y])&&(g[y]=d);for(;u<r;++u)a[u]=e[u];return new Tt(a,this._parents,this._name,this._id)}function _s(t){return(t+"").trim().split(/^|\s+/).every(function(e){var n=e.indexOf(".");return n>=0&&(e=e.slice(0,n)),!e||e==="start"})}function ws(t,e,n){var r,i,o=_s(e)?pn:vt;return function(){var a=o(this,t),u=a.on;u!==r&&(i=(r=u).copy()).on(e,n),a.on=i}}function xs(t,e){var n=this._id;return arguments.length<2?dt(this.node(),n).on.on(t):this.each(ws(n,t,e))}function bs(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}}function ks(){return this.on("end.remove",bs(this._id))}function Ms(t){var e=this._name,n=this._id;typeof t!="function"&&(t=un(t));for(var r=this._groups,i=r.length,o=new Array(i),a=0;a<i;++a)for(var u=r[a],l=u.length,s=o[a]=new Array(l),c,g,d=0;d<l;++d)(c=u[d])&&(g=t.call(c,c.__data__,d,u))&&("__data__"in c&&(g.__data__=c.__data__),s[d]=g,Ie(s[d],e,n,d,s,dt(c,n)));return new Tt(o,this._parents,e,n)}function Ts(t){var e=this._name,n=this._id;typeof t!="function"&&(t=pr(t));for(var r=this._groups,i=r.length,o=[],a=[],u=0;u<i;++u)for(var l=r[u],s=l.length,c,g=0;g<s;++g)if(c=l[g]){for(var d=t.call(c,c.__data__,g,l),y,O=dt(c,n),H=0,B=d.length;H<B;++H)(y=d[H])&&Ie(y,e,n,H,d,O);o.push(d),a.push(c)}return new Tt(o,a,e,n)}var Cs=le.prototype.constructor;function Ss(){return new Cs(this._groups,this._parents)}function Es(t,e){var n,r,i;return function(){var o=Xt(this,t),a=(this.style.removeProperty(t),Xt(this,t));return o===a?null:o===n&&a===r?i:i=e(n=o,r=a)}}function Lr(t){return function(){this.style.removeProperty(t)}}function Ds(t,e,n){var r,i=n+"",o;return function(){var a=Xt(this,t);return a===i?null:a===r?o:o=e(r=a,n)}}function As(t,e,n){var r,i,o;return function(){var a=Xt(this,t),u=n(this),l=u+"";return u==null&&(l=u=(this.style.removeProperty(t),Xt(this,t))),a===l?null:a===r&&l===i?o:(i=l,o=e(r=a,u))}}function Rs(t,e){var n,r,i,o="style."+e,a="end."+o,u;return function(){var l=vt(this,t),s=l.on,c=l.value[o]==null?u||(u=Lr(e)):void 0;(s!==n||i!==c)&&(r=(n=s).copy()).on(a,i=c),l.on=r}}function Ns(t,e,n){var r=(t+="")=="transform"?Na:Ir;return e==null?this.styleTween(t,Es(t,r)).on("end.style."+t,Lr(t)):typeof e=="function"?this.styleTween(t,As(t,r,gn(this,"style."+t,e))).each(Rs(this._id,t)):this.styleTween(t,Ds(t,r,e),n).on("end.style."+t,null)}function Us(t,e,n){return function(r){this.style.setProperty(t,e.call(this,r),n)}}function Fs(t,e,n){var r,i;function o(){var a=e.apply(this,arguments);return a!==i&&(r=(i=a)&&Us(t,a,n)),r}return o._value=e,o}function Is(t,e,n){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(e==null)return this.tween(r,null);if(typeof e!="function")throw new Error;return this.tween(r,Fs(t,e,n??""))}function Ls(t){return function(){this.textContent=t}}function Os(t){return function(){var e=t(this);this.textContent=e??""}}function zs(t){return this.tween("text",typeof t=="function"?Os(gn(this,"text",t)):Ls(t==null?"":t+""))}function $s(t){return function(e){this.textContent=t.call(this,e)}}function Hs(t){var e,n;function r(){var i=t.apply(this,arguments);return i!==n&&(e=(n=i)&&$s(i)),e}return r._value=t,r}function Ys(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(t==null)return this.tween(e,null);if(typeof t!="function")throw new Error;return this.tween(e,Hs(t))}function Ps(){for(var t=this._name,e=this._id,n=Or(),r=this._groups,i=r.length,o=0;o<i;++o)for(var a=r[o],u=a.length,l,s=0;s<u;++s)if(l=a[s]){var c=dt(l,e);Ie(l,t,n,s,a,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new Tt(r,this._parents,t,n)}function qs(){var t,e,n=this,r=n._id,i=n.size();return new Promise(function(o,a){var u={value:a},l={value:function(){--i===0&&o()}};n.each(function(){var s=vt(this,r),c=s.on;c!==t&&(e=(t=c).copy(),e._.cancel.push(u),e._.interrupt.push(u),e._.end.push(l)),s.on=e}),i===0&&o()})}var Ws=0;function Tt(t,e,n,r){this._groups=t,this._parents=e,this._name=n,this._id=r}function Or(){return++Ws}var wt=le.prototype;Tt.prototype={constructor:Tt,select:Ms,selectAll:Ts,selectChild:wt.selectChild,selectChildren:wt.selectChildren,filter:ys,merge:vs,selection:Ss,transition:Ps,call:wt.call,nodes:wt.nodes,node:wt.node,size:wt.size,empty:wt.empty,each:wt.each,on:xs,attr:es,attrTween:as,style:Ns,styleTween:Is,text:zs,textTween:Ys,remove:ks,tween:Ga,delay:ls,duration:hs,ease:ps,easeVarying:ms,end:qs,[Symbol.iterator]:wt[Symbol.iterator]};function Xs(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var Vs={time:null,delay:0,duration:250,ease:Xs};function Bs(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return n}function Gs(t){var e,n;t instanceof Tt?(e=t._id,t=t._name):(e=Or(),(n=Vs).time=dn(),t=t==null?null:t+"");for(var r=this._groups,i=r.length,o=0;o<i;++o)for(var a=r[o],u=a.length,l,s=0;s<u;++s)(l=a[s])&&Ie(l,t,e,s,a,n||Bs(l,e));return new Tt(r,this._parents,t,e)}le.prototype.interrupt=Xa;le.prototype.transition=Gs;function mn(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}const Gn=Symbol("implicit");function zr(){var t=new Tn,e=[],n=[],r=Gn;function i(o){let a=t.get(o);if(a===void 0){if(r!==Gn)return r;t.set(o,a=e.push(o)-1)}return n[a%n.length]}return i.domain=function(o){if(!arguments.length)return e.slice();e=[],t=new Tn;for(const a of o)t.has(a)||t.set(a,e.push(a)-1);return i},i.range=function(o){return arguments.length?(n=Array.from(o),i):n.slice()},i.unknown=function(o){return arguments.length?(r=o,i):r},i.copy=function(){return zr(e,n).unknown(r)},mn.apply(i,arguments),i}function $r(){var t=zr().unknown(void 0),e=t.domain,n=t.range,r=0,i=1,o,a,u=!1,l=0,s=0,c=.5;delete t.unknown;function g(){var d=e().length,y=i<r,O=y?i:r,H=y?r:i;o=(H-O)/Math.max(1,d-l+s*2),u&&(o=Math.floor(o)),O+=(H-O-o*(d-l))*c,a=o*(1-l),u&&(O=Math.round(O),a=Math.round(a));var B=gi(d).map(function(U){return O+o*U});return n(y?B.reverse():B)}return t.domain=function(d){return arguments.length?(e(d),g()):e()},t.range=function(d){return arguments.length?([r,i]=d,r=+r,i=+i,g()):[r,i]},t.rangeRound=function(d){return[r,i]=d,r=+r,i=+i,u=!0,g()},t.bandwidth=function(){return a},t.step=function(){return o},t.round=function(d){return arguments.length?(u=!!d,g()):u},t.padding=function(d){return arguments.length?(l=Math.min(1,s=+d),g()):l},t.paddingInner=function(d){return arguments.length?(l=Math.min(1,d),g()):l},t.paddingOuter=function(d){return arguments.length?(s=+d,g()):s},t.align=function(d){return arguments.length?(c=Math.max(0,Math.min(1,d)),g()):c},t.copy=function(){return $r(e(),[r,i]).round(u).paddingInner(l).paddingOuter(s).align(c)},mn.apply(g(),arguments)}function Hr(t){var e=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return Hr(e())},t}function Zn(){return Hr($r.apply(null,arguments).paddingInner(1))}function Zs(t){return function(){return t}}function Ks(t){return+t}var Kn=[0,1];function Yt(t){return t}function on(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:Zs(isNaN(e)?NaN:.5)}function Qs(t,e){var n;return t>e&&(n=t,t=e,e=n),function(r){return Math.max(t,Math.min(e,r))}}function Js(t,e,n){var r=t[0],i=t[1],o=e[0],a=e[1];return i<r?(r=on(i,r),o=n(a,o)):(r=on(r,i),o=n(o,a)),function(u){return o(r(u))}}function js(t,e,n){var r=Math.min(t.length,e.length)-1,i=new Array(r),o=new Array(r),a=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++a<r;)i[a]=on(t[a],t[a+1]),o[a]=n(e[a],e[a+1]);return function(u){var l=ui(t,u,1,r)-1;return o[l](i[l](u))}}function tu(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function eu(){var t=Kn,e=Kn,n=hn,r,i,o,a=Yt,u,l,s;function c(){var d=Math.min(t.length,e.length);return a!==Yt&&(a=Qs(t[0],t[d-1])),u=d>2?js:Js,l=s=null,g}function g(d){return d==null||isNaN(d=+d)?o:(l||(l=u(t.map(r),e,n)))(r(a(d)))}return g.invert=function(d){return a(i((s||(s=u(e,t.map(r),ft)))(d)))},g.domain=function(d){return arguments.length?(t=Array.from(d,Ks),c()):t.slice()},g.range=function(d){return arguments.length?(e=Array.from(d),c()):e.slice()},g.rangeRound=function(d){return e=Array.from(d),n=Da,c()},g.clamp=function(d){return arguments.length?(a=d?!0:Yt,c()):a!==Yt},g.interpolate=function(d){return arguments.length?(n=d,c()):n},g.unknown=function(d){return arguments.length?(o=d,g):o},function(d,y){return r=d,i=y,c()}}function nu(){return eu()(Yt,Yt)}function ru(t,e){t=t.slice();var n=0,r=t.length-1,i=t[n],o=t[r],a;return o<i&&(a=n,n=r,r=a,a=i,i=o,o=a),t[n]=e.floor(i),t[r]=e.ceil(o),t}const Pe=new Date,qe=new Date;function rt(t,e,n,r){function i(o){return t(o=arguments.length===0?new Date:new Date(+o)),o}return i.floor=o=>(t(o=new Date(+o)),o),i.ceil=o=>(t(o=new Date(o-1)),e(o,1),t(o),o),i.round=o=>{const a=i(o),u=i.ceil(o);return o-a<u-o?a:u},i.offset=(o,a)=>(e(o=new Date(+o),a==null?1:Math.floor(a)),o),i.range=(o,a,u)=>{const l=[];if(o=i.ceil(o),u=u==null?1:Math.floor(u),!(o<a)||!(u>0))return l;let s;do l.push(s=new Date(+o)),e(o,u),t(o);while(s<o&&o<a);return l},i.filter=o=>rt(a=>{if(a>=a)for(;t(a),!o(a);)a.setTime(a-1)},(a,u)=>{if(a>=a)if(u<0)for(;++u<=0;)for(;e(a,-1),!o(a););else for(;--u>=0;)for(;e(a,1),!o(a););}),n&&(i.count=(o,a)=>(Pe.setTime(+o),qe.setTime(+a),t(Pe),t(qe),Math.floor(n(Pe,qe))),i.every=o=>(o=Math.floor(o),!isFinite(o)||!(o>0)?null:o>1?i.filter(r?a=>r(a)%o===0:a=>i.count(0,a)%o===0):i)),i}const Ae=rt(()=>{},(t,e)=>{t.setTime(+t+e)},(t,e)=>e-t);Ae.every=t=>(t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?rt(e=>{e.setTime(Math.floor(e/t)*t)},(e,n)=>{e.setTime(+e+n*t)},(e,n)=>(n-e)/t):Ae);Ae.range;const bt=1e3,ct=bt*60,kt=ct*60,Ct=kt*24,yn=Ct*7,Qn=Ct*30,We=Ct*365,Pt=rt(t=>{t.setTime(t-t.getMilliseconds())},(t,e)=>{t.setTime(+t+e*bt)},(t,e)=>(e-t)/bt,t=>t.getUTCSeconds());Pt.range;const vn=rt(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*bt)},(t,e)=>{t.setTime(+t+e*ct)},(t,e)=>(e-t)/ct,t=>t.getMinutes());vn.range;const iu=rt(t=>{t.setUTCSeconds(0,0)},(t,e)=>{t.setTime(+t+e*ct)},(t,e)=>(e-t)/ct,t=>t.getUTCMinutes());iu.range;const _n=rt(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*bt-t.getMinutes()*ct)},(t,e)=>{t.setTime(+t+e*kt)},(t,e)=>(e-t)/kt,t=>t.getHours());_n.range;const ou=rt(t=>{t.setUTCMinutes(0,0,0)},(t,e)=>{t.setTime(+t+e*kt)},(t,e)=>(e-t)/kt,t=>t.getUTCHours());ou.range;const fe=rt(t=>t.setHours(0,0,0,0),(t,e)=>t.setDate(t.getDate()+e),(t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*ct)/Ct,t=>t.getDate()-1);fe.range;const wn=rt(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/Ct,t=>t.getUTCDate()-1);wn.range;const au=rt(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/Ct,t=>Math.floor(t/Ct));au.range;function Lt(t){return rt(e=>{e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},(e,n)=>{e.setDate(e.getDate()+n*7)},(e,n)=>(n-e-(n.getTimezoneOffset()-e.getTimezoneOffset())*ct)/yn)}const Le=Lt(0),Re=Lt(1),su=Lt(2),uu=Lt(3),Bt=Lt(4),lu=Lt(5),cu=Lt(6);Le.range;Re.range;su.range;uu.range;Bt.range;lu.range;cu.range;function Ot(t){return rt(e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCDate(e.getUTCDate()+n*7)},(e,n)=>(n-e)/yn)}const Yr=Ot(0),Ne=Ot(1),fu=Ot(2),hu=Ot(3),Gt=Ot(4),du=Ot(5),pu=Ot(6);Yr.range;Ne.range;fu.range;hu.range;Gt.range;du.range;pu.range;const xn=rt(t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,e)=>{t.setMonth(t.getMonth()+e)},(t,e)=>e.getMonth()-t.getMonth()+(e.getFullYear()-t.getFullYear())*12,t=>t.getMonth());xn.range;const gu=rt(t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCMonth(t.getUTCMonth()+e)},(t,e)=>e.getUTCMonth()-t.getUTCMonth()+(e.getUTCFullYear()-t.getUTCFullYear())*12,t=>t.getUTCMonth());gu.range;const St=rt(t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,e)=>{t.setFullYear(t.getFullYear()+e)},(t,e)=>e.getFullYear()-t.getFullYear(),t=>t.getFullYear());St.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:rt(e=>{e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},(e,n)=>{e.setFullYear(e.getFullYear()+n*t)});St.range;const It=rt(t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCFullYear(t.getUTCFullYear()+e)},(t,e)=>e.getUTCFullYear()-t.getUTCFullYear(),t=>t.getUTCFullYear());It.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:rt(e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCFullYear(e.getUTCFullYear()+n*t)});It.range;function mu(t,e,n,r,i,o){const a=[[Pt,1,bt],[Pt,5,5*bt],[Pt,15,15*bt],[Pt,30,30*bt],[o,1,ct],[o,5,5*ct],[o,15,15*ct],[o,30,30*ct],[i,1,kt],[i,3,3*kt],[i,6,6*kt],[i,12,12*kt],[r,1,Ct],[r,2,2*Ct],[n,1,yn],[e,1,Qn],[e,3,3*Qn],[t,1,We]];function u(s,c,g){const d=c<s;d&&([s,c]=[c,s]);const y=g&&typeof g.range=="function"?g:l(s,c,g),O=y?y.range(s,+c+1):[];return d?O.reverse():O}function l(s,c,g){const d=Math.abs(c-s)/g,y=an(([,,B])=>B).right(a,d);if(y===a.length)return t.every(En(s/We,c/We,g));if(y===0)return Ae.every(Math.max(En(s,c,g),1));const[O,H]=a[d/a[y-1][2]<a[y][2]/d?y-1:y];return O.every(H)}return[u,l]}const[yu,vu]=mu(St,xn,Le,fe,_n,vn);function Xe(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function Ve(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function jt(t,e,n){return{y:t,m:e,d:n,H:0,M:0,S:0,L:0}}function _u(t){var e=t.dateTime,n=t.date,r=t.time,i=t.periods,o=t.days,a=t.shortDays,u=t.months,l=t.shortMonths,s=te(i),c=ee(i),g=te(o),d=ee(o),y=te(a),O=ee(a),H=te(u),B=ee(u),U=te(l),J=ee(l),G={a:k,A:N,b:m,B:b,c:null,d:rr,e:rr,f:Pu,g:Ju,G:tl,H:$u,I:Hu,j:Yu,L:Pr,m:qu,M:Wu,p:M,q:S,Q:ar,s:sr,S:Xu,u:Vu,U:Bu,V:Gu,w:Zu,W:Ku,x:null,X:null,y:Qu,Y:ju,Z:el,"%":or},F={a:T,A:P,b:Z,B:j,c:null,d:ir,e:ir,f:ol,g:gl,G:yl,H:nl,I:rl,j:il,L:Wr,m:al,M:sl,p:tt,q,Q:ar,s:sr,S:ul,u:ll,U:cl,V:fl,w:hl,W:dl,x:null,X:null,y:pl,Y:ml,Z:vl,"%":or},V={a:v,A:R,b:D,B:Y,c:p,d:er,e:er,f:Iu,g:tr,G:jn,H:nr,I:nr,j:Ru,L:Fu,m:Au,M:Nu,p:h,q:Du,Q:Ou,s:zu,S:Uu,u:Mu,U:Tu,V:Cu,w:ku,W:Su,x:A,X:w,y:tr,Y:jn,Z:Eu,"%":Lu};G.x=C(n,G),G.X=C(r,G),G.c=C(e,G),F.x=C(n,F),F.X=C(r,F),F.c=C(e,F);function C(x,L){return function(E){var _=[],K=-1,z=0,X=x.length,$,nt,W;for(E instanceof Date||(E=new Date(+E));++K<X;)x.charCodeAt(K)===37&&(_.push(x.slice(z,K)),(nt=Jn[$=x.charAt(++K)])!=null?$=x.charAt(++K):nt=$==="e"?" ":"0",(W=L[$])&&($=W(E,nt)),_.push($),z=K+1);return _.push(x.slice(z,K)),_.join("")}}function I(x,L){return function(E){var _=jt(1900,void 0,1),K=f(_,x,E+="",0),z,X;if(K!=E.length)return null;if("Q"in _)return new Date(_.Q);if("s"in _)return new Date(_.s*1e3+("L"in _?_.L:0));if(L&&!("Z"in _)&&(_.Z=0),"p"in _&&(_.H=_.H%12+_.p*12),_.m===void 0&&(_.m="q"in _?_.q:0),"V"in _){if(_.V<1||_.V>53)return null;"w"in _||(_.w=1),"Z"in _?(z=Ve(jt(_.y,0,1)),X=z.getUTCDay(),z=X>4||X===0?Ne.ceil(z):Ne(z),z=wn.offset(z,(_.V-1)*7),_.y=z.getUTCFullYear(),_.m=z.getUTCMonth(),_.d=z.getUTCDate()+(_.w+6)%7):(z=Xe(jt(_.y,0,1)),X=z.getDay(),z=X>4||X===0?Re.ceil(z):Re(z),z=fe.offset(z,(_.V-1)*7),_.y=z.getFullYear(),_.m=z.getMonth(),_.d=z.getDate()+(_.w+6)%7)}else("W"in _||"U"in _)&&("w"in _||(_.w="u"in _?_.u%7:"W"in _?1:0),X="Z"in _?Ve(jt(_.y,0,1)).getUTCDay():Xe(jt(_.y,0,1)).getDay(),_.m=0,_.d="W"in _?(_.w+6)%7+_.W*7-(X+5)%7:_.w+_.U*7-(X+6)%7);return"Z"in _?(_.H+=_.Z/100|0,_.M+=_.Z%100,Ve(_)):Xe(_)}}function f(x,L,E,_){for(var K=0,z=L.length,X=E.length,$,nt;K<z;){if(_>=X)return-1;if($=L.charCodeAt(K++),$===37){if($=L.charAt(K++),nt=V[$ in Jn?L.charAt(K++):$],!nt||(_=nt(x,E,_))<0)return-1}else if($!=E.charCodeAt(_++))return-1}return _}function h(x,L,E){var _=s.exec(L.slice(E));return _?(x.p=c.get(_[0].toLowerCase()),E+_[0].length):-1}function v(x,L,E){var _=y.exec(L.slice(E));return _?(x.w=O.get(_[0].toLowerCase()),E+_[0].length):-1}function R(x,L,E){var _=g.exec(L.slice(E));return _?(x.w=d.get(_[0].toLowerCase()),E+_[0].length):-1}function D(x,L,E){var _=U.exec(L.slice(E));return _?(x.m=J.get(_[0].toLowerCase()),E+_[0].length):-1}function Y(x,L,E){var _=H.exec(L.slice(E));return _?(x.m=B.get(_[0].toLowerCase()),E+_[0].length):-1}function p(x,L,E){return f(x,e,L,E)}function A(x,L,E){return f(x,n,L,E)}function w(x,L,E){return f(x,r,L,E)}function k(x){return a[x.getDay()]}function N(x){return o[x.getDay()]}function m(x){return l[x.getMonth()]}function b(x){return u[x.getMonth()]}function M(x){return i[+(x.getHours()>=12)]}function S(x){return 1+~~(x.getMonth()/3)}function T(x){return a[x.getUTCDay()]}function P(x){return o[x.getUTCDay()]}function Z(x){return l[x.getUTCMonth()]}function j(x){return u[x.getUTCMonth()]}function tt(x){return i[+(x.getUTCHours()>=12)]}function q(x){return 1+~~(x.getUTCMonth()/3)}return{format:function(x){var L=C(x+="",G);return L.toString=function(){return x},L},parse:function(x){var L=I(x+="",!1);return L.toString=function(){return x},L},utcFormat:function(x){var L=C(x+="",F);return L.toString=function(){return x},L},utcParse:function(x){var L=I(x+="",!0);return L.toString=function(){return x},L}}}var Jn={"-":"",_:" ",0:"0"},ot=/^\s*\d+/,wu=/^%/,xu=/[\\^$*+?|[\]().{}]/g;function Q(t,e,n){var r=t<0?"-":"",i=(r?-t:t)+"",o=i.length;return r+(o<n?new Array(n-o+1).join(e)+i:i)}function bu(t){return t.replace(xu,"\\$&")}function te(t){return new RegExp("^(?:"+t.map(bu).join("|")+")","i")}function ee(t){return new Map(t.map((e,n)=>[e.toLowerCase(),n]))}function ku(t,e,n){var r=ot.exec(e.slice(n,n+1));return r?(t.w=+r[0],n+r[0].length):-1}function Mu(t,e,n){var r=ot.exec(e.slice(n,n+1));return r?(t.u=+r[0],n+r[0].length):-1}function Tu(t,e,n){var r=ot.exec(e.slice(n,n+2));return r?(t.U=+r[0],n+r[0].length):-1}function Cu(t,e,n){var r=ot.exec(e.slice(n,n+2));return r?(t.V=+r[0],n+r[0].length):-1}function Su(t,e,n){var r=ot.exec(e.slice(n,n+2));return r?(t.W=+r[0],n+r[0].length):-1}function jn(t,e,n){var r=ot.exec(e.slice(n,n+4));return r?(t.y=+r[0],n+r[0].length):-1}function tr(t,e,n){var r=ot.exec(e.slice(n,n+2));return r?(t.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function Eu(t,e,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return r?(t.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function Du(t,e,n){var r=ot.exec(e.slice(n,n+1));return r?(t.q=r[0]*3-3,n+r[0].length):-1}function Au(t,e,n){var r=ot.exec(e.slice(n,n+2));return r?(t.m=r[0]-1,n+r[0].length):-1}function er(t,e,n){var r=ot.exec(e.slice(n,n+2));return r?(t.d=+r[0],n+r[0].length):-1}function Ru(t,e,n){var r=ot.exec(e.slice(n,n+3));return r?(t.m=0,t.d=+r[0],n+r[0].length):-1}function nr(t,e,n){var r=ot.exec(e.slice(n,n+2));return r?(t.H=+r[0],n+r[0].length):-1}function Nu(t,e,n){var r=ot.exec(e.slice(n,n+2));return r?(t.M=+r[0],n+r[0].length):-1}function Uu(t,e,n){var r=ot.exec(e.slice(n,n+2));return r?(t.S=+r[0],n+r[0].length):-1}function Fu(t,e,n){var r=ot.exec(e.slice(n,n+3));return r?(t.L=+r[0],n+r[0].length):-1}function Iu(t,e,n){var r=ot.exec(e.slice(n,n+6));return r?(t.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function Lu(t,e,n){var r=wu.exec(e.slice(n,n+1));return r?n+r[0].length:-1}function Ou(t,e,n){var r=ot.exec(e.slice(n));return r?(t.Q=+r[0],n+r[0].length):-1}function zu(t,e,n){var r=ot.exec(e.slice(n));return r?(t.s=+r[0],n+r[0].length):-1}function rr(t,e){return Q(t.getDate(),e,2)}function $u(t,e){return Q(t.getHours(),e,2)}function Hu(t,e){return Q(t.getHours()%12||12,e,2)}function Yu(t,e){return Q(1+fe.count(St(t),t),e,3)}function Pr(t,e){return Q(t.getMilliseconds(),e,3)}function Pu(t,e){return Pr(t,e)+"000"}function qu(t,e){return Q(t.getMonth()+1,e,2)}function Wu(t,e){return Q(t.getMinutes(),e,2)}function Xu(t,e){return Q(t.getSeconds(),e,2)}function Vu(t){var e=t.getDay();return e===0?7:e}function Bu(t,e){return Q(Le.count(St(t)-1,t),e,2)}function qr(t){var e=t.getDay();return e>=4||e===0?Bt(t):Bt.ceil(t)}function Gu(t,e){return t=qr(t),Q(Bt.count(St(t),t)+(St(t).getDay()===4),e,2)}function Zu(t){return t.getDay()}function Ku(t,e){return Q(Re.count(St(t)-1,t),e,2)}function Qu(t,e){return Q(t.getFullYear()%100,e,2)}function Ju(t,e){return t=qr(t),Q(t.getFullYear()%100,e,2)}function ju(t,e){return Q(t.getFullYear()%1e4,e,4)}function tl(t,e){var n=t.getDay();return t=n>=4||n===0?Bt(t):Bt.ceil(t),Q(t.getFullYear()%1e4,e,4)}function el(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+Q(e/60|0,"0",2)+Q(e%60,"0",2)}function ir(t,e){return Q(t.getUTCDate(),e,2)}function nl(t,e){return Q(t.getUTCHours(),e,2)}function rl(t,e){return Q(t.getUTCHours()%12||12,e,2)}function il(t,e){return Q(1+wn.count(It(t),t),e,3)}function Wr(t,e){return Q(t.getUTCMilliseconds(),e,3)}function ol(t,e){return Wr(t,e)+"000"}function al(t,e){return Q(t.getUTCMonth()+1,e,2)}function sl(t,e){return Q(t.getUTCMinutes(),e,2)}function ul(t,e){return Q(t.getUTCSeconds(),e,2)}function ll(t){var e=t.getUTCDay();return e===0?7:e}function cl(t,e){return Q(Yr.count(It(t)-1,t),e,2)}function Xr(t){var e=t.getUTCDay();return e>=4||e===0?Gt(t):Gt.ceil(t)}function fl(t,e){return t=Xr(t),Q(Gt.count(It(t),t)+(It(t).getUTCDay()===4),e,2)}function hl(t){return t.getUTCDay()}function dl(t,e){return Q(Ne.count(It(t)-1,t),e,2)}function pl(t,e){return Q(t.getUTCFullYear()%100,e,2)}function gl(t,e){return t=Xr(t),Q(t.getUTCFullYear()%100,e,2)}function ml(t,e){return Q(t.getUTCFullYear()%1e4,e,4)}function yl(t,e){var n=t.getUTCDay();return t=n>=4||n===0?Gt(t):Gt.ceil(t),Q(t.getUTCFullYear()%1e4,e,4)}function vl(){return"+0000"}function or(){return"%"}function ar(t){return+t}function sr(t){return Math.floor(+t/1e3)}var Ht,Zt;_l({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function _l(t){return Ht=_u(t),Zt=Ht.format,Ht.parse,Ht.utcFormat,Ht.utcParse,Ht}function wl(t){return new Date(t)}function xl(t){return t instanceof Date?+t:+new Date(+t)}function Vr(t,e,n,r,i,o,a,u,l,s){var c=nu(),g=c.invert,d=c.domain,y=s(".%L"),O=s(":%S"),H=s("%I:%M"),B=s("%I %p"),U=s("%a %d"),J=s("%b %d"),G=s("%B"),F=s("%Y");function V(C){return(l(C)<C?y:u(C)<C?O:a(C)<C?H:o(C)<C?B:r(C)<C?i(C)<C?U:J:n(C)<C?G:F)(C)}return c.invert=function(C){return new Date(g(C))},c.domain=function(C){return arguments.length?d(Array.from(C,xl)):d().map(wl)},c.ticks=function(C){var I=d();return t(I[0],I[I.length-1],C??10)},c.tickFormat=function(C,I){return I==null?V:s(I)},c.nice=function(C){var I=d();return(!C||typeof C.range!="function")&&(C=e(I[0],I[I.length-1],C??10)),C?d(ru(I,C)):c},c.copy=function(){return tu(c,Vr(t,e,n,r,i,o,a,u,l,s))},c}function Br(){return mn.apply(Vr(yu,vu,St,xn,Le,fe,_n,vn,Pt,Zt).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}const me=t=>()=>t;function bl(t,{sourceEvent:e,target:n,transform:r,dispatch:i}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:i}})}function Mt(t,e,n){this.k=t,this.x=e,this.y=n}Mt.prototype={constructor:Mt,scale:function(t){return t===1?this:new Mt(this.k*t,this.x,this.y)},translate:function(t,e){return t===0&e===0?this:new Mt(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Dt=new Mt(1,0,0);Mt.prototype;function Be(t){t.stopImmediatePropagation()}function ne(t){t.preventDefault(),t.stopImmediatePropagation()}function kl(t){return(!t.ctrlKey||t.type==="wheel")&&!t.button}function Ml(){var t=this;return t instanceof SVGElement?(t=t.ownerSVGElement||t,t.hasAttribute("viewBox")?(t=t.viewBox.baseVal,[[t.x,t.y],[t.x+t.width,t.y+t.height]]):[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]):[[0,0],[t.clientWidth,t.clientHeight]]}function ur(){return this.__zoom||Dt}function Tl(t){return-t.deltaY*(t.deltaMode===1?.05:t.deltaMode?1:.002)*(t.ctrlKey?10:1)}function Cl(){return navigator.maxTouchPoints||"ontouchstart"in this}function Sl(t,e,n){var r=t.invertX(e[0][0])-n[0][0],i=t.invertX(e[1][0])-n[1][0],o=t.invertY(e[0][1])-n[0][1],a=t.invertY(e[1][1])-n[1][1];return t.translate(i>r?(r+i)/2:Math.min(0,r)||Math.max(0,i),a>o?(o+a)/2:Math.min(0,o)||Math.max(0,a))}function Gr(){var t=kl,e=Ml,n=Sl,r=Tl,i=Cl,o=[0,1/0],a=[[-1/0,-1/0],[1/0,1/0]],u=250,l=Oa,s=sn("start","zoom","end"),c,g,d,y=500,O=150,H=0,B=10;function U(p){p.property("__zoom",ur).on("wheel.zoom",f,{passive:!1}).on("mousedown.zoom",h).on("dblclick.zoom",v).filter(i).on("touchstart.zoom",R).on("touchmove.zoom",D).on("touchend.zoom touchcancel.zoom",Y).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}U.transform=function(p,A,w,k){var N=p.selection?p.selection():p;N.property("__zoom",ur),p!==N?V(p,A,w,k):N.interrupt().each(function(){C(this,arguments).event(k).start().zoom(null,typeof A=="function"?A.apply(this,arguments):A).end()})},U.scaleBy=function(p,A,w,k){U.scaleTo(p,function(){var N=this.__zoom.k,m=typeof A=="function"?A.apply(this,arguments):A;return N*m},w,k)},U.scaleTo=function(p,A,w,k){U.transform(p,function(){var N=e.apply(this,arguments),m=this.__zoom,b=w==null?F(N):typeof w=="function"?w.apply(this,arguments):w,M=m.invert(b),S=typeof A=="function"?A.apply(this,arguments):A;return n(G(J(m,S),b,M),N,a)},w,k)},U.translateBy=function(p,A,w,k){U.transform(p,function(){return n(this.__zoom.translate(typeof A=="function"?A.apply(this,arguments):A,typeof w=="function"?w.apply(this,arguments):w),e.apply(this,arguments),a)},null,k)},U.translateTo=function(p,A,w,k,N){U.transform(p,function(){var m=e.apply(this,arguments),b=this.__zoom,M=k==null?F(m):typeof k=="function"?k.apply(this,arguments):k;return n(Dt.translate(M[0],M[1]).scale(b.k).translate(typeof A=="function"?-A.apply(this,arguments):-A,typeof w=="function"?-w.apply(this,arguments):-w),m,a)},k,N)};function J(p,A){return A=Math.max(o[0],Math.min(o[1],A)),A===p.k?p:new Mt(A,p.x,p.y)}function G(p,A,w){var k=A[0]-w[0]*p.k,N=A[1]-w[1]*p.k;return k===p.x&&N===p.y?p:new Mt(p.k,k,N)}function F(p){return[(+p[0][0]+ +p[1][0])/2,(+p[0][1]+ +p[1][1])/2]}function V(p,A,w,k){p.on("start.zoom",function(){C(this,arguments).event(k).start()}).on("interrupt.zoom end.zoom",function(){C(this,arguments).event(k).end()}).tween("zoom",function(){var N=this,m=arguments,b=C(N,m).event(k),M=e.apply(N,m),S=w==null?F(M):typeof w=="function"?w.apply(N,m):w,T=Math.max(M[1][0]-M[0][0],M[1][1]-M[0][1]),P=N.__zoom,Z=typeof A=="function"?A.apply(N,m):A,j=l(P.invert(S).concat(T/P.k),Z.invert(S).concat(T/Z.k));return function(tt){if(tt===1)tt=Z;else{var q=j(tt),x=T/q[2];tt=new Mt(x,S[0]-q[0]*x,S[1]-q[1]*x)}b.zoom(null,tt)}})}function C(p,A,w){return!w&&p.__zooming||new I(p,A)}function I(p,A){this.that=p,this.args=A,this.active=0,this.sourceEvent=null,this.extent=e.apply(p,A),this.taps=0}I.prototype={event:function(p){return p&&(this.sourceEvent=p),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(p,A){return this.mouse&&p!=="mouse"&&(this.mouse[1]=A.invert(this.mouse[0])),this.touch0&&p!=="touch"&&(this.touch0[1]=A.invert(this.touch0[0])),this.touch1&&p!=="touch"&&(this.touch1[1]=A.invert(this.touch1[0])),this.that.__zoom=A,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(p){var A=xt(this.that).datum();s.call(p,this.that,new bl(p,{sourceEvent:this.sourceEvent,target:U,transform:this.that.__zoom,dispatch:s}),A)}};function f(p,...A){if(!t.apply(this,arguments))return;var w=C(this,A).event(p),k=this.__zoom,N=Math.max(o[0],Math.min(o[1],k.k*Math.pow(2,r.apply(this,arguments)))),m=At(p);if(w.wheel)(w.mouse[0][0]!==m[0]||w.mouse[0][1]!==m[1])&&(w.mouse[1]=k.invert(w.mouse[0]=m)),clearTimeout(w.wheel);else{if(k.k===N)return;w.mouse=[m,k.invert(m)],be(this),w.start()}ne(p),w.wheel=setTimeout(b,O),w.zoom("mouse",n(G(J(k,N),w.mouse[0],w.mouse[1]),w.extent,a));function b(){w.wheel=null,w.end()}}function h(p,...A){if(d||!t.apply(this,arguments))return;var w=p.currentTarget,k=C(this,A,!0).event(p),N=xt(p.view).on("mousemove.zoom",S,!0).on("mouseup.zoom",T,!0),m=At(p,w),b=p.clientX,M=p.clientY;oa(p.view),Be(p),k.mouse=[m,this.__zoom.invert(m)],be(this),k.start();function S(P){if(ne(P),!k.moved){var Z=P.clientX-b,j=P.clientY-M;k.moved=Z*Z+j*j>H}k.event(P).zoom("mouse",n(G(k.that.__zoom,k.mouse[0]=At(P,w),k.mouse[1]),k.extent,a))}function T(P){N.on("mousemove.zoom mouseup.zoom",null),aa(P.view,k.moved),ne(P),k.event(P).end()}}function v(p,...A){if(t.apply(this,arguments)){var w=this.__zoom,k=At(p.changedTouches?p.changedTouches[0]:p,this),N=w.invert(k),m=w.k*(p.shiftKey?.5:2),b=n(G(J(w,m),k,N),e.apply(this,A),a);ne(p),u>0?xt(this).transition().duration(u).call(V,b,k,p):xt(this).call(U.transform,b,k,p)}}function R(p,...A){if(t.apply(this,arguments)){var w=p.touches,k=w.length,N=C(this,A,p.changedTouches.length===k).event(p),m,b,M,S;for(Be(p),b=0;b<k;++b)M=w[b],S=At(M,this),S=[S,this.__zoom.invert(S),M.identifier],N.touch0?!N.touch1&&N.touch0[2]!==S[2]&&(N.touch1=S,N.taps=0):(N.touch0=S,m=!0,N.taps=1+!!c);c&&(c=clearTimeout(c)),m&&(N.taps<2&&(g=S[0],c=setTimeout(function(){c=null},y)),be(this),N.start())}}function D(p,...A){if(this.__zooming){var w=C(this,A).event(p),k=p.changedTouches,N=k.length,m,b,M,S;for(ne(p),m=0;m<N;++m)b=k[m],M=At(b,this),w.touch0&&w.touch0[2]===b.identifier?w.touch0[0]=M:w.touch1&&w.touch1[2]===b.identifier&&(w.touch1[0]=M);if(b=w.that.__zoom,w.touch1){var T=w.touch0[0],P=w.touch0[1],Z=w.touch1[0],j=w.touch1[1],tt=(tt=Z[0]-T[0])*tt+(tt=Z[1]-T[1])*tt,q=(q=j[0]-P[0])*q+(q=j[1]-P[1])*q;b=J(b,Math.sqrt(tt/q)),M=[(T[0]+Z[0])/2,(T[1]+Z[1])/2],S=[(P[0]+j[0])/2,(P[1]+j[1])/2]}else if(w.touch0)M=w.touch0[0],S=w.touch0[1];else return;w.zoom("touch",n(G(b,M,S),w.extent,a))}}function Y(p,...A){if(this.__zooming){var w=C(this,A).event(p),k=p.changedTouches,N=k.length,m,b;for(Be(p),d&&clearTimeout(d),d=setTimeout(function(){d=null},y),m=0;m<N;++m)b=k[m],w.touch0&&w.touch0[2]===b.identifier?delete w.touch0:w.touch1&&w.touch1[2]===b.identifier&&delete w.touch1;if(w.touch1&&!w.touch0&&(w.touch0=w.touch1,delete w.touch1),w.touch0)w.touch0[1]=this.__zoom.invert(w.touch0[0]);else if(w.end(),w.taps===2&&(b=At(b,this),Math.hypot(g[0]-b[0],g[1]-b[1])<B)){var M=xt(this).on("dblclick.zoom");M&&M.apply(this,arguments)}}}return U.wheelDelta=function(p){return arguments.length?(r=typeof p=="function"?p:me(+p),U):r},U.filter=function(p){return arguments.length?(t=typeof p=="function"?p:me(!!p),U):t},U.touchable=function(p){return arguments.length?(i=typeof p=="function"?p:me(!!p),U):i},U.extent=function(p){return arguments.length?(e=typeof p=="function"?p:me([[+p[0][0],+p[0][1]],[+p[1][0],+p[1][1]]]),U):e},U.scaleExtent=function(p){return arguments.length?(o[0]=+p[0],o[1]=+p[1],U):[o[0],o[1]]},U.translateExtent=function(p){return arguments.length?(a[0][0]=+p[0][0],a[1][0]=+p[1][0],a[0][1]=+p[0][1],a[1][1]=+p[1][1],U):[[a[0][0],a[0][1]],[a[1][0],a[1][1]]]},U.constrain=function(p){return arguments.length?(n=p,U):n},U.duration=function(p){return arguments.length?(u=+p,U):u},U.interpolate=function(p){return arguments.length?(l=p,U):l},U.on=function(){var p=s.on.apply(s,arguments);return p===s?U:p},U.clickDistance=function(p){return arguments.length?(H=(p=+p)*p,U):Math.sqrt(H)},U.tapDistance=function(p){return arguments.length?(B=+p,U):B},U}class El{static render(e,n,r){const i={axisStrategy:"time",minLabelGap:40,...r};n.innerHTML="";const o={top:10,right:30,bottom:30,left:10},a=n.clientWidth-o.left-o.right,u=n.clientHeight-o.top-o.bottom,l=xt(n),s=l.append("svg").attr("width",a+o.left+o.right).attr("height",u+o.top+o.bottom).style("background","var(--tl-background-color, #fff)"),c=s.append("g").attr("transform",`translate(${o.left},${o.top})`),g=[...e.items].sort((m,b)=>+m.start-+b.start),d=g.map(m=>m.start),[y,O]=cr(d),H=Br().domain([y,O]).range([0,a]),B=g.map((m,b)=>b.toString()),U=Zn().domain(B).range([0,a]).padding(.5),J=(m,b)=>m.rescaleX(b),G=(m,b,M)=>{if(i.axisStrategy==="point"){const S=U(b.toString())??0;return M.applyX(S)}else return J(M,H)(m.start)};c.append("line").attr("x1",0).attr("x2",a).attr("y1",u/2).attr("y2",u/2).attr("stroke","var(--tl-axis-color, var(--tl-primary-color, #4285f4))").attr("stroke-width",2);const F=c.append("g").attr("transform",`translate(0,${u+5})`),V=()=>{F.attr("fill",null),F.select(".domain").attr("stroke","var(--tl-axis-color, var(--tl-primary-color, #4285f4))").attr("fill","none"),F.selectAll(".tick line").attr("stroke","var(--tl-axis-color, var(--tl-primary-color, #4285f4))"),F.selectAll(".tick text").attr("fill","var(--tl-tick-color, var(--tl-primary-color, #4285f4))").attr("font-family","var(--tl-font, system-ui)").attr("font-size","10px")},C=c.append("g"),I=C.append("g"),f=C.append("g"),h=I.selectAll("circle").data(g).enter().append("circle").attr("cy",u/2).attr("r",6).attr("fill","var(--tl-accent-color, var(--tl-primary-color, #4285f4))").on("click",(m,b)=>i.onItemClick?.(b,m)).on("mouseover",(m,b)=>i.onItemHover?.(b,m)),v=f.selectAll("text").data(g).enter().append("text").attr("y",(m,b)=>u/2-10-b%2*12).attr("text-anchor","middle").text(m=>m.title).attr("fill","var(--tl-text-color, var(--tl-primary-color, #4285f4))").attr("font-family","var(--tl-font, system-ui)").attr("font-size","12px"),R=l.append("div").attr("class","tl-tooltip").style("position","absolute").style("pointer-events","none").style("padding","6px 10px").style("border-radius","4px").style("background","var(--tl-tooltip-bg, rgba(0,0,0,0.7))").style("color","var(--tl-tooltip-color, #fff)").style("font-family","var(--tl-font, system-ui)").style("font-size","12px").style("opacity","0");function D(m){const b=m.start.toLocaleDateString(),M=m.end?`  ${m.end.toLocaleDateString()}`:"",S=m.description?`<div>${m.description}</div>`:"";return`<strong>${m.title}</strong><div>${b}${M}</div>${S}`}h.on("mouseover",(m,b)=>R.html(D(b)).style("opacity","1")).on("mousemove",m=>R.style("left",`${m.pageX+10}px`).style("top",`${m.pageY+10}px`)).on("mouseout",()=>R.style("opacity","0"));function Y(m){const b=F.selectAll(".tick").nodes();let M=-1/0;b.forEach(S=>{const T=S.transform?.baseVal?.[0]?.matrix?.e??S.getCTM()?.e??0;T-M<m?S.style.display="none":(S.style.display="",M=T)})}function p(m){const b=v.nodes();let M=-1/0;for(const S of b){const T=Number(S.getAttribute("x")||"0");T-M<m?S.style.display="none":(S.style.display="",M=T)}}const A=m=>{if(h.attr("cx",(b,M)=>G(b,M,m)),v.attr("x",(b,M)=>G(b,M,m)),i.axisStrategy==="point"){const b=(U.step?.()??a/Math.max(1,g.length-1))*m.k,M=Math.max(1,Math.ceil(i.minLabelGap/b)),S=g.map((T,P)=>P).filter(T=>T%M===0).map(T=>T.toString());F.call(An(Zn().domain(S).range([m.applyX(0),m.applyX(a)])).tickFormat(T=>{const P=Number(T),Z=g[P]?.start;return Z?Zt("%Y-%m-%d")(Z):""}))}else{const b=J(m,H);F.call(An(b).ticks(10).tickFormat(Zt("%Y-%m-%d")))}if(V(),Y(i.minLabelGap),p(i.minLabelGap),i.onRangeChange)if(i.axisStrategy==="time"){const b=m.rescaleX(H);i.onRangeChange(b.domain())}else{const b=Math.max(0,Math.floor((0-m.x)/((U.step?.()??1)*m.k))),M=Math.min(g.length-1,Math.ceil((a-m.x)/((U.step?.()??1)*m.k))),S=g[b]?.start??g[0].start,T=g[M]?.start??g[g.length-1].start;i.onRangeChange([S,T])}},w=Gr().scaleExtent([1,20]).translateExtent([[0,0],[a,u]]).extent([[0,0],[a,u]]).on("zoom",m=>{const b=m.transform;i.axisStrategy==="point"?(C.attr("transform",`translate(${b.x},0) scale(${b.k},1)`),A(b)):(C.attr("transform",null),A(b))});s.call(w);function k(){if(g.length<=1)return Dt;if(i.axisStrategy==="point"){const m=U.step?.()??a/Math.max(1,g.length-1),b=Math.max(1,Math.min(20,i.minLabelGap/m));return Dt.scale(b)}else{let m=1/0;for(let M=1;M<g.length;M++){const S=H(g[M].start),T=H(g[M-1].start),P=Math.abs(S-T);P>0&&P<m&&(m=P)}if(!isFinite(m)||m===0)return Dt;const b=Math.max(1,Math.min(20,i.minLabelGap/m));return Dt.scale(b)}}const N=k();i.axisStrategy==="point"?(C.attr("transform",`scale(${N.k},1)`),w.transform(s,N),A(N)):(w.transform(s,N),A(N))}}class Dl{static render(e,n,r){n.innerHTML="";const i={top:20,right:10,bottom:20,left:60},o=n.clientWidth-i.left-i.right,a=n.clientHeight-i.top-i.bottom,u=xt(n),l=u.append("svg").attr("width",i.left+o+i.right).attr("height",i.top+a+i.bottom);l.append("rect").attr("width",i.left+o+i.right).attr("height",i.top+a+i.bottom).style("fill","none").style("pointer-events","all");const s=l.append("g").attr("transform",`translate(${i.left},${i.top})`),c=e.items.map(F=>F.start),[g,d]=cr(c),y=Br().domain([g,d]).range([0,a]);if(r.showTodayLine){const F=y(new Date);s.append("line").attr("x1",0).attr("x2",o).attr("y1",F).attr("y2",F).attr("stroke","var(--tl-primary-color, steelblue)").attr("stroke-dasharray","4 2")}s.append("line").attr("x1",o/2).attr("x2",o/2).attr("y1",0).attr("y2",a).attr("stroke","var(--tl-primary-color, steelblue)").attr("stroke-width",2);const O=s.append("g").call(Rn(y).tickValues(c).tickFormat(Zt("%Y-%m-%d")));O.attr("fill",null),O.select(".domain").attr("stroke","var(--tl-primary-color, steelblue)").attr("fill","none"),O.selectAll(".tick line").attr("stroke","var(--tl-primary-color, steelblue)"),O.selectAll(".tick text").attr("fill","var(--tl-primary-color, steelblue)").attr("font-family","var(--tl-font, sans-serif)").attr("font-size","10px").attr("dx","-8");const H=u.append("div").attr("class","tl-tooltip").style("position","absolute").style("pointer-events","none").style("padding","6px 10px").style("border-radius","4px").style("background","var(--tl-tooltip-bg, rgba(0,0,0,0.7))").style("color","var(--tl-tooltip-color, #fff)").style("font-family","var(--tl-font, sans-serif)").style("font-size","12px").style("opacity","0");function B(F){const V=F.start.toLocaleDateString(),C=F.end?`  ${F.end.toLocaleDateString()}`:"",I=F.description?`<div>${F.description}</div>`:"";return`<strong>${F.title}</strong><div>${V}${C}</div>${I}`}const U=s.append("g").selectAll("g.event").data(e.items).enter().append("g").attr("class","event");U.append("circle").attr("cx",o/2).attr("cy",F=>y(F.start)).attr("r",6).attr("fill","var(--tl-primary-color, steelblue)").on("click",(F,V)=>r.onItemClick?.(V,F)).on("mouseover",(F,V)=>{r.onItemHover?.(V,F),H.html(B(V)).style("opacity","1")}).on("mousemove",F=>H.style("left",`${F.pageX+10}px`).style("top",`${F.pageY+10}px`)).on("mouseout",()=>H.style("opacity","0")),U.append("text").attr("x",o/2+12).attr("y",F=>y(F.start)+4).text(F=>F.title).attr("fill","var(--tl-primary-color, steelblue)").attr("font-family","var(--tl-font, sans-serif)").attr("font-size","12px");const J=F=>{const V=F.rescaleY(y);O.call(Rn(V).tickValues(c).tickFormat(Zt("%Y-%m-%d"))),O.selectAll(".tick text").attr("fill","var(--tl-primary-color, steelblue)"),U.selectAll("circle").attr("cy",C=>V(C.start)),U.selectAll("text").attr("y",C=>V(C.start)+4),r.onRangeChange?.(V.domain())},G=Gr().scaleExtent([1,10]).translateExtent([[0,0],[o,a]]).extent([[0,0],[o,a]]).on("zoom",F=>J(F.transform));l.call(G),G.transform(l,Dt),J(Dt)}}class Al{static render(e,n,r){n.innerHTML="";const i="chrono-leaf-grid-styles";if(!document.getElementById(i)){const a=document.createElement("style");a.id=i,a.textContent=`
        .tl-grid {
          display: grid;
          gap: var(--grid-gap, 16px);
          grid-template-columns: repeat(auto-fit, minmax(var(--grid-item-min, 150px), 1fr));
          padding: var(--grid-padding, 16px);
          background: var(--tl-background-color);
          font-family: var(--tl-font);
          border-radius: var(--tl-border-radius);
        }
        .tl-grid-item {
          position: relative;
          background: var(--card-bg, #fff);
          color: var(--card-color, inherit);
          border-radius: var(--tl-border-radius);
          box-shadow: var(--card-shadow, 0 1px 4px rgba(0,0,0,0.1));
          padding: var(--card-padding, 12px);
          overflow: hidden;
          cursor: pointer;
        }
        .tl-grid-item h4 {
          margin: 0 0 var(--card-title-gap, 4px) 0;
          font-size: var(--card-title-size, 1em);
        }
        .tl-grid-item time {
          display: block;
          font-size: var(--card-date-size, 0.85em);
          color: var(--card-date-color, #555);
        }
        .tl-grid-item p {
          margin-top: var(--card-desc-gap, 8px);
          font-size: var(--card-desc-size, 0.9em);
          color: var(--card-desc-color, #333);
        }
      `,document.head.appendChild(a)}const o=document.createElement("div");o.className="tl-grid",e.items.forEach(a=>{const u=document.createElement("div");u.className="tl-grid-item",a.background?.type==="color"&&(u.style.backgroundColor=a.background.source),r.onItemClick&&u.addEventListener("click",c=>r.onItemClick(a,c)),r.onItemHover&&u.addEventListener("mouseenter",c=>r.onItemHover(a,c));const l=document.createElement("h4");l.textContent=a.title,u.appendChild(l);const s=document.createElement("time");if(s.textContent=a.start.toLocaleDateString()+(a.end?`  ${a.end.toLocaleDateString()}`:""),u.appendChild(s),a.description){const c=document.createElement("p");c.textContent=a.description,u.appendChild(c)}o.appendChild(u)}),n.appendChild(o)}}function Rl(t){return t.replace(/[A-Z]/g,e=>"-"+e.toLowerCase())}function Nl(t,e){if(t.classList.remove("tl-theme-light","tl-theme-dark"),Array.from(t.style).forEach(n=>{n.startsWith("--tl-")&&t.style.removeProperty(n)}),!!e)if(e==="light"||e==="dark")t.classList.add(`tl-theme-${e}`);else for(const[n,r]of Object.entries(e)){if(r==null)continue;const i=`--tl-${Rl(n)}`;t.style.setProperty(i,r)}}class qt{constructor(e,n){this.items=e,this.config={theme:"light",mode:"slider",showTodayLine:!0,interactive:!0,language:"en",...n}}render(e){switch(e.innerHTML="",Nl(e,this.config.theme),this.config.mode){case"slider":El.render(this,e,this.config);break;case"vertical":Dl.render(this,e,this.config);break;case"grid":Al.render(this,e,this.config);break;default:e.innerHTML=this.toHTML()}}toHTML(){return`<div class="tl-container">${this.items.map(n=>`<div class="tl-item">
         <strong>${n.title}</strong>
         <time>${n.start.toLocaleDateString()}</time>
       </div>`).join("")}</div>`}static fromCSV(e){const n=he.parse(e,"csv");return new qt(n)}static fromJSON(e){const n=he.parse(e,"json");return new qt(n)}static fromXML(e){const n=he.parse(e,"xml");return new qt(n)}static fromTEI(e){const n=he.parse(e,"tei");return new qt(n)}}const lr="chrono-leaf-default-themes";if(!document.getElementById(lr)){const t=document.createElement("style");t.id=lr,t.textContent=`
     /* Theme classes just set variables */
     .tl-theme-light { 
       --tl-primary-color: #4285f4;
       --tl-background-color: #fff;
       --tl-font: system-ui, sans-serif;
       --tl-border-radius: 4px;
       --tl-tooltip-bg: rgba(0,0,0,0.7);
       --tl-tooltip-color: #fff;
+      /* new: fine-grained colors with sensible fallbacks */
+      --tl-axis-color: var(--tl-primary-color);
+      --tl-tick-color: var(--tl-primary-color);
+      --tl-text-color: #1f2937; /* slate-800 */
+      --tl-accent-color: var(--tl-primary-color);
     }
     .tl-theme-dark {
       --tl-primary-color: #8ab4f8;
       --tl-background-color: #222;
       --tl-font: system-ui, sans-serif;
       --tl-border-radius: 4px;
       --tl-tooltip-bg: rgba(255,255,255,0.85);
       --tl-tooltip-color: #000;
+      /* new */
+      --tl-axis-color: var(--tl-primary-color);
+      --tl-tick-color: var(--tl-primary-color);
+      --tl-text-color: #e5e7eb; /* gray-200 */
+      --tl-accent-color: var(--tl-primary-color);
     }

     /* Base container styles */
     .tl-container, .tl-grid {
       background: var(--tl-background-color);
       font-family: var(--tl-font);
       border-radius: var(--tl-border-radius);
-      color: inherit;
+      color: var(--tl-text-color, inherit);
     }

+    /* Axis & SVG text defaults (renderer reads these vars) */
+    .tl-container svg .domain,
+    .tl-container svg .tick line {
+      stroke: var(--tl-axis-color, var(--tl-primary-color, #4285f4));
+    }
+    .tl-container svg .tick text {
+      fill: var(--tl-tick-color, var(--tl-primary-color, #4285f4));
+      font-family: var(--tl-font);
+    }
+
     /* Tooltip */
     .tl-tooltip {
       background: var(--tl-tooltip-bg);
       color: var(--tl-tooltip-color);
       font-family: var(--tl-font);
     }
   `,document.head.appendChild(t)}exports.Timeline=qt;
//# sourceMappingURL=chrono-leaf.cjs.js.map
