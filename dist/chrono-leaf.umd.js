(function(Zt,se){typeof exports=="object"&&typeof module<"u"?se(exports):typeof define=="function"&&define.amd?define(["exports"],se):(Zt=typeof globalThis<"u"?globalThis:Zt||self,se(Zt.ChronoLeaf={}))})(this,function(Zt){"use strict";function se(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var _e={exports:{}};/* @license
Papa Parse
v5.5.3
https://github.com/mholt/PapaParse
License: MIT
*/var ni=_e.exports,On;function ri(){return On||(On=1,function(t,e){((n,r)=>{t.exports=r()})(ni,function n(){var r=typeof self<"u"?self:typeof window<"u"?window:r!==void 0?r:{},i,a=!r.document&&!!r.postMessage,o=r.IS_PAPA_WORKER||!1,s={},c=0,l={};function u(h){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},(function(p){var b=lt(p);b.chunkSize=parseInt(b.chunkSize),p.step||p.chunk||(b.chunkSize=null),this._handle=new U(b),(this._handle.streamer=this)._config=b}).call(this,h),this.parseChunk=function(p,b){var E=parseInt(this._config.skipFirstNLines)||0;if(this.isFirstChunk&&0<E){let X=this._config.newline;X||($=this._config.quoteChar||'"',X=this._handle.guessLineEndings(p,$)),p=[...p.split(X).slice(E)].join(X)}this.isFirstChunk&&H(this._config.beforeFirstChunk)&&($=this._config.beforeFirstChunk(p))!==void 0&&(p=$),this.isFirstChunk=!1,this._halted=!1;var E=this._partialLine+p,$=(this._partialLine="",this._handle.parse(E,this._baseIndex,!this._finished));if(!this._handle.paused()&&!this._handle.aborted()){if(p=$.meta.cursor,E=(this._finished||(this._partialLine=E.substring(p-this._baseIndex),this._baseIndex=p),$&&$.data&&(this._rowCount+=$.data.length),this._finished||this._config.preview&&this._rowCount>=this._config.preview),o)r.postMessage({results:$,workerId:l.WORKER_ID,finished:E});else if(H(this._config.chunk)&&!b){if(this._config.chunk($,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);this._completeResults=$=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat($.data),this._completeResults.errors=this._completeResults.errors.concat($.errors),this._completeResults.meta=$.meta),this._completed||!E||!H(this._config.complete)||$&&$.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),E||$&&$.meta.paused||this._nextChunk(),$}this._halted=!0},this._sendError=function(p){H(this._config.error)?this._config.error(p):o&&this._config.error&&r.postMessage({workerId:l.WORKER_ID,error:p,finished:!1})}}function y(h){var p;(h=h||{}).chunkSize||(h.chunkSize=l.RemoteChunkSize),u.call(this,h),this._nextChunk=a?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(b){this._input=b,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(p=new XMLHttpRequest,this._config.withCredentials&&(p.withCredentials=this._config.withCredentials),a||(p.onload=D(this._chunkLoaded,this),p.onerror=D(this._chunkError,this)),p.open(this._config.downloadRequestBody?"POST":"GET",this._input,!a),this._config.downloadRequestHeaders){var b,E=this._config.downloadRequestHeaders;for(b in E)p.setRequestHeader(b,E[b])}var $;this._config.chunkSize&&($=this._start+this._config.chunkSize-1,p.setRequestHeader("Range","bytes="+this._start+"-"+$));try{p.send(this._config.downloadRequestBody)}catch(X){this._chunkError(X.message)}a&&p.status===0&&this._chunkError()}},this._chunkLoaded=function(){p.readyState===4&&(p.status<200||400<=p.status?this._chunkError():(this._start+=this._config.chunkSize||p.responseText.length,this._finished=!this._config.chunkSize||this._start>=(b=>(b=b.getResponseHeader("Content-Range"))!==null?parseInt(b.substring(b.lastIndexOf("/")+1)):-1)(p),this.parseChunk(p.responseText)))},this._chunkError=function(b){b=p.statusText||b,this._sendError(new Error(b))}}function d(h){(h=h||{}).chunkSize||(h.chunkSize=l.LocalChunkSize),u.call(this,h);var p,b,E=typeof FileReader<"u";this.stream=function($){this._input=$,b=$.slice||$.webkitSlice||$.mozSlice,E?((p=new FileReader).onload=D(this._chunkLoaded,this),p.onerror=D(this._chunkError,this)):p=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var $=this._input,X=(this._config.chunkSize&&(X=Math.min(this._start+this._config.chunkSize,this._input.size),$=b.call($,this._start,X)),p.readAsText($,this._config.encoding));E||this._chunkLoaded({target:{result:X}})},this._chunkLoaded=function($){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk($.target.result)},this._chunkError=function(){this._sendError(p.error)}}function m(h){var p;u.call(this,h=h||{}),this.stream=function(b){return p=b,this._nextChunk()},this._nextChunk=function(){var b,E;if(!this._finished)return b=this._config.chunkSize,p=b?(E=p.substring(0,b),p.substring(b)):(E=p,""),this._finished=!p,this.parseChunk(E)}}function W(h){u.call(this,h=h||{});var p=[],b=!0,E=!1;this.pause=function(){u.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){u.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function($){this._input=$,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){E&&p.length===1&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),p.length?this.parseChunk(p.shift()):b=!0},this._streamData=D(function($){try{p.push(typeof $=="string"?$:$.toString(this._config.encoding)),b&&(b=!1,this._checkIsFinished(),this.parseChunk(p.shift()))}catch(X){this._streamError(X)}},this),this._streamError=D(function($){this._streamCleanUp(),this._sendError($)},this),this._streamEnd=D(function(){this._streamCleanUp(),E=!0,this._streamData("")},this),this._streamCleanUp=D(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function U(h){var p,b,E,$,X=Math.pow(2,53),v=-X,z=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,_=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,S=this,F=0,C=0,q=!1,I=!1,L=[],R={data:[],errors:[],meta:{}};function j(G){return h.skipEmptyLines==="greedy"?G.join("").trim()==="":G.length===1&&G[0].length===0}function nt(){if(R&&E&&(ot("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+l.DefaultDelimiter+"'"),E=!1),h.skipEmptyLines&&(R.data=R.data.filter(function(O){return!j(O)})),it()){let O=function(w,rt){H(h.transformHeader)&&(w=h.transformHeader(w,rt)),L.push(w)};if(R)if(Array.isArray(R.data[0])){for(var G=0;it()&&G<R.data.length;G++)R.data[G].forEach(O);R.data.splice(0,1)}else R.data.forEach(O)}function M(O,w){for(var rt=h.header?{}:[],P=0;P<O.length;P++){var J=P,B=O[P],B=((pt,K)=>(ct=>(h.dynamicTypingFunction&&h.dynamicTyping[ct]===void 0&&(h.dynamicTyping[ct]=h.dynamicTypingFunction(ct)),(h.dynamicTyping[ct]||h.dynamicTyping)===!0))(pt)?K==="true"||K==="TRUE"||K!=="false"&&K!=="FALSE"&&((ct=>{if(z.test(ct)&&(ct=parseFloat(ct),v<ct&&ct<X))return 1})(K)?parseFloat(K):_.test(K)?new Date(K):K===""?null:K):K)(J=h.header?P>=L.length?"__parsed_extra":L[P]:J,B=h.transform?h.transform(B,J):B);J==="__parsed_extra"?(rt[J]=rt[J]||[],rt[J].push(B)):rt[J]=B}return h.header&&(P>L.length?ot("FieldMismatch","TooManyFields","Too many fields: expected "+L.length+" fields but parsed "+P,C+w):P<L.length&&ot("FieldMismatch","TooFewFields","Too few fields: expected "+L.length+" fields but parsed "+P,C+w)),rt}var Y;R&&(h.header||h.dynamicTyping||h.transform)&&(Y=1,!R.data.length||Array.isArray(R.data[0])?(R.data=R.data.map(M),Y=R.data.length):R.data=M(R.data,0),h.header&&R.meta&&(R.meta.fields=L),C+=Y)}function it(){return h.header&&L.length===0}function ot(G,M,Y,O){G={type:G,code:M,message:Y},O!==void 0&&(G.row=O),R.errors.push(G)}H(h.step)&&($=h.step,h.step=function(G){R=G,it()?nt():(nt(),R.data.length!==0&&(F+=G.data.length,h.preview&&F>h.preview?b.abort():(R.data=R.data[0],$(R,S))))}),this.parse=function(G,M,Y){var O=h.quoteChar||'"',O=(h.newline||(h.newline=this.guessLineEndings(G,O)),E=!1,h.delimiter?H(h.delimiter)&&(h.delimiter=h.delimiter(G),R.meta.delimiter=h.delimiter):((O=((w,rt,P,J,B)=>{var pt,K,ct,_t;B=B||[",","	","|",";",l.RECORD_SEP,l.UNIT_SEP];for(var Mt=0;Mt<B.length;Mt++){for(var vt,T=B[Mt],f=0,g=0,x=0,k=(ct=void 0,new A({comments:J,delimiter:T,newline:rt,preview:10}).parse(w)),N=0;N<k.data.length;N++)P&&j(k.data[N])?x++:(vt=k.data[N].length,g+=vt,ct===void 0?ct=vt:0<vt&&(f+=Math.abs(vt-ct),ct=vt));0<k.data.length&&(g/=k.data.length-x),(K===void 0||f<=K)&&(_t===void 0||_t<g)&&1.99<g&&(K=f,pt=T,_t=g)}return{successful:!!(h.delimiter=pt),bestDelimiter:pt}})(G,h.newline,h.skipEmptyLines,h.comments,h.delimitersToGuess)).successful?h.delimiter=O.bestDelimiter:(E=!0,h.delimiter=l.DefaultDelimiter),R.meta.delimiter=h.delimiter),lt(h));return h.preview&&h.header&&O.preview++,p=G,b=new A(O),R=b.parse(p,M,Y),nt(),q?{meta:{paused:!0}}:R||{meta:{paused:!1}}},this.paused=function(){return q},this.pause=function(){q=!0,b.abort(),p=H(h.chunk)?"":p.substring(b.getCharIndex())},this.resume=function(){S.streamer._halted?(q=!1,S.streamer.parseChunk(p,!0)):setTimeout(S.resume,3)},this.aborted=function(){return I},this.abort=function(){I=!0,b.abort(),R.meta.aborted=!0,H(h.complete)&&h.complete(R),p=""},this.guessLineEndings=function(w,O){w=w.substring(0,1048576);var O=new RegExp(et(O)+"([^]*?)"+et(O),"gm"),Y=(w=w.replace(O,"")).split("\r"),O=w.split(`
`),w=1<O.length&&O[0].length<Y[0].length;if(Y.length===1||w)return`
`;for(var rt=0,P=0;P<Y.length;P++)Y[P][0]===`
`&&rt++;return rt>=Y.length/2?`\r
`:"\r"}}function et(h){return h.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function A(h){var p=(h=h||{}).delimiter,b=h.newline,E=h.comments,$=h.step,X=h.preview,v=h.fastMode,z=null,_=!1,S=h.quoteChar==null?'"':h.quoteChar,F=S;if(h.escapeChar!==void 0&&(F=h.escapeChar),(typeof p!="string"||-1<l.BAD_DELIMITERS.indexOf(p))&&(p=","),E===p)throw new Error("Comment character same as delimiter");E===!0?E="#":(typeof E!="string"||-1<l.BAD_DELIMITERS.indexOf(E))&&(E=!1),b!==`
`&&b!=="\r"&&b!==`\r
`&&(b=`
`);var C=0,q=!1;this.parse=function(I,L,R){if(typeof I!="string")throw new Error("Input must be a string");var j=I.length,nt=p.length,it=b.length,ot=E.length,G=H($),M=[],Y=[],O=[],w=C=0;if(!I)return f();if(v||v!==!1&&I.indexOf(S)===-1){for(var rt=I.split(b),P=0;P<rt.length;P++){if(O=rt[P],C+=O.length,P!==rt.length-1)C+=b.length;else if(R)return f();if(!E||O.substring(0,ot)!==E){if(G){if(M=[],_t(O.split(p)),g(),q)return f()}else _t(O.split(p));if(X&&X<=P)return M=M.slice(0,X),f(!0)}}return f()}for(var J=I.indexOf(p,C),B=I.indexOf(b,C),pt=new RegExp(et(F)+et(S),"g"),K=I.indexOf(S,C);;)if(I[C]===S)for(K=C,C++;;){if((K=I.indexOf(S,K+1))===-1)return R||Y.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:M.length,index:C}),vt();if(K===j-1)return vt(I.substring(C,K).replace(pt,S));if(S===F&&I[K+1]===F)K++;else if(S===F||K===0||I[K-1]!==F){J!==-1&&J<K+1&&(J=I.indexOf(p,K+1));var ct=Mt((B=B!==-1&&B<K+1?I.indexOf(b,K+1):B)===-1?J:Math.min(J,B));if(I.substr(K+1+ct,nt)===p){O.push(I.substring(C,K).replace(pt,S)),I[C=K+1+ct+nt]!==S&&(K=I.indexOf(S,C)),J=I.indexOf(p,C),B=I.indexOf(b,C);break}if(ct=Mt(B),I.substring(K+1+ct,K+1+ct+it)===b){if(O.push(I.substring(C,K).replace(pt,S)),T(K+1+ct+it),J=I.indexOf(p,C),K=I.indexOf(S,C),G&&(g(),q))return f();if(X&&M.length>=X)return f(!0);break}Y.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:M.length,index:C}),K++}}else if(E&&O.length===0&&I.substring(C,C+ot)===E){if(B===-1)return f();C=B+it,B=I.indexOf(b,C),J=I.indexOf(p,C)}else if(J!==-1&&(J<B||B===-1))O.push(I.substring(C,J)),C=J+nt,J=I.indexOf(p,C);else{if(B===-1)break;if(O.push(I.substring(C,B)),T(B+it),G&&(g(),q))return f();if(X&&M.length>=X)return f(!0)}return vt();function _t(x){M.push(x),w=C}function Mt(x){var k=0;return k=x!==-1&&(x=I.substring(K+1,x))&&x.trim()===""?x.length:k}function vt(x){return R||(x===void 0&&(x=I.substring(C)),O.push(x),C=j,_t(O),G&&g()),f()}function T(x){C=x,_t(O),O=[],B=I.indexOf(b,C)}function f(x){if(h.header&&!L&&M.length&&!_){var k=M[0],N=Object.create(null),Z=new Set(k);let st=!1;for(let ht=0;ht<k.length;ht++){let ft=k[ht];if(N[ft=H(h.transformHeader)?h.transformHeader(ft,ht):ft]){let dt,xt=N[ft];for(;dt=ft+"_"+xt,xt++,Z.has(dt););Z.add(dt),k[ht]=dt,N[ft]++,st=!0,(z=z===null?{}:z)[dt]=ft}else N[ft]=1,k[ht]=ft;Z.add(ft)}st&&console.warn("Duplicate headers found and renamed."),_=!0}return{data:M,errors:Y,meta:{delimiter:p,linebreak:b,aborted:q,truncated:!!x,cursor:w+(L||0),renamedHeaders:z}}}function g(){$(f()),M=[],Y=[]}},this.abort=function(){q=!0},this.getCharIndex=function(){return C}}function tt(h){var p=h.data,b=s[p.workerId],E=!1;if(p.error)b.userError(p.error,p.file);else if(p.results&&p.results.data){var $={abort:function(){E=!0,Q(p.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:V,resume:V};if(H(b.userStep)){for(var X=0;X<p.results.data.length&&(b.userStep({data:p.results.data[X],errors:p.results.errors,meta:p.results.meta},$),!E);X++);delete p.results}else H(b.userChunk)&&(b.userChunk(p.results,$,p.file),delete p.results)}p.finished&&!E&&Q(p.workerId,p.results)}function Q(h,p){var b=s[h];H(b.userComplete)&&b.userComplete(p),b.terminate(),delete s[h]}function V(){throw new Error("Not implemented.")}function lt(h){if(typeof h!="object"||h===null)return h;var p,b=Array.isArray(h)?[]:{};for(p in h)b[p]=lt(h[p]);return b}function D(h,p){return function(){h.apply(p,arguments)}}function H(h){return typeof h=="function"}return l.parse=function(h,p){var b=(p=p||{}).dynamicTyping||!1;if(H(b)&&(p.dynamicTypingFunction=b,b={}),p.dynamicTyping=b,p.transform=!!H(p.transform)&&p.transform,!p.worker||!l.WORKERS_SUPPORTED)return b=null,l.NODE_STREAM_INPUT,typeof h=="string"?(h=(E=>E.charCodeAt(0)!==65279?E:E.slice(1))(h),b=new(p.download?y:m)(p)):h.readable===!0&&H(h.read)&&H(h.on)?b=new W(p):(r.File&&h instanceof File||h instanceof Object)&&(b=new d(p)),b.stream(h);(b=(()=>{var E;return!!l.WORKERS_SUPPORTED&&(E=(()=>{var $=r.URL||r.webkitURL||null,X=n.toString();return l.BLOB_URL||(l.BLOB_URL=$.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",X,")();"],{type:"text/javascript"})))})(),(E=new r.Worker(E)).onmessage=tt,E.id=c++,s[E.id]=E)})()).userStep=p.step,b.userChunk=p.chunk,b.userComplete=p.complete,b.userError=p.error,p.step=H(p.step),p.chunk=H(p.chunk),p.complete=H(p.complete),p.error=H(p.error),delete p.worker,b.postMessage({input:h,config:p,workerId:b.id})},l.unparse=function(h,p){var b=!1,E=!0,$=",",X=`\r
`,v='"',z=v+v,_=!1,S=null,F=!1,C=((()=>{if(typeof p=="object"){if(typeof p.delimiter!="string"||l.BAD_DELIMITERS.filter(function(L){return p.delimiter.indexOf(L)!==-1}).length||($=p.delimiter),typeof p.quotes!="boolean"&&typeof p.quotes!="function"&&!Array.isArray(p.quotes)||(b=p.quotes),typeof p.skipEmptyLines!="boolean"&&typeof p.skipEmptyLines!="string"||(_=p.skipEmptyLines),typeof p.newline=="string"&&(X=p.newline),typeof p.quoteChar=="string"&&(v=p.quoteChar),typeof p.header=="boolean"&&(E=p.header),Array.isArray(p.columns)){if(p.columns.length===0)throw new Error("Option columns is empty");S=p.columns}p.escapeChar!==void 0&&(z=p.escapeChar+v),p.escapeFormulae instanceof RegExp?F=p.escapeFormulae:typeof p.escapeFormulae=="boolean"&&p.escapeFormulae&&(F=/^[=+\-@\t\r].*$/)}})(),new RegExp(et(v),"g"));if(typeof h=="string"&&(h=JSON.parse(h)),Array.isArray(h)){if(!h.length||Array.isArray(h[0]))return q(null,h,_);if(typeof h[0]=="object")return q(S||Object.keys(h[0]),h,_)}else if(typeof h=="object")return typeof h.data=="string"&&(h.data=JSON.parse(h.data)),Array.isArray(h.data)&&(h.fields||(h.fields=h.meta&&h.meta.fields||S),h.fields||(h.fields=Array.isArray(h.data[0])?h.fields:typeof h.data[0]=="object"?Object.keys(h.data[0]):[]),Array.isArray(h.data[0])||typeof h.data[0]=="object"||(h.data=[h.data])),q(h.fields||[],h.data||[],_);throw new Error("Unable to serialize unrecognized input");function q(L,R,j){var nt="",it=(typeof L=="string"&&(L=JSON.parse(L)),typeof R=="string"&&(R=JSON.parse(R)),Array.isArray(L)&&0<L.length),ot=!Array.isArray(R[0]);if(it&&E){for(var G=0;G<L.length;G++)0<G&&(nt+=$),nt+=I(L[G],G);0<R.length&&(nt+=X)}for(var M=0;M<R.length;M++){var Y=(it?L:R[M]).length,O=!1,w=it?Object.keys(R[M]).length===0:R[M].length===0;if(j&&!it&&(O=j==="greedy"?R[M].join("").trim()==="":R[M].length===1&&R[M][0].length===0),j==="greedy"&&it){for(var rt=[],P=0;P<Y;P++){var J=ot?L[P]:P;rt.push(R[M][J])}O=rt.join("").trim()===""}if(!O){for(var B=0;B<Y;B++){0<B&&!w&&(nt+=$);var pt=it&&ot?L[B]:B;nt+=I(R[M][pt],B)}M<R.length-1&&(!j||0<Y&&!w)&&(nt+=X)}}return nt}function I(L,R){var j,nt;return L==null?"":L.constructor===Date?JSON.stringify(L).slice(1,25):(nt=!1,F&&typeof L=="string"&&F.test(L)&&(L="'"+L,nt=!0),j=L.toString().replace(C,z),(nt=nt||b===!0||typeof b=="function"&&b(L,R)||Array.isArray(b)&&b[R]||((it,ot)=>{for(var G=0;G<ot.length;G++)if(-1<it.indexOf(ot[G]))return!0;return!1})(j,l.BAD_DELIMITERS)||-1<j.indexOf($)||j.charAt(0)===" "||j.charAt(j.length-1)===" ")?v+j+v:j)}},l.RECORD_SEP="",l.UNIT_SEP="",l.BYTE_ORDER_MARK="\uFEFF",l.BAD_DELIMITERS=["\r",`
`,'"',l.BYTE_ORDER_MARK],l.WORKERS_SUPPORTED=!a&&!!r.Worker,l.NODE_STREAM_INPUT=1,l.LocalChunkSize=10485760,l.RemoteChunkSize=5242880,l.DefaultDelimiter=",",l.Parser=A,l.ParserHandle=U,l.NetworkStreamer=y,l.FileStreamer=d,l.StringStreamer=m,l.ReadableStreamStreamer=W,r.jQuery&&((i=r.jQuery).fn.parse=function(h){var p=h.config||{},b=[];return this.each(function(X){if(!(i(this).prop("tagName").toUpperCase()==="INPUT"&&i(this).attr("type").toLowerCase()==="file"&&r.FileReader)||!this.files||this.files.length===0)return!0;for(var v=0;v<this.files.length;v++)b.push({file:this.files[v],inputElem:this,instanceConfig:i.extend({},p)})}),E(),this;function E(){if(b.length===0)H(h.complete)&&h.complete();else{var X,v,z,_,S=b[0];if(H(h.before)){var F=h.before(S.file,S.inputElem);if(typeof F=="object"){if(F.action==="abort")return X="AbortError",v=S.file,z=S.inputElem,_=F.reason,void(H(h.error)&&h.error({name:X},v,z,_));if(F.action==="skip")return void $();typeof F.config=="object"&&(S.instanceConfig=i.extend(S.instanceConfig,F.config))}else if(F==="skip")return void $()}var C=S.instanceConfig.complete;S.instanceConfig.complete=function(q){H(C)&&C(q,S.file,S.inputElem),$()},l.parse(S.file,S.instanceConfig)}}function $(){b.splice(0,1),E()}}),o&&(r.onmessage=function(h){h=h.data,l.WORKER_ID===void 0&&h&&(l.WORKER_ID=h.workerId),typeof h.input=="string"?r.postMessage({workerId:l.WORKER_ID,results:l.parse(h.input,h.config),finished:!0}):(r.File&&h.input instanceof File||h.input instanceof Object)&&(h=l.parse(h.input,h.config))&&r.postMessage({workerId:l.WORKER_ID,results:h,finished:!0})}),(y.prototype=Object.create(u.prototype)).constructor=y,(d.prototype=Object.create(u.prototype)).constructor=d,(m.prototype=Object.create(m.prototype)).constructor=m,(W.prototype=Object.create(u.prototype)).constructor=W,l})}(_e)),_e.exports}var ii=ri();const ai=se(ii);function Qt(t){const e=Number(t);return Number.isFinite(e)?e:void 0}class oi{static parse(e){return ai.parse(e,{header:!0,skipEmptyLines:!0}).data.map(r=>{let i;const a=(r.labelKind??"").trim().toLowerCase();if(a==="text"?i={kind:"text",text:r.labelText}:a==="image"?i={kind:"image",src:r.labelSrc||"",width:Qt(r.labelWidth),height:Qt(r.labelHeight),fit:r.labelFit||void 0,zoom:Qt(r.labelZoom)}:a==="video"&&(i={kind:"video",src:r.labelSrc||"",width:Qt(r.labelWidth),height:Qt(r.labelHeight),fit:r.labelFit||void 0,zoom:Qt(r.labelZoom)}),!i&&r.backgroundType){const s=r.backgroundType.trim().toLowerCase();s==="image"&&r.backgroundSource?i={kind:"image",src:r.backgroundSource}:s==="video"&&r.backgroundSource?i={kind:"video",src:r.backgroundSource}:s==="text"&&(i={kind:"text",text:r.description||r.title})}let o;if(r.metadata)try{o=JSON.parse(r.metadata)}catch{}return{title:r.title,start:new Date(r.start),end:r.end?new Date(r.end):void 0,description:r.description,overlayColor:r.overlayColor??r.overlayColor??void 0,label:i,metadata:o}})}}class si{static parse(e){return(typeof e=="string"?JSON.parse(e.replace(/^\uFEFF/,"").trim()):e).items.map(r=>{let i=r.label;if(!i&&r.background){const a=(r.background.type??"").toLowerCase();a==="image"&&r.background.source?i={kind:"image",src:r.background.source}:a==="video"&&r.background.source?i={kind:"video",src:r.background.source}:a==="text"&&(i={kind:"text",text:r.description??r.title})}return{title:r.title,start:new Date(r.start),end:r.end?new Date(r.end):void 0,description:r.description,overlayColor:r.overlayColor??r.background?.overlayColor,label:i,metadata:r.metadata}})}}class li{static parse(e){const r=new DOMParser().parseFromString(e,"application/xml"),i=[];return r.querySelectorAll("item").forEach(a=>{const o=u=>a.querySelector(u)?.textContent?.trim()||"",s=a.querySelector("label");let c;if(s){const u=(s.getAttribute("kind")||"").toLowerCase();u==="text"?c={kind:"text",text:s.textContent?.trim()||void 0}:u==="image"?c={kind:"image",src:s.getAttribute("src")||"",width:s.getAttribute("width")?Number(s.getAttribute("width")):void 0,height:s.getAttribute("height")?Number(s.getAttribute("height")):void 0,fit:s.getAttribute("fit")||void 0,zoom:s.getAttribute("zoom")?Number(s.getAttribute("zoom")):void 0}:u==="video"&&(c={kind:"video",src:s.getAttribute("src")||"",width:s.getAttribute("width")?Number(s.getAttribute("width")):void 0,height:s.getAttribute("height")?Number(s.getAttribute("height")):void 0,fit:s.getAttribute("fit")||void 0,zoom:s.getAttribute("zoom")?Number(s.getAttribute("zoom")):void 0})}const l=o("overlayColor")||s?.getAttribute("overlayColor")||void 0;i.push({title:o("title"),start:new Date(o("start")),end:a.querySelector("end")?new Date(o("end")):void 0,description:o("description"),overlayColor:l,label:c})}),i}}class ci{static parse(e){const r=new DOMParser().parseFromString(e,"application/xml"),i=[];return r.querySelectorAll("listEvent event").forEach(a=>{const o=y=>a.querySelector(y)?.textContent?.trim()||"",s=a.getAttribute("when")||a.querySelector("date")?.getAttribute("when")||"",c=s?new Date(s):new Date(o("date"));let l;const u=a.querySelector("label");if(u){const y=(u.getAttribute("kind")||"").toLowerCase();y==="text"?l={kind:"text",text:u.textContent?.trim()||void 0}:y==="image"?l={kind:"image",src:u.getAttribute("src")||""}:y==="video"&&(l={kind:"video",src:u.getAttribute("src")||""})}else{const y=o("title")||o("desc");y&&(l={kind:"text",text:y})}i.push({title:o("title")||o("desc"),start:c,description:o("desc"),label:l,metadata:{when:s||void 0,type:a.getAttribute("type")||void 0}})}),i}}const Be=new Map;class Ht{static register(e){Be.set(e.name.toLowerCase(),e)}static supportedFormats(){return Array.from(new Set(["csv","json","xml","tei",...Be.keys()]))}static parse(e,n){const r=Be.get(String(n).toLowerCase());if(r)return r.parse(e);switch(n){case"csv":return oi.parse(e);case"json":return si.parse(e);case"xml":return li.parse(e);case"tei":return ci.parse(e);default:throw new Error(`Unsupported data type: ${n}`)}}}function ke(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function ui(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function Ge(t){let e,n,r;t.length!==2?(e=ke,n=(s,c)=>ke(t(s),c),r=(s,c)=>t(s)-c):(e=t===ke||t===ui?t:fi,n=t,r=t);function i(s,c,l=0,u=s.length){if(l<u){if(e(c,c)!==0)return u;do{const y=l+u>>>1;n(s[y],c)<0?l=y+1:u=y}while(l<u)}return l}function a(s,c,l=0,u=s.length){if(l<u){if(e(c,c)!==0)return u;do{const y=l+u>>>1;n(s[y],c)<=0?l=y+1:u=y}while(l<u)}return l}function o(s,c,l=0,u=s.length){const y=i(s,c,l,u-1);return y>l&&r(s[y-1],c)>-r(s[y],c)?y-1:y}return{left:i,center:o,right:a}}function fi(){return 0}function hi(t){return t===null?NaN:+t}const di=Ge(ke).right;Ge(hi).center;function $n(t,e){let n,r;for(const i of t)i!=null&&(n===void 0?i>=i&&(n=r=i):(n>i&&(n=i),r<i&&(r=i)));return[n,r]}class In extends Map{constructor(e,n=mi){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),e!=null)for(const[r,i]of e)this.set(r,i)}get(e){return super.get(zn(this,e))}has(e){return super.has(zn(this,e))}set(e,n){return super.set(pi(this,e),n)}delete(e){return super.delete(gi(this,e))}}function zn({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):n}function pi({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):(t.set(r,n),n)}function gi({_intern:t,_key:e},n){const r=e(n);return t.has(r)&&(n=t.get(r),t.delete(r)),n}function mi(t){return t!==null&&typeof t=="object"?t.valueOf():t}const yi=Math.sqrt(50),vi=Math.sqrt(10),xi=Math.sqrt(2);function Fn(t,e,n){const r=(e-t)/Math.max(0,n),i=Math.floor(Math.log10(r)),a=r/Math.pow(10,i),o=a>=yi?10:a>=vi?5:a>=xi?2:1;let s,c,l;return i<0?(l=Math.pow(10,-i)/o,s=Math.round(t*l),c=Math.round(e*l),s/l<t&&++s,c/l>e&&--c,l=-l):(l=Math.pow(10,i)*o,s=Math.round(t/l),c=Math.round(e/l),s*l<t&&++s,c*l>e&&--c),c<s&&.5<=n&&n<2?Fn(t,e,n*2):[s,c,l]}function Nn(t,e,n){return e=+e,t=+t,n=+n,Fn(t,e,n)[2]}function Rn(t,e,n){e=+e,t=+t,n=+n;const r=e<t,i=r?Nn(e,t,n):Nn(t,e,n);return(r?-1:1)*(i<0?1/-i:i)}function bi(t,e,n){t=+t,e=+e,n=(i=arguments.length)<2?(e=t,t=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((e-t)/n))|0,a=new Array(i);++r<i;)a[r]=t+r*n;return a}function wi(t){return t}var Ve=1,je=2,Ke=3,le=4,Ln=1e-6;function _i(t){return"translate("+t+",0)"}function ki(t){return"translate(0,"+t+")"}function Mi(t){return e=>+t(e)}function Si(t,e){return e=Math.max(0,t.bandwidth()-e*2)/2,t.round()&&(e=Math.round(e)),n=>+t(n)+e}function Ti(){return!this.__axis}function Un(t,e){var n=[],r=null,i=null,a=6,o=6,s=3,c=typeof window<"u"&&window.devicePixelRatio>1?0:.5,l=t===Ve||t===le?-1:1,u=t===le||t===je?"x":"y",y=t===Ve||t===Ke?_i:ki;function d(m){var W=r??(e.ticks?e.ticks.apply(e,n):e.domain()),U=i??(e.tickFormat?e.tickFormat.apply(e,n):wi),et=Math.max(a,0)+s,A=e.range(),tt=+A[0]+c,Q=+A[A.length-1]+c,V=(e.bandwidth?Si:Mi)(e.copy(),c),lt=m.selection?m.selection():m,D=lt.selectAll(".domain").data([null]),H=lt.selectAll(".tick").data(W,e).order(),h=H.exit(),p=H.enter().append("g").attr("class","tick"),b=H.select("line"),E=H.select("text");D=D.merge(D.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),H=H.merge(p),b=b.merge(p.append("line").attr("stroke","currentColor").attr(u+"2",l*a)),E=E.merge(p.append("text").attr("fill","currentColor").attr(u,l*et).attr("dy",t===Ve?"0em":t===Ke?"0.71em":"0.32em")),m!==lt&&(D=D.transition(m),H=H.transition(m),b=b.transition(m),E=E.transition(m),h=h.transition(m).attr("opacity",Ln).attr("transform",function($){return isFinite($=V($))?y($+c):this.getAttribute("transform")}),p.attr("opacity",Ln).attr("transform",function($){var X=this.parentNode.__axis;return y((X&&isFinite(X=X($))?X:V($))+c)})),h.remove(),D.attr("d",t===le||t===je?o?"M"+l*o+","+tt+"H"+c+"V"+Q+"H"+l*o:"M"+c+","+tt+"V"+Q:o?"M"+tt+","+l*o+"V"+c+"H"+Q+"V"+l*o:"M"+tt+","+c+"H"+Q),H.attr("opacity",1).attr("transform",function($){return y(V($)+c)}),b.attr(u+"2",l*a),E.attr(u,l*et).text(U),lt.filter(Ti).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",t===je?"start":t===le?"end":"middle"),lt.each(function(){this.__axis=V})}return d.scale=function(m){return arguments.length?(e=m,d):e},d.ticks=function(){return n=Array.from(arguments),d},d.tickArguments=function(m){return arguments.length?(n=m==null?[]:Array.from(m),d):n.slice()},d.tickValues=function(m){return arguments.length?(r=m==null?null:Array.from(m),d):r&&r.slice()},d.tickFormat=function(m){return arguments.length?(i=m,d):i},d.tickSize=function(m){return arguments.length?(a=o=+m,d):a},d.tickSizeInner=function(m){return arguments.length?(a=+m,d):a},d.tickSizeOuter=function(m){return arguments.length?(o=+m,d):o},d.tickPadding=function(m){return arguments.length?(s=+m,d):s},d.offset=function(m){return arguments.length?(c=+m,d):c},d}function Ci(t){return Un(Ke,t)}function Hn(t){return Un(le,t)}var Ai={value:()=>{}};function Ze(){for(var t=0,e=arguments.length,n={},r;t<e;++t){if(!(r=arguments[t]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new Me(n)}function Me(t){this._=t}function Ei(t,e){return t.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!e.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}Me.prototype=Ze.prototype={constructor:Me,on:function(t,e){var n=this._,r=Ei(t+"",n),i,a=-1,o=r.length;if(arguments.length<2){for(;++a<o;)if((i=(t=r[a]).type)&&(i=Di(n[i],t.name)))return i;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++a<o;)if(i=(t=r[a]).type)n[i]=Yn(n[i],t.name,e);else if(e==null)for(i in n)n[i]=Yn(n[i],t.name,null);return this},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new Me(t)},call:function(t,e){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,a;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(a=this._[t],r=0,i=a.length;r<i;++r)a[r].value.apply(e,n)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,a=r.length;i<a;++i)r[i].value.apply(e,n)}};function Di(t,e){for(var n=0,r=t.length,i;n<r;++n)if((i=t[n]).name===e)return i.value}function Yn(t,e,n){for(var r=0,i=t.length;r<i;++r)if(t[r].name===e){t[r]=Ai,t=t.slice(0,r).concat(t.slice(r+1));break}return n!=null&&t.push({name:e,value:n}),t}var Qe="http://www.w3.org/1999/xhtml";const Pn={svg:"http://www.w3.org/2000/svg",xhtml:Qe,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Se(t){var e=t+="",n=e.indexOf(":");return n>=0&&(e=t.slice(0,n))!=="xmlns"&&(t=t.slice(n+1)),Pn.hasOwnProperty(e)?{space:Pn[e],local:t}:t}function Oi(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===Qe&&e.documentElement.namespaceURI===Qe?e.createElement(t):e.createElementNS(n,t)}}function $i(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function Wn(t){var e=Se(t);return(e.local?$i:Oi)(e)}function Ii(){}function Je(t){return t==null?Ii:function(){return this.querySelector(t)}}function zi(t){typeof t!="function"&&(t=Je(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var a=e[i],o=a.length,s=r[i]=new Array(o),c,l,u=0;u<o;++u)(c=a[u])&&(l=t.call(c,c.__data__,u,a))&&("__data__"in c&&(l.__data__=c.__data__),s[u]=l);return new wt(r,this._parents)}function Fi(t){return t==null?[]:Array.isArray(t)?t:Array.from(t)}function Ni(){return[]}function qn(t){return t==null?Ni:function(){return this.querySelectorAll(t)}}function Ri(t){return function(){return Fi(t.apply(this,arguments))}}function Li(t){typeof t=="function"?t=Ri(t):t=qn(t);for(var e=this._groups,n=e.length,r=[],i=[],a=0;a<n;++a)for(var o=e[a],s=o.length,c,l=0;l<s;++l)(c=o[l])&&(r.push(t.call(c,c.__data__,l,o)),i.push(c));return new wt(r,i)}function Xn(t){return function(){return this.matches(t)}}function Bn(t){return function(e){return e.matches(t)}}var Ui=Array.prototype.find;function Hi(t){return function(){return Ui.call(this.children,t)}}function Yi(){return this.firstElementChild}function Pi(t){return this.select(t==null?Yi:Hi(typeof t=="function"?t:Bn(t)))}var Wi=Array.prototype.filter;function qi(){return Array.from(this.children)}function Xi(t){return function(){return Wi.call(this.children,t)}}function Bi(t){return this.selectAll(t==null?qi:Xi(typeof t=="function"?t:Bn(t)))}function Gi(t){typeof t!="function"&&(t=Xn(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var a=e[i],o=a.length,s=r[i]=[],c,l=0;l<o;++l)(c=a[l])&&t.call(c,c.__data__,l,a)&&s.push(c);return new wt(r,this._parents)}function Gn(t){return new Array(t.length)}function Vi(){return new wt(this._enter||this._groups.map(Gn),this._parents)}function Te(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}Te.prototype={constructor:Te,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function ji(t){return function(){return t}}function Ki(t,e,n,r,i,a){for(var o=0,s,c=e.length,l=a.length;o<l;++o)(s=e[o])?(s.__data__=a[o],r[o]=s):n[o]=new Te(t,a[o]);for(;o<c;++o)(s=e[o])&&(i[o]=s)}function Zi(t,e,n,r,i,a,o){var s,c,l=new Map,u=e.length,y=a.length,d=new Array(u),m;for(s=0;s<u;++s)(c=e[s])&&(d[s]=m=o.call(c,c.__data__,s,e)+"",l.has(m)?i[s]=c:l.set(m,c));for(s=0;s<y;++s)m=o.call(t,a[s],s,a)+"",(c=l.get(m))?(r[s]=c,c.__data__=a[s],l.delete(m)):n[s]=new Te(t,a[s]);for(s=0;s<u;++s)(c=e[s])&&l.get(d[s])===c&&(i[s]=c)}function Qi(t){return t.__data__}function Ji(t,e){if(!arguments.length)return Array.from(this,Qi);var n=e?Zi:Ki,r=this._parents,i=this._groups;typeof t!="function"&&(t=ji(t));for(var a=i.length,o=new Array(a),s=new Array(a),c=new Array(a),l=0;l<a;++l){var u=r[l],y=i[l],d=y.length,m=ta(t.call(u,u&&u.__data__,l,r)),W=m.length,U=s[l]=new Array(W),et=o[l]=new Array(W),A=c[l]=new Array(d);n(u,y,U,et,A,m,e);for(var tt=0,Q=0,V,lt;tt<W;++tt)if(V=U[tt]){for(tt>=Q&&(Q=tt+1);!(lt=et[Q])&&++Q<W;);V._next=lt||null}}return o=new wt(o,r),o._enter=s,o._exit=c,o}function ta(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function ea(){return new wt(this._exit||this._groups.map(Gn),this._parents)}function na(t,e,n){var r=this.enter(),i=this,a=this.exit();return typeof t=="function"?(r=t(r),r&&(r=r.selection())):r=r.append(t+""),e!=null&&(i=e(i),i&&(i=i.selection())),n==null?a.remove():n(a),r&&i?r.merge(i).order():i}function ra(t){for(var e=t.selection?t.selection():t,n=this._groups,r=e._groups,i=n.length,a=r.length,o=Math.min(i,a),s=new Array(i),c=0;c<o;++c)for(var l=n[c],u=r[c],y=l.length,d=s[c]=new Array(y),m,W=0;W<y;++W)(m=l[W]||u[W])&&(d[W]=m);for(;c<i;++c)s[c]=n[c];return new wt(s,this._parents)}function ia(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var r=t[e],i=r.length-1,a=r[i],o;--i>=0;)(o=r[i])&&(a&&o.compareDocumentPosition(a)^4&&a.parentNode.insertBefore(o,a),a=o);return this}function aa(t){t||(t=oa);function e(y,d){return y&&d?t(y.__data__,d.__data__):!y-!d}for(var n=this._groups,r=n.length,i=new Array(r),a=0;a<r;++a){for(var o=n[a],s=o.length,c=i[a]=new Array(s),l,u=0;u<s;++u)(l=o[u])&&(c[u]=l);c.sort(e)}return new wt(i,this._parents).order()}function oa(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function sa(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function la(){return Array.from(this)}function ca(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,a=r.length;i<a;++i){var o=r[i];if(o)return o}return null}function ua(){let t=0;for(const e of this)++t;return t}function fa(){return!this.node()}function ha(t){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var i=e[n],a=0,o=i.length,s;a<o;++a)(s=i[a])&&t.call(s,s.__data__,a,i);return this}function da(t){return function(){this.removeAttribute(t)}}function pa(t){return function(){this.removeAttributeNS(t.space,t.local)}}function ga(t,e){return function(){this.setAttribute(t,e)}}function ma(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function ya(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttribute(t):this.setAttribute(t,n)}}function va(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function xa(t,e){var n=Se(t);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((e==null?n.local?pa:da:typeof e=="function"?n.local?va:ya:n.local?ma:ga)(n,e))}function Vn(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function ba(t){return function(){this.style.removeProperty(t)}}function wa(t,e,n){return function(){this.style.setProperty(t,e,n)}}function _a(t,e,n){return function(){var r=e.apply(this,arguments);r==null?this.style.removeProperty(t):this.style.setProperty(t,r,n)}}function ka(t,e,n){return arguments.length>1?this.each((e==null?ba:typeof e=="function"?_a:wa)(t,e,n??"")):Jt(this.node(),t)}function Jt(t,e){return t.style.getPropertyValue(e)||Vn(t).getComputedStyle(t,null).getPropertyValue(e)}function Ma(t){return function(){delete this[t]}}function Sa(t,e){return function(){this[t]=e}}function Ta(t,e){return function(){var n=e.apply(this,arguments);n==null?delete this[t]:this[t]=n}}function Ca(t,e){return arguments.length>1?this.each((e==null?Ma:typeof e=="function"?Ta:Sa)(t,e)):this.node()[t]}function jn(t){return t.trim().split(/^|\s+/)}function tn(t){return t.classList||new Kn(t)}function Kn(t){this._node=t,this._names=jn(t.getAttribute("class")||"")}Kn.prototype={add:function(t){var e=this._names.indexOf(t);e<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function Zn(t,e){for(var n=tn(t),r=-1,i=e.length;++r<i;)n.add(e[r])}function Qn(t,e){for(var n=tn(t),r=-1,i=e.length;++r<i;)n.remove(e[r])}function Aa(t){return function(){Zn(this,t)}}function Ea(t){return function(){Qn(this,t)}}function Da(t,e){return function(){(e.apply(this,arguments)?Zn:Qn)(this,t)}}function Oa(t,e){var n=jn(t+"");if(arguments.length<2){for(var r=tn(this.node()),i=-1,a=n.length;++i<a;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof e=="function"?Da:e?Aa:Ea)(n,e))}function $a(){this.textContent=""}function Ia(t){return function(){this.textContent=t}}function za(t){return function(){var e=t.apply(this,arguments);this.textContent=e??""}}function Fa(t){return arguments.length?this.each(t==null?$a:(typeof t=="function"?za:Ia)(t)):this.node().textContent}function Na(){this.innerHTML=""}function Ra(t){return function(){this.innerHTML=t}}function La(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e??""}}function Ua(t){return arguments.length?this.each(t==null?Na:(typeof t=="function"?La:Ra)(t)):this.node().innerHTML}function Ha(){this.nextSibling&&this.parentNode.appendChild(this)}function Ya(){return this.each(Ha)}function Pa(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Wa(){return this.each(Pa)}function qa(t){var e=typeof t=="function"?t:Wn(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function Xa(){return null}function Ba(t,e){var n=typeof t=="function"?t:Wn(t),r=e==null?Xa:typeof e=="function"?e:Je(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function Ga(){var t=this.parentNode;t&&t.removeChild(this)}function Va(){return this.each(Ga)}function ja(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function Ka(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function Za(t){return this.select(t?Ka:ja)}function Qa(t){return arguments.length?this.property("__data__",t):this.node().__data__}function Ja(t){return function(e){t.call(this,e,this.__data__)}}function to(t){return t.trim().split(/^|\s+/).map(function(e){var n="",r=e.indexOf(".");return r>=0&&(n=e.slice(r+1),e=e.slice(0,r)),{type:e,name:n}})}function eo(t){return function(){var e=this.__on;if(e){for(var n=0,r=-1,i=e.length,a;n<i;++n)a=e[n],(!t.type||a.type===t.type)&&a.name===t.name?this.removeEventListener(a.type,a.listener,a.options):e[++r]=a;++r?e.length=r:delete this.__on}}}function no(t,e,n){return function(){var r=this.__on,i,a=Ja(e);if(r){for(var o=0,s=r.length;o<s;++o)if((i=r[o]).type===t.type&&i.name===t.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=a,i.options=n),i.value=e;return}}this.addEventListener(t.type,a,n),i={type:t.type,name:t.name,value:e,listener:a,options:n},r?r.push(i):this.__on=[i]}}function ro(t,e,n){var r=to(t+""),i,a=r.length,o;if(arguments.length<2){var s=this.node().__on;if(s){for(var c=0,l=s.length,u;c<l;++c)for(i=0,u=s[c];i<a;++i)if((o=r[i]).type===u.type&&o.name===u.name)return u.value}return}for(s=e?no:eo,i=0;i<a;++i)this.each(s(r[i],e,n));return this}function Jn(t,e,n){var r=Vn(t),i=r.CustomEvent;typeof i=="function"?i=new i(e,n):(i=r.document.createEvent("Event"),n?(i.initEvent(e,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(e,!1,!1)),t.dispatchEvent(i)}function io(t,e){return function(){return Jn(this,t,e)}}function ao(t,e){return function(){return Jn(this,t,e.apply(this,arguments))}}function oo(t,e){return this.each((typeof e=="function"?ao:io)(t,e))}function*so(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,a=r.length,o;i<a;++i)(o=r[i])&&(yield o)}var tr=[null];function wt(t,e){this._groups=t,this._parents=e}function ce(){return new wt([[document.documentElement]],tr)}function lo(){return this}wt.prototype=ce.prototype={constructor:wt,select:zi,selectAll:Li,selectChild:Pi,selectChildren:Bi,filter:Gi,data:Ji,enter:Vi,exit:ea,join:na,merge:ra,selection:lo,order:ia,sort:aa,call:sa,nodes:la,node:ca,size:ua,empty:fa,each:ha,attr:xa,style:ka,property:Ca,classed:Oa,text:Fa,html:Ua,raise:Ya,lower:Wa,append:qa,insert:Ba,remove:Va,clone:Za,datum:Qa,on:ro,dispatch:oo,[Symbol.iterator]:so};function ut(t){return typeof t=="string"?new wt([[document.querySelector(t)]],[document.documentElement]):new wt([[t]],tr)}function co(t){let e;for(;e=t.sourceEvent;)t=e;return t}function Yt(t,e){if(t=co(t),e===void 0&&(e=t.currentTarget),e){var n=e.ownerSVGElement||e;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=t.clientX,r.y=t.clientY,r=r.matrixTransform(e.getScreenCTM().inverse()),[r.x,r.y]}if(e.getBoundingClientRect){var i=e.getBoundingClientRect();return[t.clientX-i.left-e.clientLeft,t.clientY-i.top-e.clientTop]}}return[t.pageX,t.pageY]}const en={capture:!0,passive:!1};function nn(t){t.preventDefault(),t.stopImmediatePropagation()}function uo(t){var e=t.document.documentElement,n=ut(t).on("dragstart.drag",nn,en);"onselectstart"in e?n.on("selectstart.drag",nn,en):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}function fo(t,e){var n=t.document.documentElement,r=ut(t).on("dragstart.drag",null);e&&(r.on("click.drag",nn,en),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}function rn(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function er(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function ue(){}var fe=.7,Ce=1/fe,te="\\s*([+-]?\\d+)\\s*",he="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",At="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",ho=/^#([0-9a-f]{3,8})$/,po=new RegExp(`^rgb\\(${te},${te},${te}\\)$`),go=new RegExp(`^rgb\\(${At},${At},${At}\\)$`),mo=new RegExp(`^rgba\\(${te},${te},${te},${he}\\)$`),yo=new RegExp(`^rgba\\(${At},${At},${At},${he}\\)$`),vo=new RegExp(`^hsl\\(${he},${At},${At}\\)$`),xo=new RegExp(`^hsla\\(${he},${At},${At},${he}\\)$`),nr={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};rn(ue,Pt,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:rr,formatHex:rr,formatHex8:bo,formatHsl:wo,formatRgb:ir,toString:ir});function rr(){return this.rgb().formatHex()}function bo(){return this.rgb().formatHex8()}function wo(){return cr(this).formatHsl()}function ir(){return this.rgb().formatRgb()}function Pt(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=ho.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?ar(e):n===3?new bt(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?Ae(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?Ae(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=po.exec(t))?new bt(e[1],e[2],e[3],1):(e=go.exec(t))?new bt(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=mo.exec(t))?Ae(e[1],e[2],e[3],e[4]):(e=yo.exec(t))?Ae(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=vo.exec(t))?lr(e[1],e[2]/100,e[3]/100,1):(e=xo.exec(t))?lr(e[1],e[2]/100,e[3]/100,e[4]):nr.hasOwnProperty(t)?ar(nr[t]):t==="transparent"?new bt(NaN,NaN,NaN,0):null}function ar(t){return new bt(t>>16&255,t>>8&255,t&255,1)}function Ae(t,e,n,r){return r<=0&&(t=e=n=NaN),new bt(t,e,n,r)}function _o(t){return t instanceof ue||(t=Pt(t)),t?(t=t.rgb(),new bt(t.r,t.g,t.b,t.opacity)):new bt}function an(t,e,n,r){return arguments.length===1?_o(t):new bt(t,e,n,r??1)}function bt(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}rn(bt,an,er(ue,{brighter(t){return t=t==null?Ce:Math.pow(Ce,t),new bt(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?fe:Math.pow(fe,t),new bt(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new bt(Wt(this.r),Wt(this.g),Wt(this.b),Ee(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:or,formatHex:or,formatHex8:ko,formatRgb:sr,toString:sr}));function or(){return`#${qt(this.r)}${qt(this.g)}${qt(this.b)}`}function ko(){return`#${qt(this.r)}${qt(this.g)}${qt(this.b)}${qt((isNaN(this.opacity)?1:this.opacity)*255)}`}function sr(){const t=Ee(this.opacity);return`${t===1?"rgb(":"rgba("}${Wt(this.r)}, ${Wt(this.g)}, ${Wt(this.b)}${t===1?")":`, ${t})`}`}function Ee(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function Wt(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function qt(t){return t=Wt(t),(t<16?"0":"")+t.toString(16)}function lr(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new St(t,e,n,r)}function cr(t){if(t instanceof St)return new St(t.h,t.s,t.l,t.opacity);if(t instanceof ue||(t=Pt(t)),!t)return new St;if(t instanceof St)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),a=Math.max(e,n,r),o=NaN,s=a-i,c=(a+i)/2;return s?(e===a?o=(n-r)/s+(n<r)*6:n===a?o=(r-e)/s+2:o=(e-n)/s+4,s/=c<.5?a+i:2-a-i,o*=60):s=c>0&&c<1?0:o,new St(o,s,c,t.opacity)}function Mo(t,e,n,r){return arguments.length===1?cr(t):new St(t,e,n,r??1)}function St(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}rn(St,Mo,er(ue,{brighter(t){return t=t==null?Ce:Math.pow(Ce,t),new St(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?fe:Math.pow(fe,t),new St(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new bt(on(t>=240?t-240:t+120,i,r),on(t,i,r),on(t<120?t+240:t-120,i,r),this.opacity)},clamp(){return new St(ur(this.h),De(this.s),De(this.l),Ee(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=Ee(this.opacity);return`${t===1?"hsl(":"hsla("}${ur(this.h)}, ${De(this.s)*100}%, ${De(this.l)*100}%${t===1?")":`, ${t})`}`}}));function ur(t){return t=(t||0)%360,t<0?t+360:t}function De(t){return Math.max(0,Math.min(1,t||0))}function on(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const sn=t=>()=>t;function So(t,e){return function(n){return t+n*e}}function To(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function Co(t){return(t=+t)==1?fr:function(e,n){return n-e?To(e,n,t):sn(isNaN(e)?n:e)}}function fr(t,e){var n=e-t;return n?So(t,n):sn(isNaN(t)?e:t)}const Oe=function t(e){var n=Co(e);function r(i,a){var o=n((i=an(i)).r,(a=an(a)).r),s=n(i.g,a.g),c=n(i.b,a.b),l=fr(i.opacity,a.opacity);return function(u){return i.r=o(u),i.g=s(u),i.b=c(u),i.opacity=l(u),i+""}}return r.gamma=t,r}(1);function Ao(t,e){e||(e=[]);var n=t?Math.min(e.length,t.length):0,r=e.slice(),i;return function(a){for(i=0;i<n;++i)r[i]=t[i]*(1-a)+e[i]*a;return r}}function Eo(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function Do(t,e){var n=e?e.length:0,r=t?Math.min(n,t.length):0,i=new Array(r),a=new Array(n),o;for(o=0;o<r;++o)i[o]=un(t[o],e[o]);for(;o<n;++o)a[o]=e[o];return function(s){for(o=0;o<r;++o)a[o]=i[o](s);return a}}function Oo(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}}function Tt(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function $o(t,e){var n={},r={},i;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(i in e)i in t?n[i]=un(t[i],e[i]):r[i]=e[i];return function(a){for(i in n)r[i]=n[i](a);return r}}var ln=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,cn=new RegExp(ln.source,"g");function Io(t){return function(){return t}}function zo(t){return function(e){return t(e)+""}}function hr(t,e){var n=ln.lastIndex=cn.lastIndex=0,r,i,a,o=-1,s=[],c=[];for(t=t+"",e=e+"";(r=ln.exec(t))&&(i=cn.exec(e));)(a=i.index)>n&&(a=e.slice(n,a),s[o]?s[o]+=a:s[++o]=a),(r=r[0])===(i=i[0])?s[o]?s[o]+=i:s[++o]=i:(s[++o]=null,c.push({i:o,x:Tt(r,i)})),n=cn.lastIndex;return n<e.length&&(a=e.slice(n),s[o]?s[o]+=a:s[++o]=a),s.length<2?c[0]?zo(c[0].x):Io(e):(e=c.length,function(l){for(var u=0,y;u<e;++u)s[(y=c[u]).i]=y.x(l);return s.join("")})}function un(t,e){var n=typeof e,r;return e==null||n==="boolean"?sn(e):(n==="number"?Tt:n==="string"?(r=Pt(e))?(e=r,Oe):hr:e instanceof Pt?Oe:e instanceof Date?Oo:Eo(e)?Ao:Array.isArray(e)?Do:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?$o:Tt)(t,e)}function Fo(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}var dr=180/Math.PI,fn={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function pr(t,e,n,r,i,a){var o,s,c;return(o=Math.sqrt(t*t+e*e))&&(t/=o,e/=o),(c=t*n+e*r)&&(n-=t*c,r-=e*c),(s=Math.sqrt(n*n+r*r))&&(n/=s,r/=s,c/=s),t*r<e*n&&(t=-t,e=-e,c=-c,o=-o),{translateX:i,translateY:a,rotate:Math.atan2(e,t)*dr,skewX:Math.atan(c)*dr,scaleX:o,scaleY:s}}var $e;function No(t){const e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?fn:pr(e.a,e.b,e.c,e.d,e.e,e.f)}function Ro(t){return t==null||($e||($e=document.createElementNS("http://www.w3.org/2000/svg","g")),$e.setAttribute("transform",t),!(t=$e.transform.baseVal.consolidate()))?fn:(t=t.matrix,pr(t.a,t.b,t.c,t.d,t.e,t.f))}function gr(t,e,n,r){function i(l){return l.length?l.pop()+" ":""}function a(l,u,y,d,m,W){if(l!==y||u!==d){var U=m.push("translate(",null,e,null,n);W.push({i:U-4,x:Tt(l,y)},{i:U-2,x:Tt(u,d)})}else(y||d)&&m.push("translate("+y+e+d+n)}function o(l,u,y,d){l!==u?(l-u>180?u+=360:u-l>180&&(l+=360),d.push({i:y.push(i(y)+"rotate(",null,r)-2,x:Tt(l,u)})):u&&y.push(i(y)+"rotate("+u+r)}function s(l,u,y,d){l!==u?d.push({i:y.push(i(y)+"skewX(",null,r)-2,x:Tt(l,u)}):u&&y.push(i(y)+"skewX("+u+r)}function c(l,u,y,d,m,W){if(l!==y||u!==d){var U=m.push(i(m)+"scale(",null,",",null,")");W.push({i:U-4,x:Tt(l,y)},{i:U-2,x:Tt(u,d)})}else(y!==1||d!==1)&&m.push(i(m)+"scale("+y+","+d+")")}return function(l,u){var y=[],d=[];return l=t(l),u=t(u),a(l.translateX,l.translateY,u.translateX,u.translateY,y,d),o(l.rotate,u.rotate,y,d),s(l.skewX,u.skewX,y,d),c(l.scaleX,l.scaleY,u.scaleX,u.scaleY,y,d),l=u=null,function(m){for(var W=-1,U=d.length,et;++W<U;)y[(et=d[W]).i]=et.x(m);return y.join("")}}}var Lo=gr(No,"px, ","px)","deg)"),Uo=gr(Ro,", ",")",")"),Ho=1e-12;function mr(t){return((t=Math.exp(t))+1/t)/2}function Yo(t){return((t=Math.exp(t))-1/t)/2}function Po(t){return((t=Math.exp(2*t))-1)/(t+1)}const Wo=function t(e,n,r){function i(a,o){var s=a[0],c=a[1],l=a[2],u=o[0],y=o[1],d=o[2],m=u-s,W=y-c,U=m*m+W*W,et,A;if(U<Ho)A=Math.log(d/l)/e,et=function(H){return[s+H*m,c+H*W,l*Math.exp(e*H*A)]};else{var tt=Math.sqrt(U),Q=(d*d-l*l+r*U)/(2*l*n*tt),V=(d*d-l*l-r*U)/(2*d*n*tt),lt=Math.log(Math.sqrt(Q*Q+1)-Q),D=Math.log(Math.sqrt(V*V+1)-V);A=(D-lt)/e,et=function(H){var h=H*A,p=mr(lt),b=l/(n*tt)*(p*Po(e*h+lt)-Yo(lt));return[s+b*m,c+b*W,l*p/mr(e*h+lt)]}}return et.duration=A*1e3*e/Math.SQRT2,et}return i.rho=function(a){var o=Math.max(.001,+a),s=o*o,c=s*s;return t(o,s,c)},i}(Math.SQRT2,2,4);var ee=0,de=0,pe=0,yr=1e3,Ie,ge,ze=0,Xt=0,Fe=0,me=typeof performance=="object"&&performance.now?performance:Date,vr=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function hn(){return Xt||(vr(qo),Xt=me.now()+Fe)}function qo(){Xt=0}function Ne(){this._call=this._time=this._next=null}Ne.prototype=xr.prototype={constructor:Ne,restart:function(t,e,n){if(typeof t!="function")throw new TypeError("callback is not a function");n=(n==null?hn():+n)+(e==null?0:+e),!this._next&&ge!==this&&(ge?ge._next=this:Ie=this,ge=this),this._call=t,this._time=n,dn()},stop:function(){this._call&&(this._call=null,this._time=1/0,dn())}};function xr(t,e,n){var r=new Ne;return r.restart(t,e,n),r}function Xo(){hn(),++ee;for(var t=Ie,e;t;)(e=Xt-t._time)>=0&&t._call.call(void 0,e),t=t._next;--ee}function br(){Xt=(ze=me.now())+Fe,ee=de=0;try{Xo()}finally{ee=0,Go(),Xt=0}}function Bo(){var t=me.now(),e=t-ze;e>yr&&(Fe-=e,ze=t)}function Go(){for(var t,e=Ie,n,r=1/0;e;)e._call?(r>e._time&&(r=e._time),t=e,e=e._next):(n=e._next,e._next=null,e=t?t._next=n:Ie=n);ge=t,dn(r)}function dn(t){if(!ee){de&&(de=clearTimeout(de));var e=t-Xt;e>24?(t<1/0&&(de=setTimeout(br,t-me.now()-Fe)),pe&&(pe=clearInterval(pe))):(pe||(ze=me.now(),pe=setInterval(Bo,yr)),ee=1,vr(br))}}function wr(t,e,n){var r=new Ne;return e=e==null?0:+e,r.restart(i=>{r.stop(),t(i+e)},e,n),r}var Vo=Ze("start","end","cancel","interrupt"),jo=[],_r=0,kr=1,pn=2,Re=3,Mr=4,gn=5,Le=6;function Ue(t,e,n,r,i,a){var o=t.__transition;if(!o)t.__transition={};else if(n in o)return;Ko(t,n,{name:e,index:r,group:i,on:Vo,tween:jo,time:a.time,delay:a.delay,duration:a.duration,ease:a.ease,timer:null,state:_r})}function mn(t,e){var n=Ct(t,e);if(n.state>_r)throw new Error("too late; already scheduled");return n}function Et(t,e){var n=Ct(t,e);if(n.state>Re)throw new Error("too late; already running");return n}function Ct(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}function Ko(t,e,n){var r=t.__transition,i;r[e]=n,n.timer=xr(a,0,n.time);function a(l){n.state=kr,n.timer.restart(o,n.delay,n.time),n.delay<=l&&o(l-n.delay)}function o(l){var u,y,d,m;if(n.state!==kr)return c();for(u in r)if(m=r[u],m.name===n.name){if(m.state===Re)return wr(o);m.state===Mr?(m.state=Le,m.timer.stop(),m.on.call("interrupt",t,t.__data__,m.index,m.group),delete r[u]):+u<e&&(m.state=Le,m.timer.stop(),m.on.call("cancel",t,t.__data__,m.index,m.group),delete r[u])}if(wr(function(){n.state===Re&&(n.state=Mr,n.timer.restart(s,n.delay,n.time),s(l))}),n.state=pn,n.on.call("start",t,t.__data__,n.index,n.group),n.state===pn){for(n.state=Re,i=new Array(d=n.tween.length),u=0,y=-1;u<d;++u)(m=n.tween[u].value.call(t,t.__data__,n.index,n.group))&&(i[++y]=m);i.length=y+1}}function s(l){for(var u=l<n.duration?n.ease.call(null,l/n.duration):(n.timer.restart(c),n.state=gn,1),y=-1,d=i.length;++y<d;)i[y].call(t,u);n.state===gn&&(n.on.call("end",t,t.__data__,n.index,n.group),c())}function c(){n.state=Le,n.timer.stop(),delete r[e];for(var l in r)return;delete t.__transition}}function He(t,e){var n=t.__transition,r,i,a=!0,o;if(n){e=e==null?null:e+"";for(o in n){if((r=n[o]).name!==e){a=!1;continue}i=r.state>pn&&r.state<gn,r.state=Le,r.timer.stop(),r.on.call(i?"interrupt":"cancel",t,t.__data__,r.index,r.group),delete n[o]}a&&delete t.__transition}}function Zo(t){return this.each(function(){He(this,t)})}function Qo(t,e){var n,r;return function(){var i=Et(this,t),a=i.tween;if(a!==n){r=n=a;for(var o=0,s=r.length;o<s;++o)if(r[o].name===e){r=r.slice(),r.splice(o,1);break}}i.tween=r}}function Jo(t,e,n){var r,i;if(typeof n!="function")throw new Error;return function(){var a=Et(this,t),o=a.tween;if(o!==r){i=(r=o).slice();for(var s={name:e,value:n},c=0,l=i.length;c<l;++c)if(i[c].name===e){i[c]=s;break}c===l&&i.push(s)}a.tween=i}}function ts(t,e){var n=this._id;if(t+="",arguments.length<2){for(var r=Ct(this.node(),n).tween,i=0,a=r.length,o;i<a;++i)if((o=r[i]).name===t)return o.value;return null}return this.each((e==null?Qo:Jo)(n,t,e))}function yn(t,e,n){var r=t._id;return t.each(function(){var i=Et(this,r);(i.value||(i.value={}))[e]=n.apply(this,arguments)}),function(i){return Ct(i,r).value[e]}}function Sr(t,e){var n;return(typeof e=="number"?Tt:e instanceof Pt?Oe:(n=Pt(e))?(e=n,Oe):hr)(t,e)}function es(t){return function(){this.removeAttribute(t)}}function ns(t){return function(){this.removeAttributeNS(t.space,t.local)}}function rs(t,e,n){var r,i=n+"",a;return function(){var o=this.getAttribute(t);return o===i?null:o===r?a:a=e(r=o,n)}}function is(t,e,n){var r,i=n+"",a;return function(){var o=this.getAttributeNS(t.space,t.local);return o===i?null:o===r?a:a=e(r=o,n)}}function as(t,e,n){var r,i,a;return function(){var o,s=n(this),c;return s==null?void this.removeAttribute(t):(o=this.getAttribute(t),c=s+"",o===c?null:o===r&&c===i?a:(i=c,a=e(r=o,s)))}}function os(t,e,n){var r,i,a;return function(){var o,s=n(this),c;return s==null?void this.removeAttributeNS(t.space,t.local):(o=this.getAttributeNS(t.space,t.local),c=s+"",o===c?null:o===r&&c===i?a:(i=c,a=e(r=o,s)))}}function ss(t,e){var n=Se(t),r=n==="transform"?Uo:Sr;return this.attrTween(t,typeof e=="function"?(n.local?os:as)(n,r,yn(this,"attr."+t,e)):e==null?(n.local?ns:es)(n):(n.local?is:rs)(n,r,e))}function ls(t,e){return function(n){this.setAttribute(t,e.call(this,n))}}function cs(t,e){return function(n){this.setAttributeNS(t.space,t.local,e.call(this,n))}}function us(t,e){var n,r;function i(){var a=e.apply(this,arguments);return a!==r&&(n=(r=a)&&cs(t,a)),n}return i._value=e,i}function fs(t,e){var n,r;function i(){var a=e.apply(this,arguments);return a!==r&&(n=(r=a)&&ls(t,a)),n}return i._value=e,i}function hs(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(e==null)return this.tween(n,null);if(typeof e!="function")throw new Error;var r=Se(t);return this.tween(n,(r.local?us:fs)(r,e))}function ds(t,e){return function(){mn(this,t).delay=+e.apply(this,arguments)}}function ps(t,e){return e=+e,function(){mn(this,t).delay=e}}function gs(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?ds:ps)(e,t)):Ct(this.node(),e).delay}function ms(t,e){return function(){Et(this,t).duration=+e.apply(this,arguments)}}function ys(t,e){return e=+e,function(){Et(this,t).duration=e}}function vs(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?ms:ys)(e,t)):Ct(this.node(),e).duration}function xs(t,e){if(typeof e!="function")throw new Error;return function(){Et(this,t).ease=e}}function bs(t){var e=this._id;return arguments.length?this.each(xs(e,t)):Ct(this.node(),e).ease}function ws(t,e){return function(){var n=e.apply(this,arguments);if(typeof n!="function")throw new Error;Et(this,t).ease=n}}function _s(t){if(typeof t!="function")throw new Error;return this.each(ws(this._id,t))}function ks(t){typeof t!="function"&&(t=Xn(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var a=e[i],o=a.length,s=r[i]=[],c,l=0;l<o;++l)(c=a[l])&&t.call(c,c.__data__,l,a)&&s.push(c);return new $t(r,this._parents,this._name,this._id)}function Ms(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,r=e.length,i=n.length,a=Math.min(r,i),o=new Array(r),s=0;s<a;++s)for(var c=e[s],l=n[s],u=c.length,y=o[s]=new Array(u),d,m=0;m<u;++m)(d=c[m]||l[m])&&(y[m]=d);for(;s<r;++s)o[s]=e[s];return new $t(o,this._parents,this._name,this._id)}function Ss(t){return(t+"").trim().split(/^|\s+/).every(function(e){var n=e.indexOf(".");return n>=0&&(e=e.slice(0,n)),!e||e==="start"})}function Ts(t,e,n){var r,i,a=Ss(e)?mn:Et;return function(){var o=a(this,t),s=o.on;s!==r&&(i=(r=s).copy()).on(e,n),o.on=i}}function Cs(t,e){var n=this._id;return arguments.length<2?Ct(this.node(),n).on.on(t):this.each(Ts(n,t,e))}function As(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}}function Es(){return this.on("end.remove",As(this._id))}function Ds(t){var e=this._name,n=this._id;typeof t!="function"&&(t=Je(t));for(var r=this._groups,i=r.length,a=new Array(i),o=0;o<i;++o)for(var s=r[o],c=s.length,l=a[o]=new Array(c),u,y,d=0;d<c;++d)(u=s[d])&&(y=t.call(u,u.__data__,d,s))&&("__data__"in u&&(y.__data__=u.__data__),l[d]=y,Ue(l[d],e,n,d,l,Ct(u,n)));return new $t(a,this._parents,e,n)}function Os(t){var e=this._name,n=this._id;typeof t!="function"&&(t=qn(t));for(var r=this._groups,i=r.length,a=[],o=[],s=0;s<i;++s)for(var c=r[s],l=c.length,u,y=0;y<l;++y)if(u=c[y]){for(var d=t.call(u,u.__data__,y,c),m,W=Ct(u,n),U=0,et=d.length;U<et;++U)(m=d[U])&&Ue(m,e,n,U,d,W);a.push(d),o.push(u)}return new $t(a,o,e,n)}var $s=ce.prototype.constructor;function Is(){return new $s(this._groups,this._parents)}function zs(t,e){var n,r,i;return function(){var a=Jt(this,t),o=(this.style.removeProperty(t),Jt(this,t));return a===o?null:a===n&&o===r?i:i=e(n=a,r=o)}}function Tr(t){return function(){this.style.removeProperty(t)}}function Fs(t,e,n){var r,i=n+"",a;return function(){var o=Jt(this,t);return o===i?null:o===r?a:a=e(r=o,n)}}function Ns(t,e,n){var r,i,a;return function(){var o=Jt(this,t),s=n(this),c=s+"";return s==null&&(c=s=(this.style.removeProperty(t),Jt(this,t))),o===c?null:o===r&&c===i?a:(i=c,a=e(r=o,s))}}function Rs(t,e){var n,r,i,a="style."+e,o="end."+a,s;return function(){var c=Et(this,t),l=c.on,u=c.value[a]==null?s||(s=Tr(e)):void 0;(l!==n||i!==u)&&(r=(n=l).copy()).on(o,i=u),c.on=r}}function Ls(t,e,n){var r=(t+="")=="transform"?Lo:Sr;return e==null?this.styleTween(t,zs(t,r)).on("end.style."+t,Tr(t)):typeof e=="function"?this.styleTween(t,Ns(t,r,yn(this,"style."+t,e))).each(Rs(this._id,t)):this.styleTween(t,Fs(t,r,e),n).on("end.style."+t,null)}function Us(t,e,n){return function(r){this.style.setProperty(t,e.call(this,r),n)}}function Hs(t,e,n){var r,i;function a(){var o=e.apply(this,arguments);return o!==i&&(r=(i=o)&&Us(t,o,n)),r}return a._value=e,a}function Ys(t,e,n){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(e==null)return this.tween(r,null);if(typeof e!="function")throw new Error;return this.tween(r,Hs(t,e,n??""))}function Ps(t){return function(){this.textContent=t}}function Ws(t){return function(){var e=t(this);this.textContent=e??""}}function qs(t){return this.tween("text",typeof t=="function"?Ws(yn(this,"text",t)):Ps(t==null?"":t+""))}function Xs(t){return function(e){this.textContent=t.call(this,e)}}function Bs(t){var e,n;function r(){var i=t.apply(this,arguments);return i!==n&&(e=(n=i)&&Xs(i)),e}return r._value=t,r}function Gs(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(t==null)return this.tween(e,null);if(typeof t!="function")throw new Error;return this.tween(e,Bs(t))}function Vs(){for(var t=this._name,e=this._id,n=Cr(),r=this._groups,i=r.length,a=0;a<i;++a)for(var o=r[a],s=o.length,c,l=0;l<s;++l)if(c=o[l]){var u=Ct(c,e);Ue(c,t,n,l,o,{time:u.time+u.delay+u.duration,delay:0,duration:u.duration,ease:u.ease})}return new $t(r,this._parents,t,n)}function js(){var t,e,n=this,r=n._id,i=n.size();return new Promise(function(a,o){var s={value:o},c={value:function(){--i===0&&a()}};n.each(function(){var l=Et(this,r),u=l.on;u!==t&&(e=(t=u).copy(),e._.cancel.push(s),e._.interrupt.push(s),e._.end.push(c)),l.on=e}),i===0&&a()})}var Ks=0;function $t(t,e,n,r){this._groups=t,this._parents=e,this._name=n,this._id=r}function Cr(){return++Ks}var It=ce.prototype;$t.prototype={constructor:$t,select:Ds,selectAll:Os,selectChild:It.selectChild,selectChildren:It.selectChildren,filter:ks,merge:Ms,selection:Is,transition:Vs,call:It.call,nodes:It.nodes,node:It.node,size:It.size,empty:It.empty,each:It.each,on:Cs,attr:ss,attrTween:hs,style:Ls,styleTween:Ys,text:qs,textTween:Gs,remove:Es,tween:ts,delay:gs,duration:vs,ease:bs,easeVarying:_s,end:js,[Symbol.iterator]:It[Symbol.iterator]};function Zs(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var Qs={time:null,delay:0,duration:250,ease:Zs};function Js(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return n}function tl(t){var e,n;t instanceof $t?(e=t._id,t=t._name):(e=Cr(),(n=Qs).time=hn(),t=t==null?null:t+"");for(var r=this._groups,i=r.length,a=0;a<i;++a)for(var o=r[a],s=o.length,c,l=0;l<s;++l)(c=o[l])&&Ue(c,t,e,l,o,n||Js(c,e));return new $t(r,this._parents,t,e)}ce.prototype.interrupt=Zo,ce.prototype.transition=tl;function vn(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}const Ar=Symbol("implicit");function Er(){var t=new In,e=[],n=[],r=Ar;function i(a){let o=t.get(a);if(o===void 0){if(r!==Ar)return r;t.set(a,o=e.push(a)-1)}return n[o%n.length]}return i.domain=function(a){if(!arguments.length)return e.slice();e=[],t=new In;for(const o of a)t.has(o)||t.set(o,e.push(o)-1);return i},i.range=function(a){return arguments.length?(n=Array.from(a),i):n.slice()},i.unknown=function(a){return arguments.length?(r=a,i):r},i.copy=function(){return Er(e,n).unknown(r)},vn.apply(i,arguments),i}function Dr(){var t=Er().unknown(void 0),e=t.domain,n=t.range,r=0,i=1,a,o,s=!1,c=0,l=0,u=.5;delete t.unknown;function y(){var d=e().length,m=i<r,W=m?i:r,U=m?r:i;a=(U-W)/Math.max(1,d-c+l*2),s&&(a=Math.floor(a)),W+=(U-W-a*(d-c))*u,o=a*(1-c),s&&(W=Math.round(W),o=Math.round(o));var et=bi(d).map(function(A){return W+a*A});return n(m?et.reverse():et)}return t.domain=function(d){return arguments.length?(e(d),y()):e()},t.range=function(d){return arguments.length?([r,i]=d,r=+r,i=+i,y()):[r,i]},t.rangeRound=function(d){return[r,i]=d,r=+r,i=+i,s=!0,y()},t.bandwidth=function(){return o},t.step=function(){return a},t.round=function(d){return arguments.length?(s=!!d,y()):s},t.padding=function(d){return arguments.length?(c=Math.min(1,l=+d),y()):c},t.paddingInner=function(d){return arguments.length?(c=Math.min(1,d),y()):c},t.paddingOuter=function(d){return arguments.length?(l=+d,y()):l},t.align=function(d){return arguments.length?(u=Math.max(0,Math.min(1,d)),y()):u},t.copy=function(){return Dr(e(),[r,i]).round(s).paddingInner(c).paddingOuter(l).align(u)},vn.apply(y(),arguments)}function Or(t){var e=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return Or(e())},t}function $r(){return Or(Dr.apply(null,arguments).paddingInner(1))}function el(t){return function(){return t}}function nl(t){return+t}var Ir=[0,1];function ne(t){return t}function xn(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:el(isNaN(e)?NaN:.5)}function rl(t,e){var n;return t>e&&(n=t,t=e,e=n),function(r){return Math.max(t,Math.min(e,r))}}function il(t,e,n){var r=t[0],i=t[1],a=e[0],o=e[1];return i<r?(r=xn(i,r),a=n(o,a)):(r=xn(r,i),a=n(a,o)),function(s){return a(r(s))}}function al(t,e,n){var r=Math.min(t.length,e.length)-1,i=new Array(r),a=new Array(r),o=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++o<r;)i[o]=xn(t[o],t[o+1]),a[o]=n(e[o],e[o+1]);return function(s){var c=di(t,s,1,r)-1;return a[c](i[c](s))}}function ol(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function sl(){var t=Ir,e=Ir,n=un,r,i,a,o=ne,s,c,l;function u(){var d=Math.min(t.length,e.length);return o!==ne&&(o=rl(t[0],t[d-1])),s=d>2?al:il,c=l=null,y}function y(d){return d==null||isNaN(d=+d)?a:(c||(c=s(t.map(r),e,n)))(r(o(d)))}return y.invert=function(d){return o(i((l||(l=s(e,t.map(r),Tt)))(d)))},y.domain=function(d){return arguments.length?(t=Array.from(d,nl),u()):t.slice()},y.range=function(d){return arguments.length?(e=Array.from(d),u()):e.slice()},y.rangeRound=function(d){return e=Array.from(d),n=Fo,u()},y.clamp=function(d){return arguments.length?(o=d?!0:ne,u()):o!==ne},y.interpolate=function(d){return arguments.length?(n=d,u()):n},y.unknown=function(d){return arguments.length?(a=d,y):a},function(d,m){return r=d,i=m,u()}}function ll(){return sl()(ne,ne)}function cl(t,e){t=t.slice();var n=0,r=t.length-1,i=t[n],a=t[r],o;return a<i&&(o=n,n=r,r=o,o=i,i=a,a=o),t[n]=e.floor(i),t[r]=e.ceil(a),t}const bn=new Date,wn=new Date;function gt(t,e,n,r){function i(a){return t(a=arguments.length===0?new Date:new Date(+a)),a}return i.floor=a=>(t(a=new Date(+a)),a),i.ceil=a=>(t(a=new Date(a-1)),e(a,1),t(a),a),i.round=a=>{const o=i(a),s=i.ceil(a);return a-o<s-a?o:s},i.offset=(a,o)=>(e(a=new Date(+a),o==null?1:Math.floor(o)),a),i.range=(a,o,s)=>{const c=[];if(a=i.ceil(a),s=s==null?1:Math.floor(s),!(a<o)||!(s>0))return c;let l;do c.push(l=new Date(+a)),e(a,s),t(a);while(l<a&&a<o);return c},i.filter=a=>gt(o=>{if(o>=o)for(;t(o),!a(o);)o.setTime(o-1)},(o,s)=>{if(o>=o)if(s<0)for(;++s<=0;)for(;e(o,-1),!a(o););else for(;--s>=0;)for(;e(o,1),!a(o););}),n&&(i.count=(a,o)=>(bn.setTime(+a),wn.setTime(+o),t(bn),t(wn),Math.floor(n(bn,wn))),i.every=a=>(a=Math.floor(a),!isFinite(a)||!(a>0)?null:a>1?i.filter(r?o=>r(o)%a===0:o=>i.count(0,o)%a===0):i)),i}const Ye=gt(()=>{},(t,e)=>{t.setTime(+t+e)},(t,e)=>e-t);Ye.every=t=>(t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?gt(e=>{e.setTime(Math.floor(e/t)*t)},(e,n)=>{e.setTime(+e+n*t)},(e,n)=>(n-e)/t):Ye),Ye.range;const zt=1e3,kt=zt*60,Ft=kt*60,Nt=Ft*24,_n=Nt*7,zr=Nt*30,kn=Nt*365,re=gt(t=>{t.setTime(t-t.getMilliseconds())},(t,e)=>{t.setTime(+t+e*zt)},(t,e)=>(e-t)/zt,t=>t.getUTCSeconds());re.range;const Mn=gt(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*zt)},(t,e)=>{t.setTime(+t+e*kt)},(t,e)=>(e-t)/kt,t=>t.getMinutes());Mn.range,gt(t=>{t.setUTCSeconds(0,0)},(t,e)=>{t.setTime(+t+e*kt)},(t,e)=>(e-t)/kt,t=>t.getUTCMinutes()).range;const Sn=gt(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*zt-t.getMinutes()*kt)},(t,e)=>{t.setTime(+t+e*Ft)},(t,e)=>(e-t)/Ft,t=>t.getHours());Sn.range,gt(t=>{t.setUTCMinutes(0,0,0)},(t,e)=>{t.setTime(+t+e*Ft)},(t,e)=>(e-t)/Ft,t=>t.getUTCHours()).range;const ye=gt(t=>t.setHours(0,0,0,0),(t,e)=>t.setDate(t.getDate()+e),(t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*kt)/Nt,t=>t.getDate()-1);ye.range;const Tn=gt(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/Nt,t=>t.getUTCDate()-1);Tn.range,gt(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/Nt,t=>Math.floor(t/Nt)).range;function Bt(t){return gt(e=>{e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},(e,n)=>{e.setDate(e.getDate()+n*7)},(e,n)=>(n-e-(n.getTimezoneOffset()-e.getTimezoneOffset())*kt)/_n)}const Pe=Bt(0),We=Bt(1),ul=Bt(2),fl=Bt(3),ie=Bt(4),hl=Bt(5),dl=Bt(6);Pe.range,We.range,ul.range,fl.range,ie.range,hl.range,dl.range;function Gt(t){return gt(e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCDate(e.getUTCDate()+n*7)},(e,n)=>(n-e)/_n)}const Fr=Gt(0),qe=Gt(1),pl=Gt(2),gl=Gt(3),ae=Gt(4),ml=Gt(5),yl=Gt(6);Fr.range,qe.range,pl.range,gl.range,ae.range,ml.range,yl.range;const Cn=gt(t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,e)=>{t.setMonth(t.getMonth()+e)},(t,e)=>e.getMonth()-t.getMonth()+(e.getFullYear()-t.getFullYear())*12,t=>t.getMonth());Cn.range,gt(t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCMonth(t.getUTCMonth()+e)},(t,e)=>e.getUTCMonth()-t.getUTCMonth()+(e.getUTCFullYear()-t.getUTCFullYear())*12,t=>t.getUTCMonth()).range;const Dt=gt(t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,e)=>{t.setFullYear(t.getFullYear()+e)},(t,e)=>e.getFullYear()-t.getFullYear(),t=>t.getFullYear());Dt.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:gt(e=>{e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},(e,n)=>{e.setFullYear(e.getFullYear()+n*t)}),Dt.range;const Vt=gt(t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCFullYear(t.getUTCFullYear()+e)},(t,e)=>e.getUTCFullYear()-t.getUTCFullYear(),t=>t.getUTCFullYear());Vt.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:gt(e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCFullYear(e.getUTCFullYear()+n*t)}),Vt.range;function vl(t,e,n,r,i,a){const o=[[re,1,zt],[re,5,5*zt],[re,15,15*zt],[re,30,30*zt],[a,1,kt],[a,5,5*kt],[a,15,15*kt],[a,30,30*kt],[i,1,Ft],[i,3,3*Ft],[i,6,6*Ft],[i,12,12*Ft],[r,1,Nt],[r,2,2*Nt],[n,1,_n],[e,1,zr],[e,3,3*zr],[t,1,kn]];function s(l,u,y){const d=u<l;d&&([l,u]=[u,l]);const m=y&&typeof y.range=="function"?y:c(l,u,y),W=m?m.range(l,+u+1):[];return d?W.reverse():W}function c(l,u,y){const d=Math.abs(u-l)/y,m=Ge(([,,et])=>et).right(o,d);if(m===o.length)return t.every(Rn(l/kn,u/kn,y));if(m===0)return Ye.every(Math.max(Rn(l,u,y),1));const[W,U]=o[d/o[m-1][2]<o[m][2]/d?m-1:m];return W.every(U)}return[s,c]}const[xl,bl]=vl(Dt,Cn,Pe,ye,Sn,Mn);function An(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function En(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function ve(t,e,n){return{y:t,m:e,d:n,H:0,M:0,S:0,L:0}}function wl(t){var e=t.dateTime,n=t.date,r=t.time,i=t.periods,a=t.days,o=t.shortDays,s=t.months,c=t.shortMonths,l=xe(i),u=be(i),y=xe(a),d=be(a),m=xe(o),W=be(o),U=xe(s),et=be(s),A=xe(c),tt=be(c),Q={a:S,A:F,b:C,B:q,c:null,d:Yr,e:Yr,f:ql,g:tc,G:nc,H:Yl,I:Pl,j:Wl,L:Pr,m:Xl,M:Bl,p:I,q:L,Q:Vr,s:jr,S:Gl,u:Vl,U:jl,V:Kl,w:Zl,W:Ql,x:null,X:null,y:Jl,Y:ec,Z:rc,"%":Gr},V={a:R,A:j,b:nt,B:it,c:null,d:qr,e:qr,f:sc,g:yc,G:xc,H:ic,I:ac,j:oc,L:Xr,m:lc,M:cc,p:ot,q:G,Q:Vr,s:jr,S:uc,u:fc,U:hc,V:dc,w:pc,W:gc,x:null,X:null,y:mc,Y:vc,Z:bc,"%":Gr},lt={a:b,A:E,b:$,B:X,c:v,d:Ur,e:Ur,f:Rl,g:Lr,G:Rr,H:Hr,I:Hr,j:Il,L:Nl,m:$l,M:zl,p,q:Ol,Q:Ul,s:Hl,S:Fl,u:Tl,U:Cl,V:Al,w:Sl,W:El,x:z,X:_,y:Lr,Y:Rr,Z:Dl,"%":Ll};Q.x=D(n,Q),Q.X=D(r,Q),Q.c=D(e,Q),V.x=D(n,V),V.X=D(r,V),V.c=D(e,V);function D(M,Y){return function(O){var w=[],rt=-1,P=0,J=M.length,B,pt,K;for(O instanceof Date||(O=new Date(+O));++rt<J;)M.charCodeAt(rt)===37&&(w.push(M.slice(P,rt)),(pt=Nr[B=M.charAt(++rt)])!=null?B=M.charAt(++rt):pt=B==="e"?" ":"0",(K=Y[B])&&(B=K(O,pt)),w.push(B),P=rt+1);return w.push(M.slice(P,rt)),w.join("")}}function H(M,Y){return function(O){var w=ve(1900,void 0,1),rt=h(w,M,O+="",0),P,J;if(rt!=O.length)return null;if("Q"in w)return new Date(w.Q);if("s"in w)return new Date(w.s*1e3+("L"in w?w.L:0));if(Y&&!("Z"in w)&&(w.Z=0),"p"in w&&(w.H=w.H%12+w.p*12),w.m===void 0&&(w.m="q"in w?w.q:0),"V"in w){if(w.V<1||w.V>53)return null;"w"in w||(w.w=1),"Z"in w?(P=En(ve(w.y,0,1)),J=P.getUTCDay(),P=J>4||J===0?qe.ceil(P):qe(P),P=Tn.offset(P,(w.V-1)*7),w.y=P.getUTCFullYear(),w.m=P.getUTCMonth(),w.d=P.getUTCDate()+(w.w+6)%7):(P=An(ve(w.y,0,1)),J=P.getDay(),P=J>4||J===0?We.ceil(P):We(P),P=ye.offset(P,(w.V-1)*7),w.y=P.getFullYear(),w.m=P.getMonth(),w.d=P.getDate()+(w.w+6)%7)}else("W"in w||"U"in w)&&("w"in w||(w.w="u"in w?w.u%7:"W"in w?1:0),J="Z"in w?En(ve(w.y,0,1)).getUTCDay():An(ve(w.y,0,1)).getDay(),w.m=0,w.d="W"in w?(w.w+6)%7+w.W*7-(J+5)%7:w.w+w.U*7-(J+6)%7);return"Z"in w?(w.H+=w.Z/100|0,w.M+=w.Z%100,En(w)):An(w)}}function h(M,Y,O,w){for(var rt=0,P=Y.length,J=O.length,B,pt;rt<P;){if(w>=J)return-1;if(B=Y.charCodeAt(rt++),B===37){if(B=Y.charAt(rt++),pt=lt[B in Nr?Y.charAt(rt++):B],!pt||(w=pt(M,O,w))<0)return-1}else if(B!=O.charCodeAt(w++))return-1}return w}function p(M,Y,O){var w=l.exec(Y.slice(O));return w?(M.p=u.get(w[0].toLowerCase()),O+w[0].length):-1}function b(M,Y,O){var w=m.exec(Y.slice(O));return w?(M.w=W.get(w[0].toLowerCase()),O+w[0].length):-1}function E(M,Y,O){var w=y.exec(Y.slice(O));return w?(M.w=d.get(w[0].toLowerCase()),O+w[0].length):-1}function $(M,Y,O){var w=A.exec(Y.slice(O));return w?(M.m=tt.get(w[0].toLowerCase()),O+w[0].length):-1}function X(M,Y,O){var w=U.exec(Y.slice(O));return w?(M.m=et.get(w[0].toLowerCase()),O+w[0].length):-1}function v(M,Y,O){return h(M,e,Y,O)}function z(M,Y,O){return h(M,n,Y,O)}function _(M,Y,O){return h(M,r,Y,O)}function S(M){return o[M.getDay()]}function F(M){return a[M.getDay()]}function C(M){return c[M.getMonth()]}function q(M){return s[M.getMonth()]}function I(M){return i[+(M.getHours()>=12)]}function L(M){return 1+~~(M.getMonth()/3)}function R(M){return o[M.getUTCDay()]}function j(M){return a[M.getUTCDay()]}function nt(M){return c[M.getUTCMonth()]}function it(M){return s[M.getUTCMonth()]}function ot(M){return i[+(M.getUTCHours()>=12)]}function G(M){return 1+~~(M.getUTCMonth()/3)}return{format:function(M){var Y=D(M+="",Q);return Y.toString=function(){return M},Y},parse:function(M){var Y=H(M+="",!1);return Y.toString=function(){return M},Y},utcFormat:function(M){var Y=D(M+="",V);return Y.toString=function(){return M},Y},utcParse:function(M){var Y=H(M+="",!0);return Y.toString=function(){return M},Y}}}var Nr={"-":"",_:" ",0:"0"},mt=/^\s*\d+/,_l=/^%/,kl=/[\\^$*+?|[\]().{}]/g;function at(t,e,n){var r=t<0?"-":"",i=(r?-t:t)+"",a=i.length;return r+(a<n?new Array(n-a+1).join(e)+i:i)}function Ml(t){return t.replace(kl,"\\$&")}function xe(t){return new RegExp("^(?:"+t.map(Ml).join("|")+")","i")}function be(t){return new Map(t.map((e,n)=>[e.toLowerCase(),n]))}function Sl(t,e,n){var r=mt.exec(e.slice(n,n+1));return r?(t.w=+r[0],n+r[0].length):-1}function Tl(t,e,n){var r=mt.exec(e.slice(n,n+1));return r?(t.u=+r[0],n+r[0].length):-1}function Cl(t,e,n){var r=mt.exec(e.slice(n,n+2));return r?(t.U=+r[0],n+r[0].length):-1}function Al(t,e,n){var r=mt.exec(e.slice(n,n+2));return r?(t.V=+r[0],n+r[0].length):-1}function El(t,e,n){var r=mt.exec(e.slice(n,n+2));return r?(t.W=+r[0],n+r[0].length):-1}function Rr(t,e,n){var r=mt.exec(e.slice(n,n+4));return r?(t.y=+r[0],n+r[0].length):-1}function Lr(t,e,n){var r=mt.exec(e.slice(n,n+2));return r?(t.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function Dl(t,e,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return r?(t.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function Ol(t,e,n){var r=mt.exec(e.slice(n,n+1));return r?(t.q=r[0]*3-3,n+r[0].length):-1}function $l(t,e,n){var r=mt.exec(e.slice(n,n+2));return r?(t.m=r[0]-1,n+r[0].length):-1}function Ur(t,e,n){var r=mt.exec(e.slice(n,n+2));return r?(t.d=+r[0],n+r[0].length):-1}function Il(t,e,n){var r=mt.exec(e.slice(n,n+3));return r?(t.m=0,t.d=+r[0],n+r[0].length):-1}function Hr(t,e,n){var r=mt.exec(e.slice(n,n+2));return r?(t.H=+r[0],n+r[0].length):-1}function zl(t,e,n){var r=mt.exec(e.slice(n,n+2));return r?(t.M=+r[0],n+r[0].length):-1}function Fl(t,e,n){var r=mt.exec(e.slice(n,n+2));return r?(t.S=+r[0],n+r[0].length):-1}function Nl(t,e,n){var r=mt.exec(e.slice(n,n+3));return r?(t.L=+r[0],n+r[0].length):-1}function Rl(t,e,n){var r=mt.exec(e.slice(n,n+6));return r?(t.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function Ll(t,e,n){var r=_l.exec(e.slice(n,n+1));return r?n+r[0].length:-1}function Ul(t,e,n){var r=mt.exec(e.slice(n));return r?(t.Q=+r[0],n+r[0].length):-1}function Hl(t,e,n){var r=mt.exec(e.slice(n));return r?(t.s=+r[0],n+r[0].length):-1}function Yr(t,e){return at(t.getDate(),e,2)}function Yl(t,e){return at(t.getHours(),e,2)}function Pl(t,e){return at(t.getHours()%12||12,e,2)}function Wl(t,e){return at(1+ye.count(Dt(t),t),e,3)}function Pr(t,e){return at(t.getMilliseconds(),e,3)}function ql(t,e){return Pr(t,e)+"000"}function Xl(t,e){return at(t.getMonth()+1,e,2)}function Bl(t,e){return at(t.getMinutes(),e,2)}function Gl(t,e){return at(t.getSeconds(),e,2)}function Vl(t){var e=t.getDay();return e===0?7:e}function jl(t,e){return at(Pe.count(Dt(t)-1,t),e,2)}function Wr(t){var e=t.getDay();return e>=4||e===0?ie(t):ie.ceil(t)}function Kl(t,e){return t=Wr(t),at(ie.count(Dt(t),t)+(Dt(t).getDay()===4),e,2)}function Zl(t){return t.getDay()}function Ql(t,e){return at(We.count(Dt(t)-1,t),e,2)}function Jl(t,e){return at(t.getFullYear()%100,e,2)}function tc(t,e){return t=Wr(t),at(t.getFullYear()%100,e,2)}function ec(t,e){return at(t.getFullYear()%1e4,e,4)}function nc(t,e){var n=t.getDay();return t=n>=4||n===0?ie(t):ie.ceil(t),at(t.getFullYear()%1e4,e,4)}function rc(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+at(e/60|0,"0",2)+at(e%60,"0",2)}function qr(t,e){return at(t.getUTCDate(),e,2)}function ic(t,e){return at(t.getUTCHours(),e,2)}function ac(t,e){return at(t.getUTCHours()%12||12,e,2)}function oc(t,e){return at(1+Tn.count(Vt(t),t),e,3)}function Xr(t,e){return at(t.getUTCMilliseconds(),e,3)}function sc(t,e){return Xr(t,e)+"000"}function lc(t,e){return at(t.getUTCMonth()+1,e,2)}function cc(t,e){return at(t.getUTCMinutes(),e,2)}function uc(t,e){return at(t.getUTCSeconds(),e,2)}function fc(t){var e=t.getUTCDay();return e===0?7:e}function hc(t,e){return at(Fr.count(Vt(t)-1,t),e,2)}function Br(t){var e=t.getUTCDay();return e>=4||e===0?ae(t):ae.ceil(t)}function dc(t,e){return t=Br(t),at(ae.count(Vt(t),t)+(Vt(t).getUTCDay()===4),e,2)}function pc(t){return t.getUTCDay()}function gc(t,e){return at(qe.count(Vt(t)-1,t),e,2)}function mc(t,e){return at(t.getUTCFullYear()%100,e,2)}function yc(t,e){return t=Br(t),at(t.getUTCFullYear()%100,e,2)}function vc(t,e){return at(t.getUTCFullYear()%1e4,e,4)}function xc(t,e){var n=t.getUTCDay();return t=n>=4||n===0?ae(t):ae.ceil(t),at(t.getUTCFullYear()%1e4,e,4)}function bc(){return"+0000"}function Gr(){return"%"}function Vr(t){return+t}function jr(t){return Math.floor(+t/1e3)}var oe,jt;wc({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function wc(t){return oe=wl(t),jt=oe.format,oe.parse,oe.utcFormat,oe.utcParse,oe}function _c(t){return new Date(t)}function kc(t){return t instanceof Date?+t:+new Date(+t)}function Kr(t,e,n,r,i,a,o,s,c,l){var u=ll(),y=u.invert,d=u.domain,m=l(".%L"),W=l(":%S"),U=l("%I:%M"),et=l("%I %p"),A=l("%a %d"),tt=l("%b %d"),Q=l("%B"),V=l("%Y");function lt(D){return(c(D)<D?m:s(D)<D?W:o(D)<D?U:a(D)<D?et:r(D)<D?i(D)<D?A:tt:n(D)<D?Q:V)(D)}return u.invert=function(D){return new Date(y(D))},u.domain=function(D){return arguments.length?d(Array.from(D,kc)):d().map(_c)},u.ticks=function(D){var H=d();return t(H[0],H[H.length-1],D??10)},u.tickFormat=function(D,H){return H==null?lt:l(H)},u.nice=function(D){var H=d();return(!D||typeof D.range!="function")&&(D=e(H[0],H[H.length-1],D??10)),D?d(cl(H,D)):u},u.copy=function(){return ol(u,Kr(t,e,n,r,i,a,o,s,c,l))},u}function Zr(){return vn.apply(Kr(xl,bl,Dt,Cn,Pe,ye,Sn,Mn,re,jt).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}const Xe=t=>()=>t;function Mc(t,{sourceEvent:e,target:n,transform:r,dispatch:i}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:i}})}function Rt(t,e,n){this.k=t,this.x=e,this.y=n}Rt.prototype={constructor:Rt,scale:function(t){return t===1?this:new Rt(this.k*t,this.x,this.y)},translate:function(t,e){return t===0&e===0?this:new Rt(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var yt=new Rt(1,0,0);Rt.prototype;function Dn(t){t.stopImmediatePropagation()}function we(t){t.preventDefault(),t.stopImmediatePropagation()}function Sc(t){return(!t.ctrlKey||t.type==="wheel")&&!t.button}function Tc(){var t=this;return t instanceof SVGElement?(t=t.ownerSVGElement||t,t.hasAttribute("viewBox")?(t=t.viewBox.baseVal,[[t.x,t.y],[t.x+t.width,t.y+t.height]]):[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]):[[0,0],[t.clientWidth,t.clientHeight]]}function Qr(){return this.__zoom||yt}function Cc(t){return-t.deltaY*(t.deltaMode===1?.05:t.deltaMode?1:.002)*(t.ctrlKey?10:1)}function Ac(){return navigator.maxTouchPoints||"ontouchstart"in this}function Ec(t,e,n){var r=t.invertX(e[0][0])-n[0][0],i=t.invertX(e[1][0])-n[1][0],a=t.invertY(e[0][1])-n[0][1],o=t.invertY(e[1][1])-n[1][1];return t.translate(i>r?(r+i)/2:Math.min(0,r)||Math.max(0,i),o>a?(a+o)/2:Math.min(0,a)||Math.max(0,o))}function Jr(){var t=Sc,e=Tc,n=Ec,r=Cc,i=Ac,a=[0,1/0],o=[[-1/0,-1/0],[1/0,1/0]],s=250,c=Wo,l=Ze("start","zoom","end"),u,y,d,m=500,W=150,U=0,et=10;function A(v){v.property("__zoom",Qr).on("wheel.zoom",h,{passive:!1}).on("mousedown.zoom",p).on("dblclick.zoom",b).filter(i).on("touchstart.zoom",E).on("touchmove.zoom",$).on("touchend.zoom touchcancel.zoom",X).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}A.transform=function(v,z,_,S){var F=v.selection?v.selection():v;F.property("__zoom",Qr),v!==F?lt(v,z,_,S):F.interrupt().each(function(){D(this,arguments).event(S).start().zoom(null,typeof z=="function"?z.apply(this,arguments):z).end()})},A.scaleBy=function(v,z,_,S){A.scaleTo(v,function(){var F=this.__zoom.k,C=typeof z=="function"?z.apply(this,arguments):z;return F*C},_,S)},A.scaleTo=function(v,z,_,S){A.transform(v,function(){var F=e.apply(this,arguments),C=this.__zoom,q=_==null?V(F):typeof _=="function"?_.apply(this,arguments):_,I=C.invert(q),L=typeof z=="function"?z.apply(this,arguments):z;return n(Q(tt(C,L),q,I),F,o)},_,S)},A.translateBy=function(v,z,_,S){A.transform(v,function(){return n(this.__zoom.translate(typeof z=="function"?z.apply(this,arguments):z,typeof _=="function"?_.apply(this,arguments):_),e.apply(this,arguments),o)},null,S)},A.translateTo=function(v,z,_,S,F){A.transform(v,function(){var C=e.apply(this,arguments),q=this.__zoom,I=S==null?V(C):typeof S=="function"?S.apply(this,arguments):S;return n(yt.translate(I[0],I[1]).scale(q.k).translate(typeof z=="function"?-z.apply(this,arguments):-z,typeof _=="function"?-_.apply(this,arguments):-_),C,o)},S,F)};function tt(v,z){return z=Math.max(a[0],Math.min(a[1],z)),z===v.k?v:new Rt(z,v.x,v.y)}function Q(v,z,_){var S=z[0]-_[0]*v.k,F=z[1]-_[1]*v.k;return S===v.x&&F===v.y?v:new Rt(v.k,S,F)}function V(v){return[(+v[0][0]+ +v[1][0])/2,(+v[0][1]+ +v[1][1])/2]}function lt(v,z,_,S){v.on("start.zoom",function(){D(this,arguments).event(S).start()}).on("interrupt.zoom end.zoom",function(){D(this,arguments).event(S).end()}).tween("zoom",function(){var F=this,C=arguments,q=D(F,C).event(S),I=e.apply(F,C),L=_==null?V(I):typeof _=="function"?_.apply(F,C):_,R=Math.max(I[1][0]-I[0][0],I[1][1]-I[0][1]),j=F.__zoom,nt=typeof z=="function"?z.apply(F,C):z,it=c(j.invert(L).concat(R/j.k),nt.invert(L).concat(R/nt.k));return function(ot){if(ot===1)ot=nt;else{var G=it(ot),M=R/G[2];ot=new Rt(M,L[0]-G[0]*M,L[1]-G[1]*M)}q.zoom(null,ot)}})}function D(v,z,_){return!_&&v.__zooming||new H(v,z)}function H(v,z){this.that=v,this.args=z,this.active=0,this.sourceEvent=null,this.extent=e.apply(v,z),this.taps=0}H.prototype={event:function(v){return v&&(this.sourceEvent=v),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(v,z){return this.mouse&&v!=="mouse"&&(this.mouse[1]=z.invert(this.mouse[0])),this.touch0&&v!=="touch"&&(this.touch0[1]=z.invert(this.touch0[0])),this.touch1&&v!=="touch"&&(this.touch1[1]=z.invert(this.touch1[0])),this.that.__zoom=z,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(v){var z=ut(this.that).datum();l.call(v,this.that,new Mc(v,{sourceEvent:this.sourceEvent,target:A,transform:this.that.__zoom,dispatch:l}),z)}};function h(v,...z){if(!t.apply(this,arguments))return;var _=D(this,z).event(v),S=this.__zoom,F=Math.max(a[0],Math.min(a[1],S.k*Math.pow(2,r.apply(this,arguments)))),C=Yt(v);if(_.wheel)(_.mouse[0][0]!==C[0]||_.mouse[0][1]!==C[1])&&(_.mouse[1]=S.invert(_.mouse[0]=C)),clearTimeout(_.wheel);else{if(S.k===F)return;_.mouse=[C,S.invert(C)],He(this),_.start()}we(v),_.wheel=setTimeout(q,W),_.zoom("mouse",n(Q(tt(S,F),_.mouse[0],_.mouse[1]),_.extent,o));function q(){_.wheel=null,_.end()}}function p(v,...z){if(d||!t.apply(this,arguments))return;var _=v.currentTarget,S=D(this,z,!0).event(v),F=ut(v.view).on("mousemove.zoom",L,!0).on("mouseup.zoom",R,!0),C=Yt(v,_),q=v.clientX,I=v.clientY;uo(v.view),Dn(v),S.mouse=[C,this.__zoom.invert(C)],He(this),S.start();function L(j){if(we(j),!S.moved){var nt=j.clientX-q,it=j.clientY-I;S.moved=nt*nt+it*it>U}S.event(j).zoom("mouse",n(Q(S.that.__zoom,S.mouse[0]=Yt(j,_),S.mouse[1]),S.extent,o))}function R(j){F.on("mousemove.zoom mouseup.zoom",null),fo(j.view,S.moved),we(j),S.event(j).end()}}function b(v,...z){if(t.apply(this,arguments)){var _=this.__zoom,S=Yt(v.changedTouches?v.changedTouches[0]:v,this),F=_.invert(S),C=_.k*(v.shiftKey?.5:2),q=n(Q(tt(_,C),S,F),e.apply(this,z),o);we(v),s>0?ut(this).transition().duration(s).call(lt,q,S,v):ut(this).call(A.transform,q,S,v)}}function E(v,...z){if(t.apply(this,arguments)){var _=v.touches,S=_.length,F=D(this,z,v.changedTouches.length===S).event(v),C,q,I,L;for(Dn(v),q=0;q<S;++q)I=_[q],L=Yt(I,this),L=[L,this.__zoom.invert(L),I.identifier],F.touch0?!F.touch1&&F.touch0[2]!==L[2]&&(F.touch1=L,F.taps=0):(F.touch0=L,C=!0,F.taps=1+!!u);u&&(u=clearTimeout(u)),C&&(F.taps<2&&(y=L[0],u=setTimeout(function(){u=null},m)),He(this),F.start())}}function $(v,...z){if(this.__zooming){var _=D(this,z).event(v),S=v.changedTouches,F=S.length,C,q,I,L;for(we(v),C=0;C<F;++C)q=S[C],I=Yt(q,this),_.touch0&&_.touch0[2]===q.identifier?_.touch0[0]=I:_.touch1&&_.touch1[2]===q.identifier&&(_.touch1[0]=I);if(q=_.that.__zoom,_.touch1){var R=_.touch0[0],j=_.touch0[1],nt=_.touch1[0],it=_.touch1[1],ot=(ot=nt[0]-R[0])*ot+(ot=nt[1]-R[1])*ot,G=(G=it[0]-j[0])*G+(G=it[1]-j[1])*G;q=tt(q,Math.sqrt(ot/G)),I=[(R[0]+nt[0])/2,(R[1]+nt[1])/2],L=[(j[0]+it[0])/2,(j[1]+it[1])/2]}else if(_.touch0)I=_.touch0[0],L=_.touch0[1];else return;_.zoom("touch",n(Q(q,I,L),_.extent,o))}}function X(v,...z){if(this.__zooming){var _=D(this,z).event(v),S=v.changedTouches,F=S.length,C,q;for(Dn(v),d&&clearTimeout(d),d=setTimeout(function(){d=null},m),C=0;C<F;++C)q=S[C],_.touch0&&_.touch0[2]===q.identifier?delete _.touch0:_.touch1&&_.touch1[2]===q.identifier&&delete _.touch1;if(_.touch1&&!_.touch0&&(_.touch0=_.touch1,delete _.touch1),_.touch0)_.touch0[1]=this.__zoom.invert(_.touch0[0]);else if(_.end(),_.taps===2&&(q=Yt(q,this),Math.hypot(y[0]-q[0],y[1]-q[1])<et)){var I=ut(this).on("dblclick.zoom");I&&I.apply(this,arguments)}}}return A.wheelDelta=function(v){return arguments.length?(r=typeof v=="function"?v:Xe(+v),A):r},A.filter=function(v){return arguments.length?(t=typeof v=="function"?v:Xe(!!v),A):t},A.touchable=function(v){return arguments.length?(i=typeof v=="function"?v:Xe(!!v),A):i},A.extent=function(v){return arguments.length?(e=typeof v=="function"?v:Xe([[+v[0][0],+v[0][1]],[+v[1][0],+v[1][1]]]),A):e},A.scaleExtent=function(v){return arguments.length?(a[0]=+v[0],a[1]=+v[1],A):[a[0],a[1]]},A.translateExtent=function(v){return arguments.length?(o[0][0]=+v[0][0],o[1][0]=+v[1][0],o[0][1]=+v[0][1],o[1][1]=+v[1][1],A):[[o[0][0],o[0][1]],[o[1][0],o[1][1]]]},A.constrain=function(v){return arguments.length?(n=v,A):n},A.duration=function(v){return arguments.length?(s=+v,A):s},A.interpolate=function(v){return arguments.length?(c=v,A):c},A.on=function(){var v=l.on.apply(l,arguments);return v===l?A:v},A.clickDistance=function(v){return arguments.length?(U=(v=+v)*v,A):Math.sqrt(U)},A.tapDistance=function(v){return arguments.length?(et=+v,A):et},A}class Dc{static render(e,n,r){const i={axisStrategy:r.axisStrategy??"time",minLabelGap:r.minLabelGap??40,labelYOffset:r.labelYOffset??-16,cardWidth:r.cardWidth??140,cardHeight:r.cardHeight??200,enforceUniformCardSize:r.enforceUniformCardSize??!0,hideOverlappingLabels:r.hideOverlappingLabels??!0,labelCardGap:r.labelCardGap??8,mediaObjectFit:r.mediaObjectFit??"cover",showTooltip:r.showTooltip??!0,...r},a=r.timeTickEveryYears,o=r.pointTickStride;n.innerHTML="";const s={top:10,right:80,bottom:50,left:80},c=n.clientWidth-s.left-s.right,l=n.clientHeight-s.top-s.bottom,u=r.zoom?.minScale??1,y=r.zoom?.maxScale??80,d=ut(n),m=d.append("svg").attr("width",c+s.left+s.right).attr("height",l+s.top+s.bottom).style("background","var(--tl-background-color, #fff)");d.style("position","relative");function W(T,f=600){m.transition().duration(f).call(ct.transform,T)}const U=c+s.left+s.right,et=l+s.top+s.bottom,A=m.append("g").attr("class","tl-canvas-bg"),tt=r.canvasBackground;if(!tt)m.style("background","var(--tl-background-color, #fff)");else if(tt.kind==="color")m.style("background",tt.value??"var(--tl-background-color, #fff)");else if(tt.kind==="image"){const T=tt.fit??"cover";A.append("foreignObject").attr("x",0).attr("y",0).attr("width",U).attr("height",et).append("xhtml:div").style("width",`${U}px`).style("height",`${et}px`).style("opacity",String(tt.opacity??1)).style("backgroundImage",`url("${tt.src}")`).style("backgroundRepeat","no-repeat").style("backgroundPosition","center").style("backgroundSize",T==="contain"?"contain":"cover")}else if(tt.kind==="video"){const T=tt.fit??"cover",g=A.append("foreignObject").attr("x",0).attr("y",0).attr("width",U).attr("height",et).append("xhtml:div").style("width",`${U}px`).style("height",`${et}px`).style("overflow","hidden").style("opacity",String(tt.opacity??1)).append("xhtml:video");g.style("width","100%").style("height","100%").style("objectFit",T==="contain"?"contain":"cover").style("objectPosition","center").attr("src",tt.src).attr("playsinline","true").attr("muted",tt.muted??!0?"":null).attr("loop",tt.loop??!0?"":null).attr("autoplay",tt.autoplay??!0?"":null).attr("controls",tt.controls??!1?"":null),tt.poster&&g.attr("poster",tt.poster);try{g.node()?.play?.().catch(()=>{})}catch{}}const Q=m.append("g").attr("transform",`translate(${s.left},${s.top})`),V=[...e.items].sort((T,f)=>+T.start-+f.start),lt=V.map(T=>T.start),D=r.baselineY??l/2,[H,h]=$n(lt),p=Zr().domain([H,h]).range([0,c]),b=V.map((T,f)=>f.toString()),E=$r().domain(b).range([0,c]).padding(.5),$=T=>T.rescaleX(p),X=(T,f,g)=>{if(i.axisStrategy==="point"){const x=E(f.toString())??0;return g.applyX(x)}else return $(g)(T.start)};Q.append("line").attr("x1",0).attr("x2",c).attr("y1",D).attr("y2",D).attr("stroke","var(--tl-axis-color, var(--tl-primary-color, #4285f4))").attr("stroke-width",2);const v=Q.append("g").attr("transform",`translate(0,${l+5})`),z=()=>{v.attr("fill",null),v.select(".domain").attr("stroke","var(--tl-axis-color, var(--tl-primary-color, #4285f4))").attr("fill","none"),v.selectAll(".tick line").attr("stroke","var(--tl-axis-color, var(--tl-primary-color, #4285f4))"),v.selectAll(".tick text").attr("fill","var(--tl-tick-color, var(--tl-primary-color, #4285f4))").attr("font-family","var(--tl-font, system-ui)").attr("font-size","10px")},_=Q.append("g"),S=_.append("g"),F=_.append("g").attr("class","tl-date-ticks"),C=_.append("g"),q=S.selectAll("circle").data(V).enter().append("circle").attr("cy",D).attr("r",6).attr("fill","var(--tl-accent-color, var(--tl-primary-color, #4285f4))").style("cursor",T=>i.onItemClick?"pointer":"default").on("click",(T,f)=>i.onItemClick?.(f,T)).on("mouseover",(T,f)=>i.onItemHover?.(f,T)),I=C.selectAll("g.tl-label").data(V).enter().append("g").attr("class","tl-label").style("cursor",T=>i.onItemClick?"pointer":"default").on("click",(T,f)=>i.onItemClick?.(f,T)).on("mouseover",(T,f)=>i.onItemHover?.(f,T));I.each(function(T){const f=T.label,g=ut(this);g.selectAll("*").remove();const x=i.enforceUniformCardSize?i.cardWidth:f?.width??i.cardWidth,k=i.enforceUniformCardSize?i.cardHeight:f?.height??i.cardHeight,N=D+i.labelYOffset,Z=g.append("g").attr("class","tl-card").attr("transform",`translate(${-x/2}, ${N-k})`).attr("data-card-width",String(x));if(Z.append("rect").attr("class","tl-card-bg").attr("x",0).attr("y",0).attr("width",x).attr("height",k).attr("rx",10).attr("ry",10).attr("fill","var(--tl-card-bg, transparent)").attr("stroke","var(--tl-card-border, transparent)"),!f||f.kind==="text")Z.append("foreignObject").attr("class","tl-label-text-card").attr("x",0).attr("y",0).attr("width",x).attr("height",k).append("xhtml:div").style("width",`${x}px`).style("height",`${k}px`).style("display","flex").style("align-items","center").style("justify-content","center").style("padding","8px 12px 8px 10px").style("text-align","center").style("font-family","var(--tl-font, system-ui)").style("color","var(--tl-text-color, #e6eefc)").style("line-height","1.25").style("overflow","hidden").text(f&&f.text||T.title);else if(f.kind==="image"){const dt=f.fit??i.mediaObjectFit??"cover",xt=f.zoom??1,Ot=Z.append("foreignObject").attr("class","tl-label-image-fo").attr("x",0).attr("y",0).attr("width",x).attr("height",k).append("xhtml:div").style("width",`${x}px`).style("height",`${k}px`).style("overflow","hidden").style("transformOrigin","center").style("transform",xt!==1?`scale(${xt})`:"none"),Ut=Ot.append("xhtml:img");Ut.attr("src",f.src).attr("alt",f.alt??T.title).style("display","block").style("width","100%").style("height","100%").style("objectFit",dt==="contain"?"contain":"cover").style("objectPosition","center"),Ut.on("error",()=>{Ot.style("display","none");const Rc=dt==="contain"?"xMidYMid meet":"xMidYMid slice";Z.append("image").attr("class","tl-label-image").attr("x",0).attr("y",0).attr("width",x).attr("height",k).attr("preserveAspectRatio",Rc).attr("href",f.src).attr("xlink:href",f.src)})}else if(f.kind==="video"){const dt=f.fit??i.mediaObjectFit??"cover",xt=f.zoom??1,Ut=Z.append("foreignObject").attr("class","tl-label-video").attr("x",0).attr("y",0).attr("width",x).attr("height",k).append("xhtml:div").style("width",`${x}px`).style("height",`${k}px`).style("overflow","hidden").style("borderRadius","var(--tl-card-radius, 10px)").style("boxShadow","var(--tl-card-shadow, none)").style("pointerEvents","auto").style("transformOrigin","center").style("transform",xt!==1?`scale(${xt})`:"none").append("xhtml:video");Ut.style("width","100%").style("height","100%").style("objectFit",dt==="contain"?"contain":"cover").style("objectPosition","center").attr("src",f.src).attr("playsinline","true").attr("muted","").attr("loop","").attr("autoplay","").attr("controls",null),f.poster&&Ut.attr("poster",f.poster);try{Ut.node()?.play?.().catch(()=>{})}catch{}}if(T.overlayColor){Z.append("rect").attr("class","tl-card-overlay").attr("x",0).attr("y",0).attr("width",x).attr("height",k).attr("rx",10).attr("ry",10).attr("fill",T.overlayColor).style("opacity","0.4").style("pointer-events","none");const dt=T.overlayText??(T.overlayColor?T.title:null);dt&&Z.append("foreignObject").attr("class","tl-card-overlay-text").attr("x",0).attr("y",0).attr("width",x).attr("height",k).style("pointer-events","none").append("xhtml:div").style("width",`${x}px`).style("height",`${k}px`).style("display","flex").style("align-items","center").style("justify-content","center").style("padding","10px").style("text-align","center").style("font-family","var(--tl-font, system-ui)").style("font-weight","var(--tl-overlay-text-weight, 600)").style("letter-spacing","0.2px").style("line-height","1.15").style("color","var(--tl-overlay-text-color, #fff)").style("opacity","var(--tl-overlay-text-opacity, 0.72)").style("text-shadow","var(--tl-overlay-text-shadow, 0 1px 2px rgba(0,0,0,0.35))").style("mix-blend-mode","normal").style("user-select","none").style("pointer-events","none").append("div").style("max-width",`${Math.max(0,x-16)}px`).style("overflow","hidden").style("text-overflow","ellipsis").style("white-space","nowrap").text(String(dt))}const st=`translate(${-x/2}, ${N-k})`;Z.attr("transform",st);const ht=()=>Z.transition().duration(120).attr("transform",`${st} translate(${x/2},${k/2}) scale(1.07) translate(${-x/2},${-k/2})`),ft=()=>Z.transition().duration(120).attr("transform",st);g.on("mouseenter",ht).on("mouseleave",ft)});const L=jt("%Y-%m-%d"),R=6,j=F.selectAll("g.tl-date-tick").data(V).enter().append("g").attr("class","tl-date-tick");j.append("line").attr("y1",D).attr("y2",D+R).attr("stroke","var(--tl-axis-color, var(--tl-primary-color, #4285f4))").attr("stroke-width",1),j.append("text").attr("class","tl-date-text").attr("y",D+R+11).attr("text-anchor","middle").attr("font-family","var(--tl-font, system-ui)").attr("font-size","10px").attr("fill","var(--tl-tick-color, var(--tl-primary-color, #4285f4))").text(T=>L(T.start));let nt=null;i.showTooltip!==!1&&(nt=d.append("div").attr("class","tl-tooltip").style("position","absolute").style("pointer-events","none").style("padding","6px 10px").style("border-radius","4px").style("width","250px").style("background","var(--tl-tooltip-bg, rgba(0,0,0,0.7))").style("color","var(--tl-tooltip-color, #fff)").style("font-family","var(--tl-font, system-ui)").style("font-size","12px").style("opacity","0"));function it(T){const f=T.start.toLocaleDateString(),g=T.end?`  ${T.end.toLocaleDateString()}`:"",x=T.description?`<div>${T.description}</div>`:"";return`<strong>${T.title}</strong><div>${f}${g}</div>${x}`}const ot=T=>{nt&&T.on("mouseover",(f,g)=>nt.html(it(g)).style("opacity","1")).on("mousemove",f=>nt.style("left",`${f.pageX+10}px`).style("top",`${f.pageY+10}px`)).on("mouseout",()=>nt.style("opacity","0"))};ot(q),ot(I),ot(j);function G(T){const f=v.selectAll(".tick").nodes();let g=-1/0;f.forEach(x=>{const k=x.transform?.baseVal?.[0]?.matrix?.e??x.getCTM?.()?.e??0;k-g<T?x.style.display="none":(x.style.display="",g=k)})}function M(T,f){let g=-1/0;j.each(function(x,k){const N=X(x,k,f),Z=ut(this),st=Z.select("text.tl-date-text"),ht=Z.select("line");N-g<T?(st.style("display","none"),ht.style("display","none")):(st.style("display",""),ht.style("display",""),g=N)})}const Y=d.append("div").attr("class","tl-nav").style("position","absolute").style("inset","0").style("pointer-events","none");function O(T){const f=Y.append("button").attr("type","button").attr("class",`tl-nav-${T}`).style("position","absolute").style("top","50%").style(T,"8px").style("transform","translateY(-50%)").style("width","40px").style("height","40px").style("border","none").style("borderRadius","999px").style("background","rgba(0,0,0,0.35)").style("backdropFilter","blur(2px)").style("color","#fff").style("fontSize","20px").style("lineHeight","40px").style("display","flex").style("alignItems","center").style("justifyContent","center").style("cursor","pointer").style("opacity","0.85").style("pointer-events","auto").style("user-select","none").style("transition","opacity 120ms ease, transform 120ms ease").text(T==="left"?"":"").on("mouseenter",()=>f.style("opacity","1")).on("mouseleave",()=>f.style("opacity",f.attr("data-disabled")==="true"?"0.35":"0.85"));return f}const w=O("left"),rt=O("right");let P=yt;function J(T){let f=0,g=1/0;for(let x=0;x<V.length;x++){const k=X(V[x],x,T),N=Math.abs(k-c/2);N<g&&(g=N,f=x)}return f}function B(T){T=Math.max(0,Math.min(V.length-1,T));const f=i.axisStrategy==="point"?E(T.toString())??0:p(V[T].start),g=P.k,x=c/2-g*f,k=yt.translate(x,0).scale(g);W(k,600)}function pt(T){const f=J(T),g=f<=0,x=f>=V.length-1;w.attr("data-disabled",g?"true":"false").style("opacity",g?"0.35":"0.85").style("cursor",g?"default":"pointer").style("display",r.axisStrategy==="time"?"":"none"),rt.attr("data-disabled",x?"true":"false").style("opacity",x?"0.35":"0.85").style("cursor",x?"default":"pointer").style("display",r.axisStrategy==="time"?"":"none"),w.on("click",()=>{w.attr("data-disabled")!=="true"&&B(J(P)-1)}),rt.on("click",()=>{rt.attr("data-disabled")!=="true"&&B(J(P)+1)})}const K=T=>{if(P=T,pt(T),q.attr("cx",(f,g)=>X(f,g,T)),I.each(function(f,g){const x=X(f,g,T);ut(this).attr("transform",`translate(${x},0)`).style("display","")}),i.axisStrategy==="point")v.style("display","none"),j.each(function(f,g){const x=X(f,g,T);ut(this).attr("transform",`translate(${x},0)`)}),i.hideOverlappingLabels?o&&o>1?j.each(function(f,g){const x=g%o===0,k=ut(this);k.select("text").style("display",x?"":"none"),k.select("line").style("display",x?"":"none")}):M(i.minLabelGap,T):j.selectAll("text,line").style("display","");else{j.selectAll("text,line").style("display","none"),v.style("display","");const f=$(T),g=Ci(f).tickFormat(jt("%Y-%m-%d"));a&&Number.isFinite(a)?g.ticks(Dt.every(a)):g.ticks(10),v.call(g),z(),G(i.minLabelGap)}if(i.hideOverlappingLabels&&Mt(T),i.onRangeChange)if(i.axisStrategy==="time"){const f=T.rescaleX(p);i.onRangeChange(f.domain())}else{const f=(E.step?.()??1)*T.k,g=Math.max(0,Math.floor((0-T.x)/Math.max(1,f))),x=Math.min(V.length-1,Math.ceil((c-T.x)/Math.max(1,f))),k=V[g]?.start??V[0].start,N=V[x]?.start??V[V.length-1].start;i.onRangeChange([k,N])}},ct=Jr().scaleExtent([u,y]).translateExtent([[0,0],[c,l]]).extent([[0,0],[c,l]]).on("zoom",T=>{const f=T.transform;_.attr("transform",null),K(f)});m.call(ct);function _t(){if(V.length<=1)return yt;const T=r.zoom?.initialScale;if(T&&isFinite(T))return yt.scale(T);if(i.axisStrategy==="point"){const f=E.step?.()??c/Math.max(1,V.length-1),g=Math.max(1,(i.minLabelGap??40)/Math.max(1,f));return yt.scale(Math.min(y,Math.max(u,g)))}else{let f=1/0;for(let k=1;k<V.length;k++){const N=Math.abs(p(V[k].start)-p(V[k-1].start));N>0&&N<f&&(f=N)}if(!isFinite(f)||f===0)return yt;const x=Math.max(i.cardWidth+(i.labelCardGap??8),i.minLabelGap??40)/f;return yt.scale(Math.min(y,Math.max(u,x)))}}function Mt(T){const f=I.nodes().map((k,N)=>{const Z=ut(k),st=Z.datum(),ht=X(st,N,T),dt=Z.select("g.tl-card").attr("data-card-width"),xt=Number(dt)||i.cardWidth;return{node:k,x:ht,w:xt}});f.sort((k,N)=>k.x-N.x);let g=-1/0;const x=i.labelCardGap;for(const{node:k,x:N,w:Z}of f){const st=N-Z/2,ht=N+Z/2;st<g+x?k.style.display="none":(k.style.display="",g=ht)}}const vt=_t();ct.transform(m,vt),K(vt)}}class Oc{static render(e,n,r){const i={axisStrategy:r.axisStrategy??"time",minLabelGap:r.minLabelGap??40,labelYOffset:r.labelXOffset??r.labelYOffset??16,cardWidth:r.cardWidth??140,cardHeight:r.cardHeight??200,enforceUniformCardSize:r.enforceUniformCardSize??!0,hideOverlappingLabels:r.hideOverlappingLabels??!0,labelCardGap:r.labelCardGap??8,mediaObjectFit:r.mediaObjectFit??"cover",baselineX:r.baselineX,hoverScale:r.hoverScale??1.08,hoverDotRadius:r.hoverDotRadius??8,showTooltip:r.showTooltip??!0,...r};n.innerHTML="";const a={top:10,right:80,bottom:50,left:80},o=n.clientWidth-a.left-a.right,s=n.clientHeight-a.top-a.bottom,c=r.zoom?.minScale??1,l=r.zoom?.maxScale??80,u=ut(n);u.style("position","relative");const y=u.append("svg").attr("width",o+a.left+a.right).attr("height",s+a.top+a.bottom).style("background","var(--tl-background-color, #fff)"),d=o+a.left+a.right,m=s+a.top+a.bottom,W=y.append("g").attr("class","tl-canvas-bg"),U=r.canvasBackground;if(!U)y.style("background","var(--tl-background-color, #fff)");else if(U.kind==="color")y.style("background",U.value??"var(--tl-background-color, #fff)");else if(U.kind==="image"){const f=U.fit??"cover";W.append("foreignObject").attr("x",0).attr("y",0).attr("width",d).attr("height",m).append("xhtml:div").style("width",`${d}px`).style("height",`${m}px`).style("opacity",String(U.opacity??1)).style("backgroundImage",`url("${U.src}")`).style("backgroundRepeat","no-repeat").style("backgroundPosition","center").style("backgroundSize",f==="contain"?"contain":"cover")}else if(U.kind==="video"){const f=U.fit??"cover",x=W.append("foreignObject").attr("x",0).attr("y",0).attr("width",d).attr("height",m).append("xhtml:div").style("width",`${d}px`).style("height",`${m}px`).style("overflow","hidden").style("opacity",String(U.opacity??1)).append("xhtml:video");x.style("width","100%").style("height","100%").style("objectFit",f==="contain"?"contain":"cover").style("objectPosition","center").attr("src",U.src).attr("playsinline","true").attr("muted",U.muted??!0?"":null).attr("loop",U.loop??!0?"":null).attr("autoplay",U.autoplay??!0?"":null).attr("controls",U.controls??!1?"":null),U.poster&&x.attr("poster",U.poster);try{x.node()?.play?.().catch(()=>{})}catch{}}const et=y.append("g").attr("transform",`translate(${a.left},${a.top})`),A=[...e.items].sort((f,g)=>+f.start-+g.start),tt=A.map(f=>f.start),Q=i.baselineX??Math.round(o/2),[V,lt]=$n(tt),D=Zr().domain([V,lt]).range([0,s]),H=A.map((f,g)=>g.toString()),h=$r().domain(H).range([0,s]).padding(.5),p=f=>f.rescaleY(D),b=(f,g,x)=>{if(i.axisStrategy==="point"){const k=h(g.toString())??0;return x.applyY(k)}else return p(x)(f.start)};et.append("line").attr("x1",Q).attr("x2",Q).attr("y1",0).attr("y2",s).attr("stroke","var(--tl-axis-color, var(--tl-primary-color, #4285f4))").attr("stroke-width",2);const E=et.append("g"),$=()=>{E.attr("fill",null),E.select(".domain").attr("stroke","var(--tl-axis-color, var(--tl-primary-color, #4285f4))").attr("fill","none"),E.selectAll(".tick line").attr("stroke","var(--tl-axis-color, var(--tl-primary-color, #4285f4))"),E.selectAll(".tick text").attr("fill","var(--tl-tick-color, var(--tl-primary-color, #4285f4))").attr("font-family","var(--tl-font, system-ui)").attr("font-size","10px")};i.axisStrategy==="time"&&(E.call(Hn(D).ticks(10).tickFormat(jt("%Y-%m-%d"))),$());const X=et.append("g"),v=X.append("g"),z=X.append("g"),_=X.append("g").attr("class","tl-point-axis").style("display",i.axisStrategy==="point"?"":"none"),S=v.selectAll("circle").data(A).enter().append("circle").attr("cx",Q).attr("r",6).attr("fill","var(--tl-accent-color, var(--tl-primary-color, #4285f4))").style("cursor",f=>i.onItemClick?"pointer":"default").on("click",(f,g)=>i.onItemClick?.(g,f)).on("mouseover",(f,g)=>i.onItemHover?.(g,f)),F=z.selectAll("g.tl-label").data(A).enter().append("g").attr("class","tl-label").style("cursor",f=>i.onItemClick?"pointer":"default").on("click",(f,g)=>i.onItemClick?.(g,f)).on("mouseover",(f,g)=>i.onItemHover?.(g,f));F.each(function(f){const g=f.label,x=ut(this);x.selectAll("*").remove();const k=i.enforceUniformCardSize?i.cardWidth:g?.width??i.cardWidth,N=i.enforceUniformCardSize?i.cardHeight:g?.height??i.cardHeight,Z=Q+i.labelYOffset,st=x.append("g").attr("class","tl-card").attr("data-card-width",String(k)).attr("data-card-height",String(N)).attr("data-card-tx",String(Z)).attr("transform",C(Z,N,k,1));if(st.style("transition","transform 120ms ease"),st.append("rect").attr("class","tl-card-bg").attr("x",0).attr("y",0).attr("width",k).attr("height",N).attr("rx",10).attr("ry",10).attr("fill","var(--tl-card-bg, rgba(12, 19, 33, 0.85))").attr("stroke","var(--tl-card-border, rgba(255,255,255,0.08))"),!g||g.kind==="text")st.append("foreignObject").attr("class","tl-label-text-card").attr("x",0).attr("y",0).attr("width",k).attr("height",N).append("xhtml:div").style("width",`${k}px`).style("height",`${N}px`).style("display","flex").style("align-items","center").style("justify-content","center").style("padding","8px 12px 8px 10px").style("text-align","center").style("font-family","var(--tl-font, system-ui)").style("color","var(--tl-text-color, #e6eefc)").style("line-height","1.25").style("overflow","hidden").text(g&&g.text||f.title);else if(g.kind==="image"){const ft=g.fit??i.mediaObjectFit??"cover",dt=g.zoom??1,Lt=st.append("foreignObject").attr("class","tl-label-image-fo").attr("x",0).attr("y",0).attr("width",k).attr("height",N).append("xhtml:div").style("width",`${k}px`).style("height",`${N}px`).style("overflow","hidden").style("transformOrigin","center").style("transform",dt!==1?`scale(${dt})`:"none"),Ot=Lt.append("xhtml:img");Ot.attr("src",g.src).attr("alt",g.alt??f.title).style("display","block").style("width","100%").style("height","100%").style("objectFit",ft==="contain"?"contain":"cover").style("objectPosition","center"),Ot.on("error",()=>{Lt.style("display","none");const Ut=ft==="contain"?"xMidYMid meet":"xMidYMid slice";st.append("image").attr("class","tl-label-image").attr("x",0).attr("y",0).attr("width",k).attr("height",N).attr("preserveAspectRatio",Ut).attr("href",g.src).attr("xlink:href",g.src)}),g.alt&&st.append("title").text(g.alt)}else if(g.kind==="video"){const ft=g.fit??i.mediaObjectFit??"cover",dt=g.zoom??1,Ot=st.append("foreignObject").attr("class","tl-label-video").attr("x",0).attr("y",0).attr("width",k).attr("height",N).append("xhtml:div").style("width",`${k}px`).style("height",`${N}px`).style("overflow","hidden").style("borderRadius","var(--tl-card-radius, 10px)").style("boxShadow","var(--tl-card-shadow, none)").style("pointerEvents","auto").style("transformOrigin","center").style("transform",dt!==1?`scale(${dt})`:"none").append("xhtml:video");Ot.style("width","100%").style("height","100%").style("objectFit",ft==="contain"?"contain":"cover").style("objectPosition","center").attr("src",g.src).attr("playsinline","true").attr("muted","").attr("loop","").attr("autoplay","").attr("controls",null),g.poster&&Ot.attr("poster",g.poster);try{Ot.node()?.play?.().catch(()=>{})}catch{}}f.overlayColor&&st.append("rect").attr("class","tl-card-overlay").attr("x",0).attr("y",0).attr("width",k).attr("height",N).attr("rx",10).attr("ry",10).attr("fill",f.overlayColor).style("opacity","0.4").style("pointer-events","none");const ht=f.overlayText??(f.overlayColor?f.title:null);ht&&st.append("foreignObject").attr("class","tl-card-overlay-text").attr("x",0).attr("y",0).attr("width",k).attr("height",N).style("pointer-events","none").append("xhtml:div").style("width",`${k}px`).style("height",`${N}px`).style("display","flex").style("align-items","center").style("justify-content","center").style("padding","10px").style("text-align","center").style("font-family","var(--tl-font, system-ui)").style("font-weight","var(--tl-overlay-text-weight, 600)").style("letter-spacing","0.2px").style("line-height","1.15").style("color","var(--tl-overlay-text-color, #fff)").style("opacity","var(--tl-overlay-text-opacity, 0.72)").style("text-shadow","var(--tl-overlay-text-shadow, 0 1px 2px rgba(0,0,0,0.35))").style("mix-blend-mode","normal").style("user-select","none").style("pointer-events","none").append("div").style("max-width",`${Math.max(0,k-16)}px`).style("overflow","hidden").style("text-overflow","ellipsis").style("white-space","nowrap").text(String(ht))});function C(f,g,x,k=1){return`translate(${f}, ${-g/2}) translate(${x/2}, ${g/2}) scale(${k}) translate(${-x/2}, ${-g/2})`}function q(f,g=i.hoverScale){const x=f.select("g.tl-card");if(!x.node())return;const k=+(x.attr("data-card-width")||i.cardWidth),N=+(x.attr("data-card-height")||i.cardHeight),Z=+(x.attr("data-card-tx")||Q+i.labelYOffset);x.attr("transform",C(Z,N,k,g))}function I(f){const g=f.select("g.tl-card");if(!g.node())return;const x=+(g.attr("data-card-width")||i.cardWidth),k=+(g.attr("data-card-height")||i.cardHeight),N=+(g.attr("data-card-tx")||Q+i.labelYOffset);g.attr("transform",C(N,k,x,1))}S.style("transition","r 120ms ease").on("mouseenter",function(f,g){const x=ut(this).attr("r");ut(this).attr("data-prev-r",x).attr("r",i.hoverDotRadius);const k=A.indexOf(g),N=F.nodes()[k];q(ut(N))}).on("mouseleave",function(f,g){const x=ut(this).attr("data-prev-r")||6;ut(this).attr("r",x);const k=A.indexOf(g),N=F.nodes()[k];I(ut(N))}),F.on("mouseenter",function(){q(ut(this))}).on("mouseleave",function(){I(ut(this))});let L=null;i.showTooltip!==!1&&(L=u.append("div").attr("class","tl-tooltip").style("position","absolute").style("pointer-events","none").style("padding","6px 10px").style("width","250px").style("border-radius","4px").style("background","var(--tl-tooltip-bg, rgba(0,0,0,0.7))").style("color","var(--tl-tooltip-color, #fff)").style("font-family","var(--tl-font, system-ui)").style("font-size","12px").style("opacity","0"));function R(f){const g=f.start.toLocaleDateString(),x=f.end?`  ${f.end.toLocaleDateString()}`:"",k=f.description?`<div>${f.description}</div>`:"";return`<strong>${f.title}</strong><div>${g}${x}</div>${k}`}const j=f=>{L&&f.on("mouseover",(g,x)=>L.html(R(x)).style("opacity","1")).on("mousemove",g=>L.style("left",`${g.pageX+10}px`).style("top",`${g.pageY+10}px`)).on("mouseout",()=>L.style("opacity","0"))};j(S),j(F);const nt=jt("%Y-%m-%d"),it=6,ot=10,G=_.selectAll("g.tl-date-tick").data(A).enter().append("g").attr("class","tl-date-tick");G.append("line").attr("x1",Q).attr("x2",Q-it).attr("stroke","var(--tl-axis-color, var(--tl-primary-color, #4285f4))").attr("stroke-width",1),G.append("text").attr("class","tl-date-text").attr("x",Q-it-ot).attr("text-anchor","end").attr("font-family","var(--tl-font, system-ui)").attr("font-size","10px").attr("fill","var(--tl-tick-color, var(--tl-primary-color, #4285f4))").text(f=>nt(f.start));const M=u.append("div").attr("class","tl-nav").style("position","absolute").style("inset","0").style("pointer-events","none");function Y(f,g){const x=M.append("button").attr("type","button").attr("class",`tl-nav-${f}`).style("position","absolute").style(f,"8px").style("left","50%").style("transform","translateX(-50%)").style("width","40px").style("height","40px").style("border","none").style("borderRadius","999px").style("background","rgba(0,0,0,0.35)").style("backdropFilter","blur(2px)").style("color","#fff").style("fontSize","20px").style("lineHeight","40px").style("display","flex").style("alignItems","center").style("justifyContent","center").style("cursor","pointer").style("opacity","0.85").style("pointer-events","auto").style("user-select","none").style("transition","opacity 120ms ease, transform 120ms ease").style("display",r.axisStrategy==="time"?"":"none").text(g).on("mouseenter",()=>x.style("opacity","1")).on("mouseleave",()=>x.style("opacity",x.attr("data-disabled")==="true"?"0.35":"0.85"));return x}const O=Y("top",""),w=Y("bottom","");function rt(f,g=600){y.transition().duration(g).call(Mt.transform,f)}let P=yt;function J(f){let g=0,x=1/0;for(let k=0;k<A.length;k++){const N=b(A[k],k,f),Z=Math.abs(N-s/2);Z<x&&(x=Z,g=k)}return g}function B(f){f=Math.max(0,Math.min(A.length-1,f));const g=i.axisStrategy==="point"?h(f.toString())??0:D(A[f].start),x=P.k,k=s/2-x*g,N=yt.translate(0,k).scale(x);rt(N,600)}function pt(f){const g=J(f),x=g<=0,k=g>=A.length-1;O.attr("data-disabled",x?"true":"false").style("opacity",x?"0.35":"0.85").style("cursor",x?"default":"pointer").style("display",r.axisStrategy==="time"?"":"none"),w.attr("data-disabled",k?"true":"false").style("opacity",k?"0.35":"0.85").style("cursor",k?"default":"pointer").style("display",r.axisStrategy==="time"?"":"none"),O.on("click",()=>{x||B(g-1)}),w.on("click",()=>{k||B(g+1)})}function K(f){const g=F.nodes().map((N,Z)=>{const st=ut(N),ht=st.datum(),ft=b(ht,Z,f),xt=st.select("g.tl-card").attr("data-card-height"),Lt=Number(xt)||i.cardHeight;return{node:N,y:ft,h:Lt}});g.sort((N,Z)=>N.y-Z.y);let x=-1/0;const k=i.labelCardGap;for(const{node:N,y:Z,h:st}of g){const ht=Z-st/2,ft=Z+st/2;ht<x+k?N.style.display="none":(N.style.display="",x=ft)}}function ct(f,g){let x=-1/0;G.each(function(k,N){const Z=b(k,N,g),st=ut(this),ht=st.select("text.tl-date-text"),ft=st.select("line");Z-x<f?(ht.style("display","none"),ft.style("display","none")):(ht.style("display",""),ft.style("display",""),x=Z)})}const _t=f=>{if(P=f,pt(f),S.attr("cy",(g,x)=>b(g,x,f)),F.each(function(g,x){const k=b(g,x,f);ut(this).attr("transform",`translate(0, ${k})`).style("display","")}),i.axisStrategy==="time"){const g=p(f);E.style("display",""),E.call(Hn(g).ticks(10).tickFormat(jt("%Y-%m-%d"))),_.style("display","none")}else E.style("display","none"),_.style("display",""),G.each(function(g,x){const k=b(g,x,f);ut(this).attr("transform",`translate(0, ${k})`)}),i.hideOverlappingLabels&&ct(i.minLabelGap??40,f);if(i.hideOverlappingLabels&&K(f),i.onRangeChange)if(i.axisStrategy==="time"){const g=f.rescaleY(D);i.onRangeChange(g.domain())}else{const g=(h.step?.()??1)*f.k,x=Math.max(0,Math.floor((0-f.y)/Math.max(1,g))),k=Math.min(A.length-1,Math.ceil((s-f.y)/Math.max(1,g))),N=A[x]?.start??A[0].start,Z=A[k]?.start??A[A.length-1].start;i.onRangeChange([N,Z])}},Mt=Jr().scaleExtent([c,l]).translateExtent([[0,0],[o,s]]).extent([[0,0],[o,s]]).on("zoom",f=>{const g=f.transform;X.attr("transform",null),_t(g)});y.call(Mt);function vt(){if(A.length<=1)return yt;const f=r.zoom?.initialScale;if(f&&isFinite(f))return yt.scale(f);if(i.axisStrategy==="point"){const g=h.step?.()??s/Math.max(1,A.length-1),x=Math.max(1,(i.minLabelGap??40)/Math.max(1,g));return yt.scale(Math.min(l,Math.max(c,x)))}else{let g=1/0;for(let N=1;N<A.length;N++){const Z=Math.abs(D(A[N].start)-D(A[N-1].start));Z>0&&Z<g&&(g=Z)}if(!isFinite(g)||g===0)return yt;const k=Math.max(i.cardHeight+(i.labelCardGap??8),i.minLabelGap??40)/g;return yt.scale(Math.min(l,Math.max(c,k)))}}const T=vt();Mt.transform(y,T),_t(T)}}class $c{static render(e,n,r){n.innerHTML="";const i="tl-grid-modern-styles";if(!document.getElementById(i)){const c=document.createElement("style");c.id=i,c.textContent=`
        /* ---------- Grid Container ---------- */
        .tl-grid {
          --grid-gap: 16px;
          --grid-pad: 16px;
          --grid-min: 220px;

          --card-radius: var(--tl-card-radius, 16px);
          --card-shadow: var(--tl-card-shadow, 0 10px 30px rgba(0,0,0,0.18));
          --card-bg: color-mix(in oklab, var(--tl-background-color, #0b1020) 75%, white 0%);
          --card-fg: var(--tl-text-color, #e6eefc);

          --glass-bg: color-mix(in oklab, var(--card-bg) 85%, white 0%);
          --accent: var(--tl-primary-color, #4f7fff);

          --chip-bg: color-mix(in oklab, var(--accent) 20%, black 80%);
          --chip-fg: color-mix(in oklab, var(--accent) 95%, white 0%);

          --lift-translate: -4px;
          --lift-scale: 1.02;

          display: grid;
          gap: var(--grid-gap);
          grid-template-columns: repeat(auto-fill, minmax(var(--grid-min), 1fr));
          padding: var(--grid-pad);
          background: var(--tl-background-color, #0b1020);
          border-radius: var(--tl-border-radius, 16px);
          font-family: var(--tl-font, system-ui);
          position: relative;
          overflow: hidden;
        }

        /* ---------- Card ---------- */
        .tl-card {
          position: relative;
          border-radius: var(--card-radius);
          background: var(--glass-bg);
          color: var(--card-fg);
          box-shadow: var(--card-shadow);
          overflow: clip;
          cursor: default;
          transform: translateY(8px);
          opacity: 0;
          transition: transform 420ms cubic-bezier(.2, .8, .2, 1), opacity 420ms ease, box-shadow 200ms ease, filter 200ms ease;
          outline: none;
          border: 1px solid rgba(255,255,255,0.08);
          position: relative;
          isolation: isolate;
        }
        .tl-card::before {
          content: "";
          position: absolute; inset: 0;
          border-radius: inherit;
          padding: 1px; /* gradient stroke */
          background: linear-gradient(180deg, rgba(255,255,255,0.25), rgba(255,255,255,0));
          -webkit-mask:
            linear-gradient(#000 0 0) content-box,
            linear-gradient(#000 0 0);
          -webkit-mask-composite: xor;
                  mask-composite: exclude;
          pointer-events: none;
          z-index: 1;
        }
        .tl-card[data-revealed="true"] {
          transform: translateY(0);
          opacity: 1;
        }
        .tl-card:hover {
          transform: translateY(var(--lift-translate)) scale(var(--lift-scale));
          box-shadow: 0 14px 40px rgba(0,0,0,0.35);
          filter: saturate(1.05);
        }
        .tl-card:focus-visible {
          box-shadow: 0 0 0 2px color-mix(in oklab, var(--accent) 50%, white 0%), var(--card-shadow);
        }
        .tl-card.clickable { cursor: pointer; }

        /* ---------- Media ---------- */
        .tl-media {
          position: relative;
          aspect-ratio: 16 / 9;
          width: 100%;
          overflow: clip;
        }
        .tl-media > img,
        .tl-media > video {
          width: 100%;
          height: 100%;
          object-fit: cover;
          object-position: center;
          display: block;
          transform-origin: center;
        }

        /* ---------- Overlay & Overlay text ---------- */
        .tl-overlay {
          position: absolute;
          inset: 0;
          pointer-events: none;
          mix-blend-mode: normal;
        }
        .tl-overlay-text {
          position: absolute;
          inset: 0;
          display: grid;
          place-items: center;
          padding: 10px;
          text-align: center;
          font-weight: 600;
          letter-spacing: 0.2px;
          color: #fff;
          text-shadow: 0 1px 2px rgba(0,0,0,0.4);
          opacity: .85;
          pointer-events: none;
        }

        /* ---------- Year Chip ---------- */
        .tl-chip {
          position: absolute;
          top: 10px; left: 10px; /*    right: 10px     */
          padding: 4px 8px;
          border-radius: 999px;
          font-size: 12px;
          background: var(--chip-bg);
          color: var(--chip-fg);
          backdrop-filter: blur(4px);
          border: 1px solid rgba(255,255,255,0.12);
          z-index: 2;
          pointer-events: none; /*    click  media/header */
        }

        /* ---------- Header ---------- */
        .tl-head {
          padding: 12px 14px 8px;
          position: relative;
          z-index: 3;
        }
        .tl-title {
          margin: 0;
          font-size: 16px;
          font-weight: 700;
          line-height: 1.2;
          letter-spacing: .2px;
        }
        .tl-date {
          margin-top: 4px;
          font-size: 12px;
          opacity: .8;
        }

        /*    media   chip   card,
              header      . */
        .tl-card[data-has-chip="true"] .tl-head {
          padding-left: 72px;
          min-height: 46px;
          display: flex;
          flex-direction: column;
          justify-content: center;
        }

        /* ---------- Body ---------- */
        .tl-body {
          padding: 12px 14px;
          font-size: 14px;
          line-height: 1.35;
          color: color-mix(in oklab, var(--card-fg) 90%, white 0%);
        }

        /* ---------- Subtle shine on hover ---------- */
        .tl-card::after {
          content: "";
          position: absolute;
          inset: -100% -50%;
          background: linear-gradient(120deg, transparent 30%, rgba(255,255,255,.06) 45%, transparent 60%);
          transform: translateX(-30%) rotate(0.001deg);
          transition: transform 600ms ease;
          pointer-events: none;
        }
        .tl-card:hover::after {
          transform: translateX(30%) rotate(0.001deg);
        }
      `,document.head.appendChild(c)}const a=document.createElement("div");a.className="tl-grid",n.appendChild(a);const o=[],s=new IntersectionObserver(c=>{for(const l of c){const u=l.target;if(l.isIntersecting){u.dataset.revealed="true";const y=u.querySelector("video");if(y)try{y.play().catch(()=>{})}catch{}}else{const y=u.querySelector("video");if(y)try{y.pause()}catch{}}}},{root:n,threshold:.15});for(const c of e.items){const l=document.createElement("article");l.className="tl-card",l.tabIndex=0,r.onItemClick&&l.classList.add("clickable");const u=document.createElement("header");u.className="tl-head",u.innerHTML=`<h4 class="tl-title">${ti(c.title)}</h4><div class="tl-date">${ti(Ic(c))}</div>`,l.appendChild(u);let y=null;if(c.label){if(y=document.createElement("div"),y.className="tl-media",c.label.kind==="image"){const m=document.createElement("img");m.loading="lazy",m.decoding="async",m.src=c.label.src,m.alt=c.label.alt??c.title,c.label.fit==="contain"&&(m.style.objectFit="contain"),c.label.zoom&&c.label.zoom!==1&&(m.style.transform=`scale(${c.label.zoom})`),y.appendChild(m)}else if(c.label.kind==="video"){const m=document.createElement("video");m.src=c.label.src,c.label.poster&&(m.poster=c.label.poster),m.muted=!0,m.loop=!0,m.playsInline=!0,m.autoplay=!1,c.label.fit==="contain"&&(m.style.objectFit="contain"),c.label.zoom&&c.label.zoom!==1&&(m.style.transform=`scale(${c.label.zoom})`),y.appendChild(m)}else if(c.label.kind==="text"){const m=document.createElement("div");m.style.display="grid",m.style.placeItems="center",m.style.padding="18px",m.style.textAlign="center",m.style.height="100%",m.style.fontWeight="600",m.textContent=c.label.text??c.title,y.appendChild(m)}if(c.overlayColor){const m=document.createElement("div");m.className="tl-overlay",m.style.background=c.overlayColor,y.appendChild(m);const W=c.overlayText??null;if(W){const U=document.createElement("div");U.className="tl-overlay-text",U.textContent=String(W),y.appendChild(U)}}const d=document.createElement("div");d.className="tl-chip",d.textContent=String(c.start.getFullYear()),y.appendChild(d),l.appendChild(y)}else{const d=document.createElement("div");d.className="tl-chip",d.textContent=String(c.start.getFullYear()),l.appendChild(d),l.dataset.hasChip="true"}if(c.description){const d=document.createElement("div");d.className="tl-body",d.textContent=c.description,l.appendChild(d)}r.onItemClick&&(l.addEventListener("click",d=>r.onItemClick(c,d)),l.style.cursor="pointer"),r.onItemHover&&l.addEventListener("mouseenter",d=>r.onItemHover(c,d)),s.observe(l),o.push(l),a.appendChild(l)}a.addEventListener("keydown",c=>{const l=c.target,u=o.indexOf(l);if(u<0)return;const y=zc(a,o),d=c.key;let m=u;if(d==="ArrowRight")m=Math.min(o.length-1,u+1);else if(d==="ArrowLeft")m=Math.max(0,u-1);else if(d==="ArrowDown")m=Math.min(o.length-1,u+y);else if(d==="ArrowUp")m=Math.max(0,u-y);else if(d==="Enter"){l.click();return}else return;const W=o[m];W&&(W.focus(),W.scrollIntoView({behavior:"smooth",block:"center",inline:"center"}),c.preventDefault())})}}function ti(t){return t.replace(/[&<>"']/g,e=>({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"})[e])}function Ic(t){const e=t.start.toLocaleDateString();return t.end?`${e}  ${t.end.toLocaleDateString()}`:e}function zc(t,e){if(e.length<=1)return 1;const n=e[0].offsetTop;let r=0;for(const i of e){if(i.offsetTop!==n)break;r++}return Math.max(1,r)}function Fc(t){return t.replace(/[A-Z]/g,e=>"-"+e.toLowerCase())}function Nc(t,e){if(t.classList.remove("tl-theme-light","tl-theme-dark"),Array.from(t.style).forEach(n=>{n.startsWith("--tl-")&&t.style.removeProperty(n)}),!!e)if(e==="light"||e==="dark")t.classList.add(`tl-theme-${e}`);else for(const[n,r]of Object.entries(e)){if(r==null)continue;const i=`--tl-${Fc(n)}`;t.style.setProperty(i,r)}}class Kt{constructor(e,n){this.items=e,this.config={theme:"light",mode:"slider",showTodayLine:!0,interactive:!0,language:"en",...n}}render(e){switch(e.innerHTML="",Nc(e,this.config.theme),this.config.mode){case"slider":Dc.render(this,e,this.config);break;case"vertical":Oc.render(this,e,this.config);break;case"grid":$c.render(this,e,this.config);break;default:e.innerHTML=this.toHTML()}}toHTML(){return`<div class="tl-container">${this.items.map(n=>`<div class="tl-item">
         <strong>${n.title}</strong>
         <time>${n.start.toLocaleDateString()}</time>
       </div>`).join("")}</div>`}static fromCSV(e){const n=Ht.parse(e,"csv");return new Kt(n)}static fromJSON(e){const n=Ht.parse(e,"json");return new Kt(n)}static fromXML(e){const n=Ht.parse(e,"xml");return new Kt(n)}static fromTEI(e){const n=Ht.parse(e,"tei");return new Kt(n)}static from(e,n){const r=Ht.parse(e,n);return new Kt(r)}static registerParser(e){Ht.register(e)}static supportedFormats(){return Ht.supportedFormats()}}const ei="chrono-leaf-default-themes";if(!document.getElementById(ei)){const t=document.createElement("style");t.id=ei,t.textContent=`
     /* Theme classes just set variables */
      .tl-theme-light {
       --tl-primary-color: #4285f4;
       --tl-background-color: #fff;
       --tl-font: system-ui, sans-serif;
       --tl-border-radius: 4px;
       --tl-tooltip-bg: rgba(0,0,0,0.7);
       --tl-tooltip-color: #fff;
       --tl-card-bg: rgba(0,0,0,0.04);
       --tl-card-border: rgba(0,0,0,0.15);
       --tl-card-radius: 10px;
       --tl-card-shadow: 0 2px 8px rgba(0,0,0,0.12);
         --tl-overlay-text-color: #fff;
  --tl-overlay-text-opacity: 0.72;
  --tl-overlay-text-weight: 600;
  --tl-overlay-text-shadow: 0 1px 2px rgba(0,0,0,0.35);
       }
       .tl-theme-dark {
        --tl-primary-color: #8ab4f8;
        --tl-background-color: #222;
        --tl-font: system-ui, sans-serif;
        --tl-border-radius: 4px;
        --tl-tooltip-bg: rgba(255,255,255,0.85);
        --tl-tooltip-color: #000;
        --tl-card-bg: rgba(255,255,255,0.06);
        --tl-card-border: rgba(255,255,255,0.18);
        --tl-card-radius: 10px;
        --tl-card-shadow: 0 2px 10px rgba(0,0,0,0.35);
          --tl-overlay-text-color: #fff;
  --tl-overlay-text-opacity: 0.72;
  --tl-overlay-text-weight: 600;
  --tl-overlay-text-shadow: 0 1px 2px rgba(0,0,0,0.35);
      }

     /* Base container styles */
     .tl-container, .tl-grid {
       background: var(--tl-background-color);
       font-family: var(--tl-font);
       border-radius: var(--tl-border-radius);
      color: inherit;
       color: var(--tl-text-color, inherit);
     }
  .tl-container svg foreignObject.tl-label-video {
    overflow: visible;
  }
  .tl-container svg .tl-label-text {
    user-select: none;
  }

     /* Axis & SVG text defaults (renderer reads these vars) */
     .tl-container svg .domain,
     .tl-container svg .tick line {
       stroke: var(--tl-axis-color, var(--tl-primary-color, #4285f4));
     }
     .tl-container svg .tick text {
       fill: var(--tl-tick-color, var(--tl-primary-color, #4285f4));
       font-family: var(--tl-font);
     }
 
     /* Tooltip */
     .tl-tooltip {
       background: var(--tl-tooltip-bg);
       color: var(--tl-tooltip-color);
       font-family: var(--tl-font);
     }
   `,document.head.appendChild(t)}Zt.Timeline=Kt,Object.defineProperty(Zt,Symbol.toStringTag,{value:"Module"})});
//# sourceMappingURL=chrono-leaf.umd.js.map
