(function(Yt,Jt){typeof exports=="object"&&typeof module<"u"?Jt(exports):typeof define=="function"&&define.amd?define(["exports"],Jt):(Yt=typeof globalThis<"u"?globalThis:Yt||self,Jt(Yt.ChronoLeaf={}))})(this,function(Yt){"use strict";function Jt(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var me={exports:{}};/* @license
Papa Parse
v5.5.3
https://github.com/mholt/PapaParse
License: MIT
*/var Jr=me.exports,Cn;function ti(){return Cn||(Cn=1,function(t,e){((n,r)=>{t.exports=r()})(Jr,function n(){var r=typeof self<"u"?self:typeof window<"u"?window:r!==void 0?r:{},i,o=!r.document&&!!r.postMessage,a=r.IS_PAPA_WORKER||!1,s={},l=0,u={};function c(f){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},(function(h){var x=K(h);x.chunkSize=parseInt(x.chunkSize),h.step||h.chunk||(x.chunkSize=null),this._handle=new $(x),(this._handle.streamer=this)._config=x}).call(this,f),this.parseChunk=function(h,x){var E=parseInt(this._config.skipFirstNLines)||0;if(this.isFirstChunk&&0<E){let W=this._config.newline;W||(D=this._config.quoteChar||'"',W=this._handle.guessLineEndings(h,D)),h=[...h.split(W).slice(E)].join(W)}this.isFirstChunk&&O(this._config.beforeFirstChunk)&&(D=this._config.beforeFirstChunk(h))!==void 0&&(h=D),this.isFirstChunk=!1,this._halted=!1;var E=this._partialLine+h,D=(this._partialLine="",this._handle.parse(E,this._baseIndex,!this._finished));if(!this._handle.paused()&&!this._handle.aborted()){if(h=D.meta.cursor,E=(this._finished||(this._partialLine=E.substring(h-this._baseIndex),this._baseIndex=h),D&&D.data&&(this._rowCount+=D.data.length),this._finished||this._config.preview&&this._rowCount>=this._config.preview),a)r.postMessage({results:D,workerId:u.WORKER_ID,finished:E});else if(O(this._config.chunk)&&!x){if(this._config.chunk(D,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);this._completeResults=D=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(D.data),this._completeResults.errors=this._completeResults.errors.concat(D.errors),this._completeResults.meta=D.meta),this._completed||!E||!O(this._config.complete)||D&&D.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),E||D&&D.meta.paused||this._nextChunk(),D}this._halted=!0},this._sendError=function(h){O(this._config.error)?this._config.error(h):a&&this._config.error&&r.postMessage({workerId:u.WORKER_ID,error:h,finished:!1})}}function g(f){var h;(f=f||{}).chunkSize||(f.chunkSize=u.RemoteChunkSize),c.call(this,f),this._nextChunk=o?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(x){this._input=x,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(h=new XMLHttpRequest,this._config.withCredentials&&(h.withCredentials=this._config.withCredentials),o||(h.onload=A(this._chunkLoaded,this),h.onerror=A(this._chunkError,this)),h.open(this._config.downloadRequestBody?"POST":"GET",this._input,!o),this._config.downloadRequestHeaders){var x,E=this._config.downloadRequestHeaders;for(x in E)h.setRequestHeader(x,E[x])}var D;this._config.chunkSize&&(D=this._start+this._config.chunkSize-1,h.setRequestHeader("Range","bytes="+this._start+"-"+D));try{h.send(this._config.downloadRequestBody)}catch(W){this._chunkError(W.message)}o&&h.status===0&&this._chunkError()}},this._chunkLoaded=function(){h.readyState===4&&(h.status<200||400<=h.status?this._chunkError():(this._start+=this._config.chunkSize||h.responseText.length,this._finished=!this._config.chunkSize||this._start>=(x=>(x=x.getResponseHeader("Content-Range"))!==null?parseInt(x.substring(x.lastIndexOf("/")+1)):-1)(h),this.parseChunk(h.responseText)))},this._chunkError=function(x){x=h.statusText||x,this._sendError(new Error(x))}}function d(f){(f=f||{}).chunkSize||(f.chunkSize=u.LocalChunkSize),c.call(this,f);var h,x,E=typeof FileReader<"u";this.stream=function(D){this._input=D,x=D.slice||D.webkitSlice||D.mozSlice,E?((h=new FileReader).onload=A(this._chunkLoaded,this),h.onerror=A(this._chunkError,this)):h=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var D=this._input,W=(this._config.chunkSize&&(W=Math.min(this._start+this._config.chunkSize,this._input.size),D=x.call(D,this._start,W)),h.readAsText(D,this._config.encoding));E||this._chunkLoaded({target:{result:W}})},this._chunkLoaded=function(D){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(D.target.result)},this._chunkError=function(){this._sendError(h.error)}}function v(f){var h;c.call(this,f=f||{}),this.stream=function(x){return h=x,this._nextChunk()},this._nextChunk=function(){var x,E;if(!this._finished)return x=this._config.chunkSize,h=x?(E=h.substring(0,x),h.substring(x)):(E=h,""),this._finished=!h,this.parseChunk(E)}}function L(f){c.call(this,f=f||{});var h=[],x=!0,E=!1;this.pause=function(){c.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){c.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(D){this._input=D,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){E&&h.length===1&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),h.length?this.parseChunk(h.shift()):x=!0},this._streamData=A(function(D){try{h.push(typeof D=="string"?D:D.toString(this._config.encoding)),x&&(x=!1,this._checkIsFinished(),this.parseChunk(h.shift()))}catch(W){this._streamError(W)}},this),this._streamError=A(function(D){this._streamCleanUp(),this._sendError(D)},this),this._streamEnd=A(function(){this._streamCleanUp(),E=!0,this._streamData("")},this),this._streamCleanUp=A(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function $(f){var h,x,E,D,W=Math.pow(2,53),p=-W,N=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,b=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,k=this,U=0,T=0,Y=!1,R=!1,z=[],F={data:[],errors:[],meta:{}};function B(_){return f.skipEmptyLines==="greedy"?_.join("").trim()==="":_.length===1&&_[0].length===0}function Q(){if(F&&E&&(C("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+u.DefaultDelimiter+"'"),E=!1),f.skipEmptyLines&&(F.data=F.data.filter(function(w){return!B(w)})),j()){let w=function(m,P){O(f.transformHeader)&&(m=f.transformHeader(m,P)),z.push(m)};if(F)if(Array.isArray(F.data[0])){for(var _=0;j()&&_<F.data.length;_++)F.data[_].forEach(w);F.data.splice(0,1)}else F.data.forEach(w)}function y(w,m){for(var P=f.header?{}:[],I=0;I<w.length;I++){var V=I,q=w[I],q=((nt,X)=>(et=>(f.dynamicTypingFunction&&f.dynamicTyping[et]===void 0&&(f.dynamicTyping[et]=f.dynamicTypingFunction(et)),(f.dynamicTyping[et]||f.dynamicTyping)===!0))(nt)?X==="true"||X==="TRUE"||X!=="false"&&X!=="FALSE"&&((et=>{if(N.test(et)&&(et=parseFloat(et),p<et&&et<W))return 1})(X)?parseFloat(X):b.test(X)?new Date(X):X===""?null:X):X)(V=f.header?I>=z.length?"__parsed_extra":z[I]:V,q=f.transform?f.transform(q,V):q);V==="__parsed_extra"?(P[V]=P[V]||[],P[V].push(q)):P[V]=q}return f.header&&(I>z.length?C("FieldMismatch","TooManyFields","Too many fields: expected "+z.length+" fields but parsed "+I,T+m):I<z.length&&C("FieldMismatch","TooFewFields","Too few fields: expected "+z.length+" fields but parsed "+I,T+m)),P}var M;F&&(f.header||f.dynamicTyping||f.transform)&&(M=1,!F.data.length||Array.isArray(F.data[0])?(F.data=F.data.map(y),M=F.data.length):F.data=y(F.data,0),f.header&&F.meta&&(F.meta.fields=z),T+=M)}function j(){return f.header&&z.length===0}function C(_,y,M,w){_={type:_,code:y,message:M},w!==void 0&&(_.row=w),F.errors.push(_)}O(f.step)&&(D=f.step,f.step=function(_){F=_,j()?Q():(Q(),F.data.length!==0&&(U+=_.data.length,f.preview&&U>f.preview?x.abort():(F.data=F.data[0],D(F,k))))}),this.parse=function(_,y,M){var w=f.quoteChar||'"',w=(f.newline||(f.newline=this.guessLineEndings(_,w)),E=!1,f.delimiter?O(f.delimiter)&&(f.delimiter=f.delimiter(_),F.meta.delimiter=f.delimiter):((w=((m,P,I,V,q)=>{var nt,X,et,yt;q=q||[",","	","|",";",u.RECORD_SEP,u.UNIT_SEP];for(var vt=0;vt<q.length;vt++){for(var _t,pe=q[vt],at=0,xt=0,ot=0,ut=(et=void 0,new S({comments:V,delimiter:pe,newline:P,preview:10}).parse(m)),Dt=0;Dt<ut.data.length;Dt++)I&&B(ut.data[Dt])?ot++:(_t=ut.data[Dt].length,xt+=_t,et===void 0?et=_t:0<_t&&(at+=Math.abs(_t-et),et=_t));0<ut.data.length&&(xt/=ut.data.length-ot),(X===void 0||at<=X)&&(yt===void 0||yt<xt)&&1.99<xt&&(X=at,nt=pe,yt=xt)}return{successful:!!(f.delimiter=nt),bestDelimiter:nt}})(_,f.newline,f.skipEmptyLines,f.comments,f.delimitersToGuess)).successful?f.delimiter=w.bestDelimiter:(E=!0,f.delimiter=u.DefaultDelimiter),F.meta.delimiter=f.delimiter),K(f));return f.preview&&f.header&&w.preview++,h=_,x=new S(w),F=x.parse(h,y,M),Q(),Y?{meta:{paused:!0}}:F||{meta:{paused:!1}}},this.paused=function(){return Y},this.pause=function(){Y=!0,x.abort(),h=O(f.chunk)?"":h.substring(x.getCharIndex())},this.resume=function(){k.streamer._halted?(Y=!1,k.streamer.parseChunk(h,!0)):setTimeout(k.resume,3)},this.aborted=function(){return R},this.abort=function(){R=!0,x.abort(),F.meta.aborted=!0,O(f.complete)&&f.complete(F),h=""},this.guessLineEndings=function(m,w){m=m.substring(0,1048576);var w=new RegExp(G(w)+"([^]*?)"+G(w),"gm"),M=(m=m.replace(w,"")).split("\r"),w=m.split(`
`),m=1<w.length&&w[0].length<M[0].length;if(M.length===1||m)return`
`;for(var P=0,I=0;I<M.length;I++)M[I][0]===`
`&&P++;return P>=M.length/2?`\r
`:"\r"}}function G(f){return f.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function S(f){var h=(f=f||{}).delimiter,x=f.newline,E=f.comments,D=f.step,W=f.preview,p=f.fastMode,N=null,b=!1,k=f.quoteChar==null?'"':f.quoteChar,U=k;if(f.escapeChar!==void 0&&(U=f.escapeChar),(typeof h!="string"||-1<u.BAD_DELIMITERS.indexOf(h))&&(h=","),E===h)throw new Error("Comment character same as delimiter");E===!0?E="#":(typeof E!="string"||-1<u.BAD_DELIMITERS.indexOf(E))&&(E=!1),x!==`
`&&x!=="\r"&&x!==`\r
`&&(x=`
`);var T=0,Y=!1;this.parse=function(R,z,F){if(typeof R!="string")throw new Error("Input must be a string");var B=R.length,Q=h.length,j=x.length,C=E.length,_=O(D),y=[],M=[],w=[],m=T=0;if(!R)return at();if(p||p!==!1&&R.indexOf(k)===-1){for(var P=R.split(x),I=0;I<P.length;I++){if(w=P[I],T+=w.length,I!==P.length-1)T+=x.length;else if(F)return at();if(!E||w.substring(0,C)!==E){if(_){if(y=[],yt(w.split(h)),xt(),Y)return at()}else yt(w.split(h));if(W&&W<=I)return y=y.slice(0,W),at(!0)}}return at()}for(var V=R.indexOf(h,T),q=R.indexOf(x,T),nt=new RegExp(G(U)+G(k),"g"),X=R.indexOf(k,T);;)if(R[T]===k)for(X=T,T++;;){if((X=R.indexOf(k,X+1))===-1)return F||M.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:y.length,index:T}),_t();if(X===B-1)return _t(R.substring(T,X).replace(nt,k));if(k===U&&R[X+1]===U)X++;else if(k===U||X===0||R[X-1]!==U){V!==-1&&V<X+1&&(V=R.indexOf(h,X+1));var et=vt((q=q!==-1&&q<X+1?R.indexOf(x,X+1):q)===-1?V:Math.min(V,q));if(R.substr(X+1+et,Q)===h){w.push(R.substring(T,X).replace(nt,k)),R[T=X+1+et+Q]!==k&&(X=R.indexOf(k,T)),V=R.indexOf(h,T),q=R.indexOf(x,T);break}if(et=vt(q),R.substring(X+1+et,X+1+et+j)===x){if(w.push(R.substring(T,X).replace(nt,k)),pe(X+1+et+j),V=R.indexOf(h,T),X=R.indexOf(k,T),_&&(xt(),Y))return at();if(W&&y.length>=W)return at(!0);break}M.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:y.length,index:T}),X++}}else if(E&&w.length===0&&R.substring(T,T+C)===E){if(q===-1)return at();T=q+j,q=R.indexOf(x,T),V=R.indexOf(h,T)}else if(V!==-1&&(V<q||q===-1))w.push(R.substring(T,V)),T=V+Q,V=R.indexOf(h,T);else{if(q===-1)break;if(w.push(R.substring(T,q)),pe(q+j),_&&(xt(),Y))return at();if(W&&y.length>=W)return at(!0)}return _t();function yt(ot){y.push(ot),m=T}function vt(ot){var ut=0;return ut=ot!==-1&&(ot=R.substring(X+1,ot))&&ot.trim()===""?ot.length:ut}function _t(ot){return F||(ot===void 0&&(ot=R.substring(T)),w.push(ot),T=B,yt(w),_&&xt()),at()}function pe(ot){T=ot,yt(w),w=[],q=R.indexOf(x,T)}function at(ot){if(f.header&&!z&&y.length&&!b){var ut=y[0],Dt=Object.create(null),Tn=new Set(ut);let Qr=!1;for(let jt=0;jt<ut.length;jt++){let wt=ut[jt];if(Dt[wt=O(f.transformHeader)?f.transformHeader(wt,jt):wt]){let ge,jr=Dt[wt];for(;ge=wt+"_"+jr,jr++,Tn.has(ge););Tn.add(ge),ut[jt]=ge,Dt[wt]++,Qr=!0,(N=N===null?{}:N)[ge]=wt}else Dt[wt]=1,ut[jt]=wt;Tn.add(wt)}Qr&&console.warn("Duplicate headers found and renamed."),b=!0}return{data:y,errors:M,meta:{delimiter:h,linebreak:x,aborted:Y,truncated:!!ot,cursor:m+(z||0),renamedHeaders:N}}}function xt(){D(at()),y=[],M=[]}},this.abort=function(){Y=!0},this.getCharIndex=function(){return T}}function tt(f){var h=f.data,x=s[h.workerId],E=!1;if(h.error)x.userError(h.error,h.file);else if(h.results&&h.results.data){var D={abort:function(){E=!0,Z(h.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:H,resume:H};if(O(x.userStep)){for(var W=0;W<h.results.data.length&&(x.userStep({data:h.results.data[W],errors:h.results.errors,meta:h.results.meta},D),!E);W++);delete h.results}else O(x.userChunk)&&(x.userChunk(h.results,D,h.file),delete h.results)}h.finished&&!E&&Z(h.workerId,h.results)}function Z(f,h){var x=s[f];O(x.userComplete)&&x.userComplete(h),x.terminate(),delete s[f]}function H(){throw new Error("Not implemented.")}function K(f){if(typeof f!="object"||f===null)return f;var h,x=Array.isArray(f)?[]:{};for(h in f)x[h]=K(f[h]);return x}function A(f,h){return function(){f.apply(h,arguments)}}function O(f){return typeof f=="function"}return u.parse=function(f,h){var x=(h=h||{}).dynamicTyping||!1;if(O(x)&&(h.dynamicTypingFunction=x,x={}),h.dynamicTyping=x,h.transform=!!O(h.transform)&&h.transform,!h.worker||!u.WORKERS_SUPPORTED)return x=null,u.NODE_STREAM_INPUT,typeof f=="string"?(f=(E=>E.charCodeAt(0)!==65279?E:E.slice(1))(f),x=new(h.download?g:v)(h)):f.readable===!0&&O(f.read)&&O(f.on)?x=new L(h):(r.File&&f instanceof File||f instanceof Object)&&(x=new d(h)),x.stream(f);(x=(()=>{var E;return!!u.WORKERS_SUPPORTED&&(E=(()=>{var D=r.URL||r.webkitURL||null,W=n.toString();return u.BLOB_URL||(u.BLOB_URL=D.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",W,")();"],{type:"text/javascript"})))})(),(E=new r.Worker(E)).onmessage=tt,E.id=l++,s[E.id]=E)})()).userStep=h.step,x.userChunk=h.chunk,x.userComplete=h.complete,x.userError=h.error,h.step=O(h.step),h.chunk=O(h.chunk),h.complete=O(h.complete),h.error=O(h.error),delete h.worker,x.postMessage({input:f,config:h,workerId:x.id})},u.unparse=function(f,h){var x=!1,E=!0,D=",",W=`\r
`,p='"',N=p+p,b=!1,k=null,U=!1,T=((()=>{if(typeof h=="object"){if(typeof h.delimiter!="string"||u.BAD_DELIMITERS.filter(function(z){return h.delimiter.indexOf(z)!==-1}).length||(D=h.delimiter),typeof h.quotes!="boolean"&&typeof h.quotes!="function"&&!Array.isArray(h.quotes)||(x=h.quotes),typeof h.skipEmptyLines!="boolean"&&typeof h.skipEmptyLines!="string"||(b=h.skipEmptyLines),typeof h.newline=="string"&&(W=h.newline),typeof h.quoteChar=="string"&&(p=h.quoteChar),typeof h.header=="boolean"&&(E=h.header),Array.isArray(h.columns)){if(h.columns.length===0)throw new Error("Option columns is empty");k=h.columns}h.escapeChar!==void 0&&(N=h.escapeChar+p),h.escapeFormulae instanceof RegExp?U=h.escapeFormulae:typeof h.escapeFormulae=="boolean"&&h.escapeFormulae&&(U=/^[=+\-@\t\r].*$/)}})(),new RegExp(G(p),"g"));if(typeof f=="string"&&(f=JSON.parse(f)),Array.isArray(f)){if(!f.length||Array.isArray(f[0]))return Y(null,f,b);if(typeof f[0]=="object")return Y(k||Object.keys(f[0]),f,b)}else if(typeof f=="object")return typeof f.data=="string"&&(f.data=JSON.parse(f.data)),Array.isArray(f.data)&&(f.fields||(f.fields=f.meta&&f.meta.fields||k),f.fields||(f.fields=Array.isArray(f.data[0])?f.fields:typeof f.data[0]=="object"?Object.keys(f.data[0]):[]),Array.isArray(f.data[0])||typeof f.data[0]=="object"||(f.data=[f.data])),Y(f.fields||[],f.data||[],b);throw new Error("Unable to serialize unrecognized input");function Y(z,F,B){var Q="",j=(typeof z=="string"&&(z=JSON.parse(z)),typeof F=="string"&&(F=JSON.parse(F)),Array.isArray(z)&&0<z.length),C=!Array.isArray(F[0]);if(j&&E){for(var _=0;_<z.length;_++)0<_&&(Q+=D),Q+=R(z[_],_);0<F.length&&(Q+=W)}for(var y=0;y<F.length;y++){var M=(j?z:F[y]).length,w=!1,m=j?Object.keys(F[y]).length===0:F[y].length===0;if(B&&!j&&(w=B==="greedy"?F[y].join("").trim()==="":F[y].length===1&&F[y][0].length===0),B==="greedy"&&j){for(var P=[],I=0;I<M;I++){var V=C?z[I]:I;P.push(F[y][V])}w=P.join("").trim()===""}if(!w){for(var q=0;q<M;q++){0<q&&!m&&(Q+=D);var nt=j&&C?z[q]:q;Q+=R(F[y][nt],q)}y<F.length-1&&(!B||0<M&&!m)&&(Q+=W)}}return Q}function R(z,F){var B,Q;return z==null?"":z.constructor===Date?JSON.stringify(z).slice(1,25):(Q=!1,U&&typeof z=="string"&&U.test(z)&&(z="'"+z,Q=!0),B=z.toString().replace(T,N),(Q=Q||x===!0||typeof x=="function"&&x(z,F)||Array.isArray(x)&&x[F]||((j,C)=>{for(var _=0;_<C.length;_++)if(-1<j.indexOf(C[_]))return!0;return!1})(B,u.BAD_DELIMITERS)||-1<B.indexOf(D)||B.charAt(0)===" "||B.charAt(B.length-1)===" ")?p+B+p:B)}},u.RECORD_SEP="",u.UNIT_SEP="",u.BYTE_ORDER_MARK="\uFEFF",u.BAD_DELIMITERS=["\r",`
`,'"',u.BYTE_ORDER_MARK],u.WORKERS_SUPPORTED=!o&&!!r.Worker,u.NODE_STREAM_INPUT=1,u.LocalChunkSize=10485760,u.RemoteChunkSize=5242880,u.DefaultDelimiter=",",u.Parser=S,u.ParserHandle=$,u.NetworkStreamer=g,u.FileStreamer=d,u.StringStreamer=v,u.ReadableStreamStreamer=L,r.jQuery&&((i=r.jQuery).fn.parse=function(f){var h=f.config||{},x=[];return this.each(function(W){if(!(i(this).prop("tagName").toUpperCase()==="INPUT"&&i(this).attr("type").toLowerCase()==="file"&&r.FileReader)||!this.files||this.files.length===0)return!0;for(var p=0;p<this.files.length;p++)x.push({file:this.files[p],inputElem:this,instanceConfig:i.extend({},h)})}),E(),this;function E(){if(x.length===0)O(f.complete)&&f.complete();else{var W,p,N,b,k=x[0];if(O(f.before)){var U=f.before(k.file,k.inputElem);if(typeof U=="object"){if(U.action==="abort")return W="AbortError",p=k.file,N=k.inputElem,b=U.reason,void(O(f.error)&&f.error({name:W},p,N,b));if(U.action==="skip")return void D();typeof U.config=="object"&&(k.instanceConfig=i.extend(k.instanceConfig,U.config))}else if(U==="skip")return void D()}var T=k.instanceConfig.complete;k.instanceConfig.complete=function(Y){O(T)&&T(Y,k.file,k.inputElem),D()},u.parse(k.file,k.instanceConfig)}}function D(){x.splice(0,1),E()}}),a&&(r.onmessage=function(f){f=f.data,u.WORKER_ID===void 0&&f&&(u.WORKER_ID=f.workerId),typeof f.input=="string"?r.postMessage({workerId:u.WORKER_ID,results:u.parse(f.input,f.config),finished:!0}):(r.File&&f.input instanceof File||f.input instanceof Object)&&(f=u.parse(f.input,f.config))&&r.postMessage({workerId:u.WORKER_ID,results:f,finished:!0})}),(g.prototype=Object.create(c.prototype)).constructor=g,(d.prototype=Object.create(c.prototype)).constructor=d,(v.prototype=Object.create(v.prototype)).constructor=v,(L.prototype=Object.create(c.prototype)).constructor=L,u})}(me)),me.exports}var ei=ti();const ni=Jt(ei);function Pt(t){const e=Number(t);return Number.isFinite(e)?e:void 0}class ri{static parse(e){return ni.parse(e,{header:!0,skipEmptyLines:!0}).data.map(r=>{let i;const o=(r.labelKind??"").trim().toLowerCase();if(o==="text"?i={kind:"text",text:r.labelText}:o==="image"?i={kind:"image",src:r.labelSrc||"",width:Pt(r.labelWidth),height:Pt(r.labelHeight),fit:r.labelFit||void 0,zoom:Pt(r.labelZoom)}:o==="video"&&(i={kind:"video",src:r.labelSrc||"",width:Pt(r.labelWidth),height:Pt(r.labelHeight),fit:r.labelFit||void 0,zoom:Pt(r.labelZoom)}),!i&&r.backgroundType){const s=r.backgroundType.trim().toLowerCase();s==="image"&&r.backgroundSource?i={kind:"image",src:r.backgroundSource}:s==="video"&&r.backgroundSource?i={kind:"video",src:r.backgroundSource}:s==="text"&&(i={kind:"text",text:r.description||r.title})}let a;if(r.metadata)try{a=JSON.parse(r.metadata)}catch{}return{title:r.title,start:new Date(r.start),end:r.end?new Date(r.end):void 0,description:r.description,overlayColor:r.overlayColor??r.overlayColor??void 0,label:i,metadata:a}})}}class ii{static parse(e){return(typeof e=="string"?JSON.parse(e):e).items.map(r=>{let i=r.label;if(!i&&r.background){const o=(r.background.type??"").toLowerCase();o==="image"&&r.background.source?i={kind:"image",src:r.background.source}:o==="video"&&r.background.source?i={kind:"video",src:r.background.source}:o==="text"&&(i={kind:"text",text:r.description??r.title})}return{title:r.title,start:new Date(r.start),end:r.end?new Date(r.end):void 0,description:r.description,overlayColor:r.overlayColor??r.background?.overlayColor,label:i,metadata:r.metadata}})}}class oi{static parse(e){const r=new DOMParser().parseFromString(e,"application/xml"),i=[];return r.querySelectorAll("item").forEach(o=>{const a=c=>o.querySelector(c)?.textContent?.trim()||"",s=o.querySelector("label");let l;if(s){const c=(s.getAttribute("kind")||"").toLowerCase();c==="text"?l={kind:"text",text:s.textContent?.trim()||void 0}:c==="image"?l={kind:"image",src:s.getAttribute("src")||"",width:s.getAttribute("width")?Number(s.getAttribute("width")):void 0,height:s.getAttribute("height")?Number(s.getAttribute("height")):void 0,fit:s.getAttribute("fit")||void 0,zoom:s.getAttribute("zoom")?Number(s.getAttribute("zoom")):void 0}:c==="video"&&(l={kind:"video",src:s.getAttribute("src")||"",width:s.getAttribute("width")?Number(s.getAttribute("width")):void 0,height:s.getAttribute("height")?Number(s.getAttribute("height")):void 0,fit:s.getAttribute("fit")||void 0,zoom:s.getAttribute("zoom")?Number(s.getAttribute("zoom")):void 0})}const u=a("overlayColor")||s?.getAttribute("overlayColor")||void 0;i.push({title:a("title"),start:new Date(a("start")),end:o.querySelector("end")?new Date(a("end")):void 0,description:a("description"),overlayColor:u,label:l})}),i}}class ai{static parse(e){const r=new DOMParser().parseFromString(e,"application/xml"),i=[];return r.querySelectorAll("listEvent event").forEach(o=>{const a=g=>o.querySelector(g)?.textContent?.trim()||"",s=o.getAttribute("when")||o.querySelector("date")?.getAttribute("when")||"",l=s?new Date(s):new Date(a("date"));let u;const c=o.querySelector("label");if(c){const g=(c.getAttribute("kind")||"").toLowerCase();g==="text"?u={kind:"text",text:c.textContent?.trim()||void 0}:g==="image"?u={kind:"image",src:c.getAttribute("src")||""}:g==="video"&&(u={kind:"video",src:c.getAttribute("src")||""})}else{const g=a("title")||a("desc");g&&(u={kind:"text",text:g})}i.push({title:a("title")||a("desc"),start:l,description:a("desc"),label:u,metadata:{when:s||void 0,type:o.getAttribute("type")||void 0}})}),i}}const He=new Map;class Nt{static register(e){He.set(e.name.toLowerCase(),e)}static supportedFormats(){return Array.from(new Set(["csv","json","xml","tei",...He.keys()]))}static parse(e,n){const r=He.get(String(n).toLowerCase());if(r)return r.parse(e);switch(n){case"csv":return ri.parse(e);case"json":return ii.parse(e);case"xml":return oi.parse(e);case"tei":return ai.parse(e);default:throw new Error(`Unsupported data type: ${n}`)}}}function ye(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function si(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function Ye(t){let e,n,r;t.length!==2?(e=ye,n=(s,l)=>ye(t(s),l),r=(s,l)=>t(s)-l):(e=t===ye||t===si?t:ui,n=t,r=t);function i(s,l,u=0,c=s.length){if(u<c){if(e(l,l)!==0)return c;do{const g=u+c>>>1;n(s[g],l)<0?u=g+1:c=g}while(u<c)}return u}function o(s,l,u=0,c=s.length){if(u<c){if(e(l,l)!==0)return c;do{const g=u+c>>>1;n(s[g],l)<=0?u=g+1:c=g}while(u<c)}return u}function a(s,l,u=0,c=s.length){const g=i(s,l,u,c-1);return g>u&&r(s[g-1],l)>-r(s[g],l)?g-1:g}return{left:i,center:a,right:o}}function ui(){return 0}function li(t){return t===null?NaN:+t}const ci=Ye(ye).right;Ye(li).center;function Sn(t,e){let n,r;for(const i of t)i!=null&&(n===void 0?i>=i&&(n=r=i):(n>i&&(n=i),r<i&&(r=i)));return[n,r]}class An extends Map{constructor(e,n=di){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),e!=null)for(const[r,i]of e)this.set(r,i)}get(e){return super.get(En(this,e))}has(e){return super.has(En(this,e))}set(e,n){return super.set(fi(this,e),n)}delete(e){return super.delete(hi(this,e))}}function En({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):n}function fi({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):(t.set(r,n),n)}function hi({_intern:t,_key:e},n){const r=e(n);return t.has(r)&&(n=t.get(r),t.delete(r)),n}function di(t){return t!==null&&typeof t=="object"?t.valueOf():t}const pi=Math.sqrt(50),gi=Math.sqrt(10),mi=Math.sqrt(2);function Dn(t,e,n){const r=(e-t)/Math.max(0,n),i=Math.floor(Math.log10(r)),o=r/Math.pow(10,i),a=o>=pi?10:o>=gi?5:o>=mi?2:1;let s,l,u;return i<0?(u=Math.pow(10,-i)/a,s=Math.round(t*u),l=Math.round(e*u),s/u<t&&++s,l/u>e&&--l,u=-u):(u=Math.pow(10,i)*a,s=Math.round(t/u),l=Math.round(e/u),s*u<t&&++s,l*u>e&&--l),l<s&&.5<=n&&n<2?Dn(t,e,n*2):[s,l,u]}function Nn(t,e,n){return e=+e,t=+t,n=+n,Dn(t,e,n)[2]}function Rn(t,e,n){e=+e,t=+t,n=+n;const r=e<t,i=r?Nn(e,t,n):Nn(t,e,n);return(r?-1:1)*(i<0?1/-i:i)}function yi(t,e,n){t=+t,e=+e,n=(i=arguments.length)<2?(e=t,t=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((e-t)/n))|0,o=new Array(i);++r<i;)o[r]=t+r*n;return o}function vi(t){return t}var Pe=1,We=2,qe=3,te=4,Fn=1e-6;function _i(t){return"translate("+t+",0)"}function xi(t){return"translate(0,"+t+")"}function wi(t){return e=>+t(e)}function bi(t,e){return e=Math.max(0,t.bandwidth()-e*2)/2,t.round()&&(e=Math.round(e)),n=>+t(n)+e}function ki(){return!this.__axis}function Un(t,e){var n=[],r=null,i=null,o=6,a=6,s=3,l=typeof window<"u"&&window.devicePixelRatio>1?0:.5,u=t===Pe||t===te?-1:1,c=t===te||t===We?"x":"y",g=t===Pe||t===qe?_i:xi;function d(v){var L=r??(e.ticks?e.ticks.apply(e,n):e.domain()),$=i??(e.tickFormat?e.tickFormat.apply(e,n):vi),G=Math.max(o,0)+s,S=e.range(),tt=+S[0]+l,Z=+S[S.length-1]+l,H=(e.bandwidth?bi:wi)(e.copy(),l),K=v.selection?v.selection():v,A=K.selectAll(".domain").data([null]),O=K.selectAll(".tick").data(L,e).order(),f=O.exit(),h=O.enter().append("g").attr("class","tick"),x=O.select("line"),E=O.select("text");A=A.merge(A.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),O=O.merge(h),x=x.merge(h.append("line").attr("stroke","currentColor").attr(c+"2",u*o)),E=E.merge(h.append("text").attr("fill","currentColor").attr(c,u*G).attr("dy",t===Pe?"0em":t===qe?"0.71em":"0.32em")),v!==K&&(A=A.transition(v),O=O.transition(v),x=x.transition(v),E=E.transition(v),f=f.transition(v).attr("opacity",Fn).attr("transform",function(D){return isFinite(D=H(D))?g(D+l):this.getAttribute("transform")}),h.attr("opacity",Fn).attr("transform",function(D){var W=this.parentNode.__axis;return g((W&&isFinite(W=W(D))?W:H(D))+l)})),f.remove(),A.attr("d",t===te||t===We?a?"M"+u*a+","+tt+"H"+l+"V"+Z+"H"+u*a:"M"+l+","+tt+"V"+Z:a?"M"+tt+","+u*a+"V"+l+"H"+Z+"V"+u*a:"M"+tt+","+l+"H"+Z),O.attr("opacity",1).attr("transform",function(D){return g(H(D)+l)}),x.attr(c+"2",u*o),E.attr(c,u*G).text($),K.filter(ki).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",t===We?"start":t===te?"end":"middle"),K.each(function(){this.__axis=H})}return d.scale=function(v){return arguments.length?(e=v,d):e},d.ticks=function(){return n=Array.from(arguments),d},d.tickArguments=function(v){return arguments.length?(n=v==null?[]:Array.from(v),d):n.slice()},d.tickValues=function(v){return arguments.length?(r=v==null?null:Array.from(v),d):r&&r.slice()},d.tickFormat=function(v){return arguments.length?(i=v,d):i},d.tickSize=function(v){return arguments.length?(o=a=+v,d):o},d.tickSizeInner=function(v){return arguments.length?(o=+v,d):o},d.tickSizeOuter=function(v){return arguments.length?(a=+v,d):a},d.tickPadding=function(v){return arguments.length?(s=+v,d):s},d.offset=function(v){return arguments.length?(l=+v,d):l},d}function On(t){return Un(qe,t)}function zn(t){return Un(te,t)}var Mi={value:()=>{}};function Xe(){for(var t=0,e=arguments.length,n={},r;t<e;++t){if(!(r=arguments[t]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new ve(n)}function ve(t){this._=t}function Ti(t,e){return t.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!e.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}ve.prototype=Xe.prototype={constructor:ve,on:function(t,e){var n=this._,r=Ti(t+"",n),i,o=-1,a=r.length;if(arguments.length<2){for(;++o<a;)if((i=(t=r[o]).type)&&(i=Ci(n[i],t.name)))return i;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++o<a;)if(i=(t=r[o]).type)n[i]=In(n[i],t.name,e);else if(e==null)for(i in n)n[i]=In(n[i],t.name,null);return this},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new ve(t)},call:function(t,e){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,o;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(o=this._[t],r=0,i=o.length;r<i;++r)o[r].value.apply(e,n)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,o=r.length;i<o;++i)r[i].value.apply(e,n)}};function Ci(t,e){for(var n=0,r=t.length,i;n<r;++n)if((i=t[n]).name===e)return i.value}function In(t,e,n){for(var r=0,i=t.length;r<i;++r)if(t[r].name===e){t[r]=Mi,t=t.slice(0,r).concat(t.slice(r+1));break}return n!=null&&t.push({name:e,value:n}),t}var Ve="http://www.w3.org/1999/xhtml";const $n={svg:"http://www.w3.org/2000/svg",xhtml:Ve,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function _e(t){var e=t+="",n=e.indexOf(":");return n>=0&&(e=t.slice(0,n))!=="xmlns"&&(t=t.slice(n+1)),$n.hasOwnProperty(e)?{space:$n[e],local:t}:t}function Si(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===Ve&&e.documentElement.namespaceURI===Ve?e.createElement(t):e.createElementNS(n,t)}}function Ai(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function Ln(t){var e=_e(t);return(e.local?Ai:Si)(e)}function Ei(){}function Be(t){return t==null?Ei:function(){return this.querySelector(t)}}function Di(t){typeof t!="function"&&(t=Be(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var o=e[i],a=o.length,s=r[i]=new Array(a),l,u,c=0;c<a;++c)(l=o[c])&&(u=t.call(l,l.__data__,c,o))&&("__data__"in l&&(u.__data__=l.__data__),s[c]=u);return new lt(r,this._parents)}function Ni(t){return t==null?[]:Array.isArray(t)?t:Array.from(t)}function Ri(){return[]}function Hn(t){return t==null?Ri:function(){return this.querySelectorAll(t)}}function Fi(t){return function(){return Ni(t.apply(this,arguments))}}function Ui(t){typeof t=="function"?t=Fi(t):t=Hn(t);for(var e=this._groups,n=e.length,r=[],i=[],o=0;o<n;++o)for(var a=e[o],s=a.length,l,u=0;u<s;++u)(l=a[u])&&(r.push(t.call(l,l.__data__,u,a)),i.push(l));return new lt(r,i)}function Yn(t){return function(){return this.matches(t)}}function Pn(t){return function(e){return e.matches(t)}}var Oi=Array.prototype.find;function zi(t){return function(){return Oi.call(this.children,t)}}function Ii(){return this.firstElementChild}function $i(t){return this.select(t==null?Ii:zi(typeof t=="function"?t:Pn(t)))}var Li=Array.prototype.filter;function Hi(){return Array.from(this.children)}function Yi(t){return function(){return Li.call(this.children,t)}}function Pi(t){return this.selectAll(t==null?Hi:Yi(typeof t=="function"?t:Pn(t)))}function Wi(t){typeof t!="function"&&(t=Yn(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var o=e[i],a=o.length,s=r[i]=[],l,u=0;u<a;++u)(l=o[u])&&t.call(l,l.__data__,u,o)&&s.push(l);return new lt(r,this._parents)}function Wn(t){return new Array(t.length)}function qi(){return new lt(this._enter||this._groups.map(Wn),this._parents)}function xe(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}xe.prototype={constructor:xe,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function Xi(t){return function(){return t}}function Vi(t,e,n,r,i,o){for(var a=0,s,l=e.length,u=o.length;a<u;++a)(s=e[a])?(s.__data__=o[a],r[a]=s):n[a]=new xe(t,o[a]);for(;a<l;++a)(s=e[a])&&(i[a]=s)}function Bi(t,e,n,r,i,o,a){var s,l,u=new Map,c=e.length,g=o.length,d=new Array(c),v;for(s=0;s<c;++s)(l=e[s])&&(d[s]=v=a.call(l,l.__data__,s,e)+"",u.has(v)?i[s]=l:u.set(v,l));for(s=0;s<g;++s)v=a.call(t,o[s],s,o)+"",(l=u.get(v))?(r[s]=l,l.__data__=o[s],u.delete(v)):n[s]=new xe(t,o[s]);for(s=0;s<c;++s)(l=e[s])&&u.get(d[s])===l&&(i[s]=l)}function Gi(t){return t.__data__}function Zi(t,e){if(!arguments.length)return Array.from(this,Gi);var n=e?Bi:Vi,r=this._parents,i=this._groups;typeof t!="function"&&(t=Xi(t));for(var o=i.length,a=new Array(o),s=new Array(o),l=new Array(o),u=0;u<o;++u){var c=r[u],g=i[u],d=g.length,v=Ki(t.call(c,c&&c.__data__,u,r)),L=v.length,$=s[u]=new Array(L),G=a[u]=new Array(L),S=l[u]=new Array(d);n(c,g,$,G,S,v,e);for(var tt=0,Z=0,H,K;tt<L;++tt)if(H=$[tt]){for(tt>=Z&&(Z=tt+1);!(K=G[Z])&&++Z<L;);H._next=K||null}}return a=new lt(a,r),a._enter=s,a._exit=l,a}function Ki(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function Qi(){return new lt(this._exit||this._groups.map(Wn),this._parents)}function ji(t,e,n){var r=this.enter(),i=this,o=this.exit();return typeof t=="function"?(r=t(r),r&&(r=r.selection())):r=r.append(t+""),e!=null&&(i=e(i),i&&(i=i.selection())),n==null?o.remove():n(o),r&&i?r.merge(i).order():i}function Ji(t){for(var e=t.selection?t.selection():t,n=this._groups,r=e._groups,i=n.length,o=r.length,a=Math.min(i,o),s=new Array(i),l=0;l<a;++l)for(var u=n[l],c=r[l],g=u.length,d=s[l]=new Array(g),v,L=0;L<g;++L)(v=u[L]||c[L])&&(d[L]=v);for(;l<i;++l)s[l]=n[l];return new lt(s,this._parents)}function to(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var r=t[e],i=r.length-1,o=r[i],a;--i>=0;)(a=r[i])&&(o&&a.compareDocumentPosition(o)^4&&o.parentNode.insertBefore(a,o),o=a);return this}function eo(t){t||(t=no);function e(g,d){return g&&d?t(g.__data__,d.__data__):!g-!d}for(var n=this._groups,r=n.length,i=new Array(r),o=0;o<r;++o){for(var a=n[o],s=a.length,l=i[o]=new Array(s),u,c=0;c<s;++c)(u=a[c])&&(l[c]=u);l.sort(e)}return new lt(i,this._parents).order()}function no(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function ro(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function io(){return Array.from(this)}function oo(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,o=r.length;i<o;++i){var a=r[i];if(a)return a}return null}function ao(){let t=0;for(const e of this)++t;return t}function so(){return!this.node()}function uo(t){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var i=e[n],o=0,a=i.length,s;o<a;++o)(s=i[o])&&t.call(s,s.__data__,o,i);return this}function lo(t){return function(){this.removeAttribute(t)}}function co(t){return function(){this.removeAttributeNS(t.space,t.local)}}function fo(t,e){return function(){this.setAttribute(t,e)}}function ho(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function po(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttribute(t):this.setAttribute(t,n)}}function go(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function mo(t,e){var n=_e(t);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((e==null?n.local?co:lo:typeof e=="function"?n.local?go:po:n.local?ho:fo)(n,e))}function qn(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function yo(t){return function(){this.style.removeProperty(t)}}function vo(t,e,n){return function(){this.style.setProperty(t,e,n)}}function _o(t,e,n){return function(){var r=e.apply(this,arguments);r==null?this.style.removeProperty(t):this.style.setProperty(t,r,n)}}function xo(t,e,n){return arguments.length>1?this.each((e==null?yo:typeof e=="function"?_o:vo)(t,e,n??"")):Wt(this.node(),t)}function Wt(t,e){return t.style.getPropertyValue(e)||qn(t).getComputedStyle(t,null).getPropertyValue(e)}function wo(t){return function(){delete this[t]}}function bo(t,e){return function(){this[t]=e}}function ko(t,e){return function(){var n=e.apply(this,arguments);n==null?delete this[t]:this[t]=n}}function Mo(t,e){return arguments.length>1?this.each((e==null?wo:typeof e=="function"?ko:bo)(t,e)):this.node()[t]}function Xn(t){return t.trim().split(/^|\s+/)}function Ge(t){return t.classList||new Vn(t)}function Vn(t){this._node=t,this._names=Xn(t.getAttribute("class")||"")}Vn.prototype={add:function(t){var e=this._names.indexOf(t);e<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function Bn(t,e){for(var n=Ge(t),r=-1,i=e.length;++r<i;)n.add(e[r])}function Gn(t,e){for(var n=Ge(t),r=-1,i=e.length;++r<i;)n.remove(e[r])}function To(t){return function(){Bn(this,t)}}function Co(t){return function(){Gn(this,t)}}function So(t,e){return function(){(e.apply(this,arguments)?Bn:Gn)(this,t)}}function Ao(t,e){var n=Xn(t+"");if(arguments.length<2){for(var r=Ge(this.node()),i=-1,o=n.length;++i<o;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof e=="function"?So:e?To:Co)(n,e))}function Eo(){this.textContent=""}function Do(t){return function(){this.textContent=t}}function No(t){return function(){var e=t.apply(this,arguments);this.textContent=e??""}}function Ro(t){return arguments.length?this.each(t==null?Eo:(typeof t=="function"?No:Do)(t)):this.node().textContent}function Fo(){this.innerHTML=""}function Uo(t){return function(){this.innerHTML=t}}function Oo(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e??""}}function zo(t){return arguments.length?this.each(t==null?Fo:(typeof t=="function"?Oo:Uo)(t)):this.node().innerHTML}function Io(){this.nextSibling&&this.parentNode.appendChild(this)}function $o(){return this.each(Io)}function Lo(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Ho(){return this.each(Lo)}function Yo(t){var e=typeof t=="function"?t:Ln(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function Po(){return null}function Wo(t,e){var n=typeof t=="function"?t:Ln(t),r=e==null?Po:typeof e=="function"?e:Be(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function qo(){var t=this.parentNode;t&&t.removeChild(this)}function Xo(){return this.each(qo)}function Vo(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function Bo(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function Go(t){return this.select(t?Bo:Vo)}function Zo(t){return arguments.length?this.property("__data__",t):this.node().__data__}function Ko(t){return function(e){t.call(this,e,this.__data__)}}function Qo(t){return t.trim().split(/^|\s+/).map(function(e){var n="",r=e.indexOf(".");return r>=0&&(n=e.slice(r+1),e=e.slice(0,r)),{type:e,name:n}})}function jo(t){return function(){var e=this.__on;if(e){for(var n=0,r=-1,i=e.length,o;n<i;++n)o=e[n],(!t.type||o.type===t.type)&&o.name===t.name?this.removeEventListener(o.type,o.listener,o.options):e[++r]=o;++r?e.length=r:delete this.__on}}}function Jo(t,e,n){return function(){var r=this.__on,i,o=Ko(e);if(r){for(var a=0,s=r.length;a<s;++a)if((i=r[a]).type===t.type&&i.name===t.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=o,i.options=n),i.value=e;return}}this.addEventListener(t.type,o,n),i={type:t.type,name:t.name,value:e,listener:o,options:n},r?r.push(i):this.__on=[i]}}function ta(t,e,n){var r=Qo(t+""),i,o=r.length,a;if(arguments.length<2){var s=this.node().__on;if(s){for(var l=0,u=s.length,c;l<u;++l)for(i=0,c=s[l];i<o;++i)if((a=r[i]).type===c.type&&a.name===c.name)return c.value}return}for(s=e?Jo:jo,i=0;i<o;++i)this.each(s(r[i],e,n));return this}function Zn(t,e,n){var r=qn(t),i=r.CustomEvent;typeof i=="function"?i=new i(e,n):(i=r.document.createEvent("Event"),n?(i.initEvent(e,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(e,!1,!1)),t.dispatchEvent(i)}function ea(t,e){return function(){return Zn(this,t,e)}}function na(t,e){return function(){return Zn(this,t,e.apply(this,arguments))}}function ra(t,e){return this.each((typeof e=="function"?na:ea)(t,e))}function*ia(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,o=r.length,a;i<o;++i)(a=r[i])&&(yield a)}var Kn=[null];function lt(t,e){this._groups=t,this._parents=e}function ee(){return new lt([[document.documentElement]],Kn)}function oa(){return this}lt.prototype=ee.prototype={constructor:lt,select:Di,selectAll:Ui,selectChild:$i,selectChildren:Pi,filter:Wi,data:Zi,enter:qi,exit:Qi,join:ji,merge:Ji,selection:oa,order:to,sort:eo,call:ro,nodes:io,node:oo,size:ao,empty:so,each:uo,attr:mo,style:xo,property:Mo,classed:Ao,text:Ro,html:zo,raise:$o,lower:Ho,append:Yo,insert:Wo,remove:Xo,clone:Go,datum:Zo,on:ta,dispatch:ra,[Symbol.iterator]:ia};function ct(t){return typeof t=="string"?new lt([[document.querySelector(t)]],[document.documentElement]):new lt([[t]],Kn)}function aa(t){let e;for(;e=t.sourceEvent;)t=e;return t}function Rt(t,e){if(t=aa(t),e===void 0&&(e=t.currentTarget),e){var n=e.ownerSVGElement||e;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=t.clientX,r.y=t.clientY,r=r.matrixTransform(e.getScreenCTM().inverse()),[r.x,r.y]}if(e.getBoundingClientRect){var i=e.getBoundingClientRect();return[t.clientX-i.left-e.clientLeft,t.clientY-i.top-e.clientTop]}}return[t.pageX,t.pageY]}const Ze={capture:!0,passive:!1};function Ke(t){t.preventDefault(),t.stopImmediatePropagation()}function sa(t){var e=t.document.documentElement,n=ct(t).on("dragstart.drag",Ke,Ze);"onselectstart"in e?n.on("selectstart.drag",Ke,Ze):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}function ua(t,e){var n=t.document.documentElement,r=ct(t).on("dragstart.drag",null);e&&(r.on("click.drag",Ke,Ze),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}function Qe(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function Qn(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function ne(){}var re=.7,we=1/re,qt="\\s*([+-]?\\d+)\\s*",ie="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",gt="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",la=/^#([0-9a-f]{3,8})$/,ca=new RegExp(`^rgb\\(${qt},${qt},${qt}\\)$`),fa=new RegExp(`^rgb\\(${gt},${gt},${gt}\\)$`),ha=new RegExp(`^rgba\\(${qt},${qt},${qt},${ie}\\)$`),da=new RegExp(`^rgba\\(${gt},${gt},${gt},${ie}\\)$`),pa=new RegExp(`^hsl\\(${ie},${gt},${gt}\\)$`),ga=new RegExp(`^hsla\\(${ie},${gt},${gt},${ie}\\)$`),jn={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Qe(ne,Ft,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:Jn,formatHex:Jn,formatHex8:ma,formatHsl:ya,formatRgb:tr,toString:tr});function Jn(){return this.rgb().formatHex()}function ma(){return this.rgb().formatHex8()}function ya(){return or(this).formatHsl()}function tr(){return this.rgb().formatRgb()}function Ft(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=la.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?er(e):n===3?new st(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?be(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?be(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=ca.exec(t))?new st(e[1],e[2],e[3],1):(e=fa.exec(t))?new st(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=ha.exec(t))?be(e[1],e[2],e[3],e[4]):(e=da.exec(t))?be(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=pa.exec(t))?ir(e[1],e[2]/100,e[3]/100,1):(e=ga.exec(t))?ir(e[1],e[2]/100,e[3]/100,e[4]):jn.hasOwnProperty(t)?er(jn[t]):t==="transparent"?new st(NaN,NaN,NaN,0):null}function er(t){return new st(t>>16&255,t>>8&255,t&255,1)}function be(t,e,n,r){return r<=0&&(t=e=n=NaN),new st(t,e,n,r)}function va(t){return t instanceof ne||(t=Ft(t)),t?(t=t.rgb(),new st(t.r,t.g,t.b,t.opacity)):new st}function je(t,e,n,r){return arguments.length===1?va(t):new st(t,e,n,r??1)}function st(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}Qe(st,je,Qn(ne,{brighter(t){return t=t==null?we:Math.pow(we,t),new st(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?re:Math.pow(re,t),new st(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new st(Ut(this.r),Ut(this.g),Ut(this.b),ke(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:nr,formatHex:nr,formatHex8:_a,formatRgb:rr,toString:rr}));function nr(){return`#${Ot(this.r)}${Ot(this.g)}${Ot(this.b)}`}function _a(){return`#${Ot(this.r)}${Ot(this.g)}${Ot(this.b)}${Ot((isNaN(this.opacity)?1:this.opacity)*255)}`}function rr(){const t=ke(this.opacity);return`${t===1?"rgb(":"rgba("}${Ut(this.r)}, ${Ut(this.g)}, ${Ut(this.b)}${t===1?")":`, ${t})`}`}function ke(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function Ut(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function Ot(t){return t=Ut(t),(t<16?"0":"")+t.toString(16)}function ir(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new ht(t,e,n,r)}function or(t){if(t instanceof ht)return new ht(t.h,t.s,t.l,t.opacity);if(t instanceof ne||(t=Ft(t)),!t)return new ht;if(t instanceof ht)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),o=Math.max(e,n,r),a=NaN,s=o-i,l=(o+i)/2;return s?(e===o?a=(n-r)/s+(n<r)*6:n===o?a=(r-e)/s+2:a=(e-n)/s+4,s/=l<.5?o+i:2-o-i,a*=60):s=l>0&&l<1?0:a,new ht(a,s,l,t.opacity)}function xa(t,e,n,r){return arguments.length===1?or(t):new ht(t,e,n,r??1)}function ht(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}Qe(ht,xa,Qn(ne,{brighter(t){return t=t==null?we:Math.pow(we,t),new ht(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?re:Math.pow(re,t),new ht(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new st(Je(t>=240?t-240:t+120,i,r),Je(t,i,r),Je(t<120?t+240:t-120,i,r),this.opacity)},clamp(){return new ht(ar(this.h),Me(this.s),Me(this.l),ke(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=ke(this.opacity);return`${t===1?"hsl(":"hsla("}${ar(this.h)}, ${Me(this.s)*100}%, ${Me(this.l)*100}%${t===1?")":`, ${t})`}`}}));function ar(t){return t=(t||0)%360,t<0?t+360:t}function Me(t){return Math.max(0,Math.min(1,t||0))}function Je(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const tn=t=>()=>t;function wa(t,e){return function(n){return t+n*e}}function ba(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function ka(t){return(t=+t)==1?sr:function(e,n){return n-e?ba(e,n,t):tn(isNaN(e)?n:e)}}function sr(t,e){var n=e-t;return n?wa(t,n):tn(isNaN(t)?e:t)}const Te=function t(e){var n=ka(e);function r(i,o){var a=n((i=je(i)).r,(o=je(o)).r),s=n(i.g,o.g),l=n(i.b,o.b),u=sr(i.opacity,o.opacity);return function(c){return i.r=a(c),i.g=s(c),i.b=l(c),i.opacity=u(c),i+""}}return r.gamma=t,r}(1);function Ma(t,e){e||(e=[]);var n=t?Math.min(e.length,t.length):0,r=e.slice(),i;return function(o){for(i=0;i<n;++i)r[i]=t[i]*(1-o)+e[i]*o;return r}}function Ta(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function Ca(t,e){var n=e?e.length:0,r=t?Math.min(n,t.length):0,i=new Array(r),o=new Array(n),a;for(a=0;a<r;++a)i[a]=rn(t[a],e[a]);for(;a<n;++a)o[a]=e[a];return function(s){for(a=0;a<r;++a)o[a]=i[a](s);return o}}function Sa(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}}function dt(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function Aa(t,e){var n={},r={},i;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(i in e)i in t?n[i]=rn(t[i],e[i]):r[i]=e[i];return function(o){for(i in n)r[i]=n[i](o);return r}}var en=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,nn=new RegExp(en.source,"g");function Ea(t){return function(){return t}}function Da(t){return function(e){return t(e)+""}}function ur(t,e){var n=en.lastIndex=nn.lastIndex=0,r,i,o,a=-1,s=[],l=[];for(t=t+"",e=e+"";(r=en.exec(t))&&(i=nn.exec(e));)(o=i.index)>n&&(o=e.slice(n,o),s[a]?s[a]+=o:s[++a]=o),(r=r[0])===(i=i[0])?s[a]?s[a]+=i:s[++a]=i:(s[++a]=null,l.push({i:a,x:dt(r,i)})),n=nn.lastIndex;return n<e.length&&(o=e.slice(n),s[a]?s[a]+=o:s[++a]=o),s.length<2?l[0]?Da(l[0].x):Ea(e):(e=l.length,function(u){for(var c=0,g;c<e;++c)s[(g=l[c]).i]=g.x(u);return s.join("")})}function rn(t,e){var n=typeof e,r;return e==null||n==="boolean"?tn(e):(n==="number"?dt:n==="string"?(r=Ft(e))?(e=r,Te):ur:e instanceof Ft?Te:e instanceof Date?Sa:Ta(e)?Ma:Array.isArray(e)?Ca:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?Aa:dt)(t,e)}function Na(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}var lr=180/Math.PI,on={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function cr(t,e,n,r,i,o){var a,s,l;return(a=Math.sqrt(t*t+e*e))&&(t/=a,e/=a),(l=t*n+e*r)&&(n-=t*l,r-=e*l),(s=Math.sqrt(n*n+r*r))&&(n/=s,r/=s,l/=s),t*r<e*n&&(t=-t,e=-e,l=-l,a=-a),{translateX:i,translateY:o,rotate:Math.atan2(e,t)*lr,skewX:Math.atan(l)*lr,scaleX:a,scaleY:s}}var Ce;function Ra(t){const e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?on:cr(e.a,e.b,e.c,e.d,e.e,e.f)}function Fa(t){return t==null||(Ce||(Ce=document.createElementNS("http://www.w3.org/2000/svg","g")),Ce.setAttribute("transform",t),!(t=Ce.transform.baseVal.consolidate()))?on:(t=t.matrix,cr(t.a,t.b,t.c,t.d,t.e,t.f))}function fr(t,e,n,r){function i(u){return u.length?u.pop()+" ":""}function o(u,c,g,d,v,L){if(u!==g||c!==d){var $=v.push("translate(",null,e,null,n);L.push({i:$-4,x:dt(u,g)},{i:$-2,x:dt(c,d)})}else(g||d)&&v.push("translate("+g+e+d+n)}function a(u,c,g,d){u!==c?(u-c>180?c+=360:c-u>180&&(u+=360),d.push({i:g.push(i(g)+"rotate(",null,r)-2,x:dt(u,c)})):c&&g.push(i(g)+"rotate("+c+r)}function s(u,c,g,d){u!==c?d.push({i:g.push(i(g)+"skewX(",null,r)-2,x:dt(u,c)}):c&&g.push(i(g)+"skewX("+c+r)}function l(u,c,g,d,v,L){if(u!==g||c!==d){var $=v.push(i(v)+"scale(",null,",",null,")");L.push({i:$-4,x:dt(u,g)},{i:$-2,x:dt(c,d)})}else(g!==1||d!==1)&&v.push(i(v)+"scale("+g+","+d+")")}return function(u,c){var g=[],d=[];return u=t(u),c=t(c),o(u.translateX,u.translateY,c.translateX,c.translateY,g,d),a(u.rotate,c.rotate,g,d),s(u.skewX,c.skewX,g,d),l(u.scaleX,u.scaleY,c.scaleX,c.scaleY,g,d),u=c=null,function(v){for(var L=-1,$=d.length,G;++L<$;)g[(G=d[L]).i]=G.x(v);return g.join("")}}}var Ua=fr(Ra,"px, ","px)","deg)"),Oa=fr(Fa,", ",")",")"),za=1e-12;function hr(t){return((t=Math.exp(t))+1/t)/2}function Ia(t){return((t=Math.exp(t))-1/t)/2}function $a(t){return((t=Math.exp(2*t))-1)/(t+1)}const La=function t(e,n,r){function i(o,a){var s=o[0],l=o[1],u=o[2],c=a[0],g=a[1],d=a[2],v=c-s,L=g-l,$=v*v+L*L,G,S;if($<za)S=Math.log(d/u)/e,G=function(O){return[s+O*v,l+O*L,u*Math.exp(e*O*S)]};else{var tt=Math.sqrt($),Z=(d*d-u*u+r*$)/(2*u*n*tt),H=(d*d-u*u-r*$)/(2*d*n*tt),K=Math.log(Math.sqrt(Z*Z+1)-Z),A=Math.log(Math.sqrt(H*H+1)-H);S=(A-K)/e,G=function(O){var f=O*S,h=hr(K),x=u/(n*tt)*(h*$a(e*f+K)-Ia(K));return[s+x*v,l+x*L,u*h/hr(e*f+K)]}}return G.duration=S*1e3*e/Math.SQRT2,G}return i.rho=function(o){var a=Math.max(.001,+o),s=a*a,l=s*s;return t(a,s,l)},i}(Math.SQRT2,2,4);var Xt=0,oe=0,ae=0,dr=1e3,Se,se,Ae=0,zt=0,Ee=0,ue=typeof performance=="object"&&performance.now?performance:Date,pr=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function an(){return zt||(pr(Ha),zt=ue.now()+Ee)}function Ha(){zt=0}function De(){this._call=this._time=this._next=null}De.prototype=gr.prototype={constructor:De,restart:function(t,e,n){if(typeof t!="function")throw new TypeError("callback is not a function");n=(n==null?an():+n)+(e==null?0:+e),!this._next&&se!==this&&(se?se._next=this:Se=this,se=this),this._call=t,this._time=n,sn()},stop:function(){this._call&&(this._call=null,this._time=1/0,sn())}};function gr(t,e,n){var r=new De;return r.restart(t,e,n),r}function Ya(){an(),++Xt;for(var t=Se,e;t;)(e=zt-t._time)>=0&&t._call.call(void 0,e),t=t._next;--Xt}function mr(){zt=(Ae=ue.now())+Ee,Xt=oe=0;try{Ya()}finally{Xt=0,Wa(),zt=0}}function Pa(){var t=ue.now(),e=t-Ae;e>dr&&(Ee-=e,Ae=t)}function Wa(){for(var t,e=Se,n,r=1/0;e;)e._call?(r>e._time&&(r=e._time),t=e,e=e._next):(n=e._next,e._next=null,e=t?t._next=n:Se=n);se=t,sn(r)}function sn(t){if(!Xt){oe&&(oe=clearTimeout(oe));var e=t-zt;e>24?(t<1/0&&(oe=setTimeout(mr,t-ue.now()-Ee)),ae&&(ae=clearInterval(ae))):(ae||(Ae=ue.now(),ae=setInterval(Pa,dr)),Xt=1,pr(mr))}}function yr(t,e,n){var r=new De;return e=e==null?0:+e,r.restart(i=>{r.stop(),t(i+e)},e,n),r}var qa=Xe("start","end","cancel","interrupt"),Xa=[],vr=0,_r=1,un=2,Ne=3,xr=4,ln=5,Re=6;function Fe(t,e,n,r,i,o){var a=t.__transition;if(!a)t.__transition={};else if(n in a)return;Va(t,n,{name:e,index:r,group:i,on:qa,tween:Xa,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:vr})}function cn(t,e){var n=pt(t,e);if(n.state>vr)throw new Error("too late; already scheduled");return n}function mt(t,e){var n=pt(t,e);if(n.state>Ne)throw new Error("too late; already running");return n}function pt(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}function Va(t,e,n){var r=t.__transition,i;r[e]=n,n.timer=gr(o,0,n.time);function o(u){n.state=_r,n.timer.restart(a,n.delay,n.time),n.delay<=u&&a(u-n.delay)}function a(u){var c,g,d,v;if(n.state!==_r)return l();for(c in r)if(v=r[c],v.name===n.name){if(v.state===Ne)return yr(a);v.state===xr?(v.state=Re,v.timer.stop(),v.on.call("interrupt",t,t.__data__,v.index,v.group),delete r[c]):+c<e&&(v.state=Re,v.timer.stop(),v.on.call("cancel",t,t.__data__,v.index,v.group),delete r[c])}if(yr(function(){n.state===Ne&&(n.state=xr,n.timer.restart(s,n.delay,n.time),s(u))}),n.state=un,n.on.call("start",t,t.__data__,n.index,n.group),n.state===un){for(n.state=Ne,i=new Array(d=n.tween.length),c=0,g=-1;c<d;++c)(v=n.tween[c].value.call(t,t.__data__,n.index,n.group))&&(i[++g]=v);i.length=g+1}}function s(u){for(var c=u<n.duration?n.ease.call(null,u/n.duration):(n.timer.restart(l),n.state=ln,1),g=-1,d=i.length;++g<d;)i[g].call(t,c);n.state===ln&&(n.on.call("end",t,t.__data__,n.index,n.group),l())}function l(){n.state=Re,n.timer.stop(),delete r[e];for(var u in r)return;delete t.__transition}}function Ue(t,e){var n=t.__transition,r,i,o=!0,a;if(n){e=e==null?null:e+"";for(a in n){if((r=n[a]).name!==e){o=!1;continue}i=r.state>un&&r.state<ln,r.state=Re,r.timer.stop(),r.on.call(i?"interrupt":"cancel",t,t.__data__,r.index,r.group),delete n[a]}o&&delete t.__transition}}function Ba(t){return this.each(function(){Ue(this,t)})}function Ga(t,e){var n,r;return function(){var i=mt(this,t),o=i.tween;if(o!==n){r=n=o;for(var a=0,s=r.length;a<s;++a)if(r[a].name===e){r=r.slice(),r.splice(a,1);break}}i.tween=r}}function Za(t,e,n){var r,i;if(typeof n!="function")throw new Error;return function(){var o=mt(this,t),a=o.tween;if(a!==r){i=(r=a).slice();for(var s={name:e,value:n},l=0,u=i.length;l<u;++l)if(i[l].name===e){i[l]=s;break}l===u&&i.push(s)}o.tween=i}}function Ka(t,e){var n=this._id;if(t+="",arguments.length<2){for(var r=pt(this.node(),n).tween,i=0,o=r.length,a;i<o;++i)if((a=r[i]).name===t)return a.value;return null}return this.each((e==null?Ga:Za)(n,t,e))}function fn(t,e,n){var r=t._id;return t.each(function(){var i=mt(this,r);(i.value||(i.value={}))[e]=n.apply(this,arguments)}),function(i){return pt(i,r).value[e]}}function wr(t,e){var n;return(typeof e=="number"?dt:e instanceof Ft?Te:(n=Ft(e))?(e=n,Te):ur)(t,e)}function Qa(t){return function(){this.removeAttribute(t)}}function ja(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Ja(t,e,n){var r,i=n+"",o;return function(){var a=this.getAttribute(t);return a===i?null:a===r?o:o=e(r=a,n)}}function ts(t,e,n){var r,i=n+"",o;return function(){var a=this.getAttributeNS(t.space,t.local);return a===i?null:a===r?o:o=e(r=a,n)}}function es(t,e,n){var r,i,o;return function(){var a,s=n(this),l;return s==null?void this.removeAttribute(t):(a=this.getAttribute(t),l=s+"",a===l?null:a===r&&l===i?o:(i=l,o=e(r=a,s)))}}function ns(t,e,n){var r,i,o;return function(){var a,s=n(this),l;return s==null?void this.removeAttributeNS(t.space,t.local):(a=this.getAttributeNS(t.space,t.local),l=s+"",a===l?null:a===r&&l===i?o:(i=l,o=e(r=a,s)))}}function rs(t,e){var n=_e(t),r=n==="transform"?Oa:wr;return this.attrTween(t,typeof e=="function"?(n.local?ns:es)(n,r,fn(this,"attr."+t,e)):e==null?(n.local?ja:Qa)(n):(n.local?ts:Ja)(n,r,e))}function is(t,e){return function(n){this.setAttribute(t,e.call(this,n))}}function os(t,e){return function(n){this.setAttributeNS(t.space,t.local,e.call(this,n))}}function as(t,e){var n,r;function i(){var o=e.apply(this,arguments);return o!==r&&(n=(r=o)&&os(t,o)),n}return i._value=e,i}function ss(t,e){var n,r;function i(){var o=e.apply(this,arguments);return o!==r&&(n=(r=o)&&is(t,o)),n}return i._value=e,i}function us(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(e==null)return this.tween(n,null);if(typeof e!="function")throw new Error;var r=_e(t);return this.tween(n,(r.local?as:ss)(r,e))}function ls(t,e){return function(){cn(this,t).delay=+e.apply(this,arguments)}}function cs(t,e){return e=+e,function(){cn(this,t).delay=e}}function fs(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?ls:cs)(e,t)):pt(this.node(),e).delay}function hs(t,e){return function(){mt(this,t).duration=+e.apply(this,arguments)}}function ds(t,e){return e=+e,function(){mt(this,t).duration=e}}function ps(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?hs:ds)(e,t)):pt(this.node(),e).duration}function gs(t,e){if(typeof e!="function")throw new Error;return function(){mt(this,t).ease=e}}function ms(t){var e=this._id;return arguments.length?this.each(gs(e,t)):pt(this.node(),e).ease}function ys(t,e){return function(){var n=e.apply(this,arguments);if(typeof n!="function")throw new Error;mt(this,t).ease=n}}function vs(t){if(typeof t!="function")throw new Error;return this.each(ys(this._id,t))}function _s(t){typeof t!="function"&&(t=Yn(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var o=e[i],a=o.length,s=r[i]=[],l,u=0;u<a;++u)(l=o[u])&&t.call(l,l.__data__,u,o)&&s.push(l);return new bt(r,this._parents,this._name,this._id)}function xs(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,r=e.length,i=n.length,o=Math.min(r,i),a=new Array(r),s=0;s<o;++s)for(var l=e[s],u=n[s],c=l.length,g=a[s]=new Array(c),d,v=0;v<c;++v)(d=l[v]||u[v])&&(g[v]=d);for(;s<r;++s)a[s]=e[s];return new bt(a,this._parents,this._name,this._id)}function ws(t){return(t+"").trim().split(/^|\s+/).every(function(e){var n=e.indexOf(".");return n>=0&&(e=e.slice(0,n)),!e||e==="start"})}function bs(t,e,n){var r,i,o=ws(e)?cn:mt;return function(){var a=o(this,t),s=a.on;s!==r&&(i=(r=s).copy()).on(e,n),a.on=i}}function ks(t,e){var n=this._id;return arguments.length<2?pt(this.node(),n).on.on(t):this.each(bs(n,t,e))}function Ms(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}}function Ts(){return this.on("end.remove",Ms(this._id))}function Cs(t){var e=this._name,n=this._id;typeof t!="function"&&(t=Be(t));for(var r=this._groups,i=r.length,o=new Array(i),a=0;a<i;++a)for(var s=r[a],l=s.length,u=o[a]=new Array(l),c,g,d=0;d<l;++d)(c=s[d])&&(g=t.call(c,c.__data__,d,s))&&("__data__"in c&&(g.__data__=c.__data__),u[d]=g,Fe(u[d],e,n,d,u,pt(c,n)));return new bt(o,this._parents,e,n)}function Ss(t){var e=this._name,n=this._id;typeof t!="function"&&(t=Hn(t));for(var r=this._groups,i=r.length,o=[],a=[],s=0;s<i;++s)for(var l=r[s],u=l.length,c,g=0;g<u;++g)if(c=l[g]){for(var d=t.call(c,c.__data__,g,l),v,L=pt(c,n),$=0,G=d.length;$<G;++$)(v=d[$])&&Fe(v,e,n,$,d,L);o.push(d),a.push(c)}return new bt(o,a,e,n)}var As=ee.prototype.constructor;function Es(){return new As(this._groups,this._parents)}function Ds(t,e){var n,r,i;return function(){var o=Wt(this,t),a=(this.style.removeProperty(t),Wt(this,t));return o===a?null:o===n&&a===r?i:i=e(n=o,r=a)}}function br(t){return function(){this.style.removeProperty(t)}}function Ns(t,e,n){var r,i=n+"",o;return function(){var a=Wt(this,t);return a===i?null:a===r?o:o=e(r=a,n)}}function Rs(t,e,n){var r,i,o;return function(){var a=Wt(this,t),s=n(this),l=s+"";return s==null&&(l=s=(this.style.removeProperty(t),Wt(this,t))),a===l?null:a===r&&l===i?o:(i=l,o=e(r=a,s))}}function Fs(t,e){var n,r,i,o="style."+e,a="end."+o,s;return function(){var l=mt(this,t),u=l.on,c=l.value[o]==null?s||(s=br(e)):void 0;(u!==n||i!==c)&&(r=(n=u).copy()).on(a,i=c),l.on=r}}function Us(t,e,n){var r=(t+="")=="transform"?Ua:wr;return e==null?this.styleTween(t,Ds(t,r)).on("end.style."+t,br(t)):typeof e=="function"?this.styleTween(t,Rs(t,r,fn(this,"style."+t,e))).each(Fs(this._id,t)):this.styleTween(t,Ns(t,r,e),n).on("end.style."+t,null)}function Os(t,e,n){return function(r){this.style.setProperty(t,e.call(this,r),n)}}function zs(t,e,n){var r,i;function o(){var a=e.apply(this,arguments);return a!==i&&(r=(i=a)&&Os(t,a,n)),r}return o._value=e,o}function Is(t,e,n){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(e==null)return this.tween(r,null);if(typeof e!="function")throw new Error;return this.tween(r,zs(t,e,n??""))}function $s(t){return function(){this.textContent=t}}function Ls(t){return function(){var e=t(this);this.textContent=e??""}}function Hs(t){return this.tween("text",typeof t=="function"?Ls(fn(this,"text",t)):$s(t==null?"":t+""))}function Ys(t){return function(e){this.textContent=t.call(this,e)}}function Ps(t){var e,n;function r(){var i=t.apply(this,arguments);return i!==n&&(e=(n=i)&&Ys(i)),e}return r._value=t,r}function Ws(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(t==null)return this.tween(e,null);if(typeof t!="function")throw new Error;return this.tween(e,Ps(t))}function qs(){for(var t=this._name,e=this._id,n=kr(),r=this._groups,i=r.length,o=0;o<i;++o)for(var a=r[o],s=a.length,l,u=0;u<s;++u)if(l=a[u]){var c=pt(l,e);Fe(l,t,n,u,a,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new bt(r,this._parents,t,n)}function Xs(){var t,e,n=this,r=n._id,i=n.size();return new Promise(function(o,a){var s={value:a},l={value:function(){--i===0&&o()}};n.each(function(){var u=mt(this,r),c=u.on;c!==t&&(e=(t=c).copy(),e._.cancel.push(s),e._.interrupt.push(s),e._.end.push(l)),u.on=e}),i===0&&o()})}var Vs=0;function bt(t,e,n,r){this._groups=t,this._parents=e,this._name=n,this._id=r}function kr(){return++Vs}var kt=ee.prototype;bt.prototype={constructor:bt,select:Cs,selectAll:Ss,selectChild:kt.selectChild,selectChildren:kt.selectChildren,filter:_s,merge:xs,selection:Es,transition:qs,call:kt.call,nodes:kt.nodes,node:kt.node,size:kt.size,empty:kt.empty,each:kt.each,on:ks,attr:rs,attrTween:us,style:Us,styleTween:Is,text:Hs,textTween:Ws,remove:Ts,tween:Ka,delay:fs,duration:ps,ease:ms,easeVarying:vs,end:Xs,[Symbol.iterator]:kt[Symbol.iterator]};function Bs(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var Gs={time:null,delay:0,duration:250,ease:Bs};function Zs(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return n}function Ks(t){var e,n;t instanceof bt?(e=t._id,t=t._name):(e=kr(),(n=Gs).time=an(),t=t==null?null:t+"");for(var r=this._groups,i=r.length,o=0;o<i;++o)for(var a=r[o],s=a.length,l,u=0;u<s;++u)(l=a[u])&&Fe(l,t,e,u,a,n||Zs(l,e));return new bt(r,this._parents,t,e)}ee.prototype.interrupt=Ba,ee.prototype.transition=Ks;function hn(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}const Mr=Symbol("implicit");function Tr(){var t=new An,e=[],n=[],r=Mr;function i(o){let a=t.get(o);if(a===void 0){if(r!==Mr)return r;t.set(o,a=e.push(o)-1)}return n[a%n.length]}return i.domain=function(o){if(!arguments.length)return e.slice();e=[],t=new An;for(const a of o)t.has(a)||t.set(a,e.push(a)-1);return i},i.range=function(o){return arguments.length?(n=Array.from(o),i):n.slice()},i.unknown=function(o){return arguments.length?(r=o,i):r},i.copy=function(){return Tr(e,n).unknown(r)},hn.apply(i,arguments),i}function Cr(){var t=Tr().unknown(void 0),e=t.domain,n=t.range,r=0,i=1,o,a,s=!1,l=0,u=0,c=.5;delete t.unknown;function g(){var d=e().length,v=i<r,L=v?i:r,$=v?r:i;o=($-L)/Math.max(1,d-l+u*2),s&&(o=Math.floor(o)),L+=($-L-o*(d-l))*c,a=o*(1-l),s&&(L=Math.round(L),a=Math.round(a));var G=yi(d).map(function(S){return L+o*S});return n(v?G.reverse():G)}return t.domain=function(d){return arguments.length?(e(d),g()):e()},t.range=function(d){return arguments.length?([r,i]=d,r=+r,i=+i,g()):[r,i]},t.rangeRound=function(d){return[r,i]=d,r=+r,i=+i,s=!0,g()},t.bandwidth=function(){return a},t.step=function(){return o},t.round=function(d){return arguments.length?(s=!!d,g()):s},t.padding=function(d){return arguments.length?(l=Math.min(1,u=+d),g()):l},t.paddingInner=function(d){return arguments.length?(l=Math.min(1,d),g()):l},t.paddingOuter=function(d){return arguments.length?(u=+d,g()):u},t.align=function(d){return arguments.length?(c=Math.max(0,Math.min(1,d)),g()):c},t.copy=function(){return Cr(e(),[r,i]).round(s).paddingInner(l).paddingOuter(u).align(c)},hn.apply(g(),arguments)}function Sr(t){var e=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return Sr(e())},t}function Ar(){return Sr(Cr.apply(null,arguments).paddingInner(1))}function Qs(t){return function(){return t}}function js(t){return+t}var Er=[0,1];function Vt(t){return t}function dn(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:Qs(isNaN(e)?NaN:.5)}function Js(t,e){var n;return t>e&&(n=t,t=e,e=n),function(r){return Math.max(t,Math.min(e,r))}}function tu(t,e,n){var r=t[0],i=t[1],o=e[0],a=e[1];return i<r?(r=dn(i,r),o=n(a,o)):(r=dn(r,i),o=n(o,a)),function(s){return o(r(s))}}function eu(t,e,n){var r=Math.min(t.length,e.length)-1,i=new Array(r),o=new Array(r),a=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++a<r;)i[a]=dn(t[a],t[a+1]),o[a]=n(e[a],e[a+1]);return function(s){var l=ci(t,s,1,r)-1;return o[l](i[l](s))}}function nu(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function ru(){var t=Er,e=Er,n=rn,r,i,o,a=Vt,s,l,u;function c(){var d=Math.min(t.length,e.length);return a!==Vt&&(a=Js(t[0],t[d-1])),s=d>2?eu:tu,l=u=null,g}function g(d){return d==null||isNaN(d=+d)?o:(l||(l=s(t.map(r),e,n)))(r(a(d)))}return g.invert=function(d){return a(i((u||(u=s(e,t.map(r),dt)))(d)))},g.domain=function(d){return arguments.length?(t=Array.from(d,js),c()):t.slice()},g.range=function(d){return arguments.length?(e=Array.from(d),c()):e.slice()},g.rangeRound=function(d){return e=Array.from(d),n=Na,c()},g.clamp=function(d){return arguments.length?(a=d?!0:Vt,c()):a!==Vt},g.interpolate=function(d){return arguments.length?(n=d,c()):n},g.unknown=function(d){return arguments.length?(o=d,g):o},function(d,v){return r=d,i=v,c()}}function iu(){return ru()(Vt,Vt)}function ou(t,e){t=t.slice();var n=0,r=t.length-1,i=t[n],o=t[r],a;return o<i&&(a=n,n=r,r=a,a=i,i=o,o=a),t[n]=e.floor(i),t[r]=e.ceil(o),t}const pn=new Date,gn=new Date;function rt(t,e,n,r){function i(o){return t(o=arguments.length===0?new Date:new Date(+o)),o}return i.floor=o=>(t(o=new Date(+o)),o),i.ceil=o=>(t(o=new Date(o-1)),e(o,1),t(o),o),i.round=o=>{const a=i(o),s=i.ceil(o);return o-a<s-o?a:s},i.offset=(o,a)=>(e(o=new Date(+o),a==null?1:Math.floor(a)),o),i.range=(o,a,s)=>{const l=[];if(o=i.ceil(o),s=s==null?1:Math.floor(s),!(o<a)||!(s>0))return l;let u;do l.push(u=new Date(+o)),e(o,s),t(o);while(u<o&&o<a);return l},i.filter=o=>rt(a=>{if(a>=a)for(;t(a),!o(a);)a.setTime(a-1)},(a,s)=>{if(a>=a)if(s<0)for(;++s<=0;)for(;e(a,-1),!o(a););else for(;--s>=0;)for(;e(a,1),!o(a););}),n&&(i.count=(o,a)=>(pn.setTime(+o),gn.setTime(+a),t(pn),t(gn),Math.floor(n(pn,gn))),i.every=o=>(o=Math.floor(o),!isFinite(o)||!(o>0)?null:o>1?i.filter(r?a=>r(a)%o===0:a=>i.count(0,a)%o===0):i)),i}const Oe=rt(()=>{},(t,e)=>{t.setTime(+t+e)},(t,e)=>e-t);Oe.every=t=>(t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?rt(e=>{e.setTime(Math.floor(e/t)*t)},(e,n)=>{e.setTime(+e+n*t)},(e,n)=>(n-e)/t):Oe),Oe.range;const Mt=1e3,ft=Mt*60,Tt=ft*60,Ct=Tt*24,mn=Ct*7,Dr=Ct*30,yn=Ct*365,Bt=rt(t=>{t.setTime(t-t.getMilliseconds())},(t,e)=>{t.setTime(+t+e*Mt)},(t,e)=>(e-t)/Mt,t=>t.getUTCSeconds());Bt.range;const vn=rt(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*Mt)},(t,e)=>{t.setTime(+t+e*ft)},(t,e)=>(e-t)/ft,t=>t.getMinutes());vn.range,rt(t=>{t.setUTCSeconds(0,0)},(t,e)=>{t.setTime(+t+e*ft)},(t,e)=>(e-t)/ft,t=>t.getUTCMinutes()).range;const _n=rt(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*Mt-t.getMinutes()*ft)},(t,e)=>{t.setTime(+t+e*Tt)},(t,e)=>(e-t)/Tt,t=>t.getHours());_n.range,rt(t=>{t.setUTCMinutes(0,0,0)},(t,e)=>{t.setTime(+t+e*Tt)},(t,e)=>(e-t)/Tt,t=>t.getUTCHours()).range;const le=rt(t=>t.setHours(0,0,0,0),(t,e)=>t.setDate(t.getDate()+e),(t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*ft)/Ct,t=>t.getDate()-1);le.range;const xn=rt(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/Ct,t=>t.getUTCDate()-1);xn.range,rt(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/Ct,t=>Math.floor(t/Ct)).range;function It(t){return rt(e=>{e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},(e,n)=>{e.setDate(e.getDate()+n*7)},(e,n)=>(n-e-(n.getTimezoneOffset()-e.getTimezoneOffset())*ft)/mn)}const ze=It(0),Ie=It(1),au=It(2),su=It(3),Gt=It(4),uu=It(5),lu=It(6);ze.range,Ie.range,au.range,su.range,Gt.range,uu.range,lu.range;function $t(t){return rt(e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCDate(e.getUTCDate()+n*7)},(e,n)=>(n-e)/mn)}const Nr=$t(0),$e=$t(1),cu=$t(2),fu=$t(3),Zt=$t(4),hu=$t(5),du=$t(6);Nr.range,$e.range,cu.range,fu.range,Zt.range,hu.range,du.range;const wn=rt(t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,e)=>{t.setMonth(t.getMonth()+e)},(t,e)=>e.getMonth()-t.getMonth()+(e.getFullYear()-t.getFullYear())*12,t=>t.getMonth());wn.range,rt(t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCMonth(t.getUTCMonth()+e)},(t,e)=>e.getUTCMonth()-t.getUTCMonth()+(e.getUTCFullYear()-t.getUTCFullYear())*12,t=>t.getUTCMonth()).range;const St=rt(t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,e)=>{t.setFullYear(t.getFullYear()+e)},(t,e)=>e.getFullYear()-t.getFullYear(),t=>t.getFullYear());St.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:rt(e=>{e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},(e,n)=>{e.setFullYear(e.getFullYear()+n*t)}),St.range;const Lt=rt(t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCFullYear(t.getUTCFullYear()+e)},(t,e)=>e.getUTCFullYear()-t.getUTCFullYear(),t=>t.getUTCFullYear());Lt.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:rt(e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCFullYear(e.getUTCFullYear()+n*t)}),Lt.range;function pu(t,e,n,r,i,o){const a=[[Bt,1,Mt],[Bt,5,5*Mt],[Bt,15,15*Mt],[Bt,30,30*Mt],[o,1,ft],[o,5,5*ft],[o,15,15*ft],[o,30,30*ft],[i,1,Tt],[i,3,3*Tt],[i,6,6*Tt],[i,12,12*Tt],[r,1,Ct],[r,2,2*Ct],[n,1,mn],[e,1,Dr],[e,3,3*Dr],[t,1,yn]];function s(u,c,g){const d=c<u;d&&([u,c]=[c,u]);const v=g&&typeof g.range=="function"?g:l(u,c,g),L=v?v.range(u,+c+1):[];return d?L.reverse():L}function l(u,c,g){const d=Math.abs(c-u)/g,v=Ye(([,,G])=>G).right(a,d);if(v===a.length)return t.every(Rn(u/yn,c/yn,g));if(v===0)return Oe.every(Math.max(Rn(u,c,g),1));const[L,$]=a[d/a[v-1][2]<a[v][2]/d?v-1:v];return L.every($)}return[s,l]}const[gu,mu]=pu(St,wn,ze,le,_n,vn);function bn(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function kn(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function ce(t,e,n){return{y:t,m:e,d:n,H:0,M:0,S:0,L:0}}function yu(t){var e=t.dateTime,n=t.date,r=t.time,i=t.periods,o=t.days,a=t.shortDays,s=t.months,l=t.shortMonths,u=fe(i),c=he(i),g=fe(o),d=he(o),v=fe(a),L=he(a),$=fe(s),G=he(s),S=fe(l),tt=he(l),Z={a:k,A:U,b:T,B:Y,c:null,d:Ir,e:Ir,f:Hu,g:Ku,G:ju,H:Iu,I:$u,j:Lu,L:$r,m:Yu,M:Pu,p:R,q:z,Q:qr,s:Xr,S:Wu,u:qu,U:Xu,V:Vu,w:Bu,W:Gu,x:null,X:null,y:Zu,Y:Qu,Z:Ju,"%":Wr},H={a:F,A:B,b:Q,B:j,c:null,d:Hr,e:Hr,f:rl,g:dl,G:gl,H:tl,I:el,j:nl,L:Yr,m:il,M:ol,p:C,q:_,Q:qr,s:Xr,S:al,u:sl,U:ul,V:ll,w:cl,W:fl,x:null,X:null,y:hl,Y:pl,Z:ml,"%":Wr},K={a:x,A:E,b:D,B:W,c:p,d:Or,e:Or,f:Fu,g:Ur,G:Fr,H:zr,I:zr,j:Eu,L:Ru,m:Au,M:Du,p:h,q:Su,Q:Ou,s:zu,S:Nu,u:bu,U:ku,V:Mu,w:wu,W:Tu,x:N,X:b,y:Ur,Y:Fr,Z:Cu,"%":Uu};Z.x=A(n,Z),Z.X=A(r,Z),Z.c=A(e,Z),H.x=A(n,H),H.X=A(r,H),H.c=A(e,H);function A(y,M){return function(w){var m=[],P=-1,I=0,V=y.length,q,nt,X;for(w instanceof Date||(w=new Date(+w));++P<V;)y.charCodeAt(P)===37&&(m.push(y.slice(I,P)),(nt=Rr[q=y.charAt(++P)])!=null?q=y.charAt(++P):nt=q==="e"?" ":"0",(X=M[q])&&(q=X(w,nt)),m.push(q),I=P+1);return m.push(y.slice(I,P)),m.join("")}}function O(y,M){return function(w){var m=ce(1900,void 0,1),P=f(m,y,w+="",0),I,V;if(P!=w.length)return null;if("Q"in m)return new Date(m.Q);if("s"in m)return new Date(m.s*1e3+("L"in m?m.L:0));if(M&&!("Z"in m)&&(m.Z=0),"p"in m&&(m.H=m.H%12+m.p*12),m.m===void 0&&(m.m="q"in m?m.q:0),"V"in m){if(m.V<1||m.V>53)return null;"w"in m||(m.w=1),"Z"in m?(I=kn(ce(m.y,0,1)),V=I.getUTCDay(),I=V>4||V===0?$e.ceil(I):$e(I),I=xn.offset(I,(m.V-1)*7),m.y=I.getUTCFullYear(),m.m=I.getUTCMonth(),m.d=I.getUTCDate()+(m.w+6)%7):(I=bn(ce(m.y,0,1)),V=I.getDay(),I=V>4||V===0?Ie.ceil(I):Ie(I),I=le.offset(I,(m.V-1)*7),m.y=I.getFullYear(),m.m=I.getMonth(),m.d=I.getDate()+(m.w+6)%7)}else("W"in m||"U"in m)&&("w"in m||(m.w="u"in m?m.u%7:"W"in m?1:0),V="Z"in m?kn(ce(m.y,0,1)).getUTCDay():bn(ce(m.y,0,1)).getDay(),m.m=0,m.d="W"in m?(m.w+6)%7+m.W*7-(V+5)%7:m.w+m.U*7-(V+6)%7);return"Z"in m?(m.H+=m.Z/100|0,m.M+=m.Z%100,kn(m)):bn(m)}}function f(y,M,w,m){for(var P=0,I=M.length,V=w.length,q,nt;P<I;){if(m>=V)return-1;if(q=M.charCodeAt(P++),q===37){if(q=M.charAt(P++),nt=K[q in Rr?M.charAt(P++):q],!nt||(m=nt(y,w,m))<0)return-1}else if(q!=w.charCodeAt(m++))return-1}return m}function h(y,M,w){var m=u.exec(M.slice(w));return m?(y.p=c.get(m[0].toLowerCase()),w+m[0].length):-1}function x(y,M,w){var m=v.exec(M.slice(w));return m?(y.w=L.get(m[0].toLowerCase()),w+m[0].length):-1}function E(y,M,w){var m=g.exec(M.slice(w));return m?(y.w=d.get(m[0].toLowerCase()),w+m[0].length):-1}function D(y,M,w){var m=S.exec(M.slice(w));return m?(y.m=tt.get(m[0].toLowerCase()),w+m[0].length):-1}function W(y,M,w){var m=$.exec(M.slice(w));return m?(y.m=G.get(m[0].toLowerCase()),w+m[0].length):-1}function p(y,M,w){return f(y,e,M,w)}function N(y,M,w){return f(y,n,M,w)}function b(y,M,w){return f(y,r,M,w)}function k(y){return a[y.getDay()]}function U(y){return o[y.getDay()]}function T(y){return l[y.getMonth()]}function Y(y){return s[y.getMonth()]}function R(y){return i[+(y.getHours()>=12)]}function z(y){return 1+~~(y.getMonth()/3)}function F(y){return a[y.getUTCDay()]}function B(y){return o[y.getUTCDay()]}function Q(y){return l[y.getUTCMonth()]}function j(y){return s[y.getUTCMonth()]}function C(y){return i[+(y.getUTCHours()>=12)]}function _(y){return 1+~~(y.getUTCMonth()/3)}return{format:function(y){var M=A(y+="",Z);return M.toString=function(){return y},M},parse:function(y){var M=O(y+="",!1);return M.toString=function(){return y},M},utcFormat:function(y){var M=A(y+="",H);return M.toString=function(){return y},M},utcParse:function(y){var M=O(y+="",!0);return M.toString=function(){return y},M}}}var Rr={"-":"",_:" ",0:"0"},it=/^\s*\d+/,vu=/^%/,_u=/[\\^$*+?|[\]().{}]/g;function J(t,e,n){var r=t<0?"-":"",i=(r?-t:t)+"",o=i.length;return r+(o<n?new Array(n-o+1).join(e)+i:i)}function xu(t){return t.replace(_u,"\\$&")}function fe(t){return new RegExp("^(?:"+t.map(xu).join("|")+")","i")}function he(t){return new Map(t.map((e,n)=>[e.toLowerCase(),n]))}function wu(t,e,n){var r=it.exec(e.slice(n,n+1));return r?(t.w=+r[0],n+r[0].length):-1}function bu(t,e,n){var r=it.exec(e.slice(n,n+1));return r?(t.u=+r[0],n+r[0].length):-1}function ku(t,e,n){var r=it.exec(e.slice(n,n+2));return r?(t.U=+r[0],n+r[0].length):-1}function Mu(t,e,n){var r=it.exec(e.slice(n,n+2));return r?(t.V=+r[0],n+r[0].length):-1}function Tu(t,e,n){var r=it.exec(e.slice(n,n+2));return r?(t.W=+r[0],n+r[0].length):-1}function Fr(t,e,n){var r=it.exec(e.slice(n,n+4));return r?(t.y=+r[0],n+r[0].length):-1}function Ur(t,e,n){var r=it.exec(e.slice(n,n+2));return r?(t.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function Cu(t,e,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return r?(t.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function Su(t,e,n){var r=it.exec(e.slice(n,n+1));return r?(t.q=r[0]*3-3,n+r[0].length):-1}function Au(t,e,n){var r=it.exec(e.slice(n,n+2));return r?(t.m=r[0]-1,n+r[0].length):-1}function Or(t,e,n){var r=it.exec(e.slice(n,n+2));return r?(t.d=+r[0],n+r[0].length):-1}function Eu(t,e,n){var r=it.exec(e.slice(n,n+3));return r?(t.m=0,t.d=+r[0],n+r[0].length):-1}function zr(t,e,n){var r=it.exec(e.slice(n,n+2));return r?(t.H=+r[0],n+r[0].length):-1}function Du(t,e,n){var r=it.exec(e.slice(n,n+2));return r?(t.M=+r[0],n+r[0].length):-1}function Nu(t,e,n){var r=it.exec(e.slice(n,n+2));return r?(t.S=+r[0],n+r[0].length):-1}function Ru(t,e,n){var r=it.exec(e.slice(n,n+3));return r?(t.L=+r[0],n+r[0].length):-1}function Fu(t,e,n){var r=it.exec(e.slice(n,n+6));return r?(t.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function Uu(t,e,n){var r=vu.exec(e.slice(n,n+1));return r?n+r[0].length:-1}function Ou(t,e,n){var r=it.exec(e.slice(n));return r?(t.Q=+r[0],n+r[0].length):-1}function zu(t,e,n){var r=it.exec(e.slice(n));return r?(t.s=+r[0],n+r[0].length):-1}function Ir(t,e){return J(t.getDate(),e,2)}function Iu(t,e){return J(t.getHours(),e,2)}function $u(t,e){return J(t.getHours()%12||12,e,2)}function Lu(t,e){return J(1+le.count(St(t),t),e,3)}function $r(t,e){return J(t.getMilliseconds(),e,3)}function Hu(t,e){return $r(t,e)+"000"}function Yu(t,e){return J(t.getMonth()+1,e,2)}function Pu(t,e){return J(t.getMinutes(),e,2)}function Wu(t,e){return J(t.getSeconds(),e,2)}function qu(t){var e=t.getDay();return e===0?7:e}function Xu(t,e){return J(ze.count(St(t)-1,t),e,2)}function Lr(t){var e=t.getDay();return e>=4||e===0?Gt(t):Gt.ceil(t)}function Vu(t,e){return t=Lr(t),J(Gt.count(St(t),t)+(St(t).getDay()===4),e,2)}function Bu(t){return t.getDay()}function Gu(t,e){return J(Ie.count(St(t)-1,t),e,2)}function Zu(t,e){return J(t.getFullYear()%100,e,2)}function Ku(t,e){return t=Lr(t),J(t.getFullYear()%100,e,2)}function Qu(t,e){return J(t.getFullYear()%1e4,e,4)}function ju(t,e){var n=t.getDay();return t=n>=4||n===0?Gt(t):Gt.ceil(t),J(t.getFullYear()%1e4,e,4)}function Ju(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+J(e/60|0,"0",2)+J(e%60,"0",2)}function Hr(t,e){return J(t.getUTCDate(),e,2)}function tl(t,e){return J(t.getUTCHours(),e,2)}function el(t,e){return J(t.getUTCHours()%12||12,e,2)}function nl(t,e){return J(1+xn.count(Lt(t),t),e,3)}function Yr(t,e){return J(t.getUTCMilliseconds(),e,3)}function rl(t,e){return Yr(t,e)+"000"}function il(t,e){return J(t.getUTCMonth()+1,e,2)}function ol(t,e){return J(t.getUTCMinutes(),e,2)}function al(t,e){return J(t.getUTCSeconds(),e,2)}function sl(t){var e=t.getUTCDay();return e===0?7:e}function ul(t,e){return J(Nr.count(Lt(t)-1,t),e,2)}function Pr(t){var e=t.getUTCDay();return e>=4||e===0?Zt(t):Zt.ceil(t)}function ll(t,e){return t=Pr(t),J(Zt.count(Lt(t),t)+(Lt(t).getUTCDay()===4),e,2)}function cl(t){return t.getUTCDay()}function fl(t,e){return J($e.count(Lt(t)-1,t),e,2)}function hl(t,e){return J(t.getUTCFullYear()%100,e,2)}function dl(t,e){return t=Pr(t),J(t.getUTCFullYear()%100,e,2)}function pl(t,e){return J(t.getUTCFullYear()%1e4,e,4)}function gl(t,e){var n=t.getUTCDay();return t=n>=4||n===0?Zt(t):Zt.ceil(t),J(t.getUTCFullYear()%1e4,e,4)}function ml(){return"+0000"}function Wr(){return"%"}function qr(t){return+t}function Xr(t){return Math.floor(+t/1e3)}var Kt,Qt;yl({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function yl(t){return Kt=yu(t),Qt=Kt.format,Kt.parse,Kt.utcFormat,Kt.utcParse,Kt}function vl(t){return new Date(t)}function _l(t){return t instanceof Date?+t:+new Date(+t)}function Vr(t,e,n,r,i,o,a,s,l,u){var c=iu(),g=c.invert,d=c.domain,v=u(".%L"),L=u(":%S"),$=u("%I:%M"),G=u("%I %p"),S=u("%a %d"),tt=u("%b %d"),Z=u("%B"),H=u("%Y");function K(A){return(l(A)<A?v:s(A)<A?L:a(A)<A?$:o(A)<A?G:r(A)<A?i(A)<A?S:tt:n(A)<A?Z:H)(A)}return c.invert=function(A){return new Date(g(A))},c.domain=function(A){return arguments.length?d(Array.from(A,_l)):d().map(vl)},c.ticks=function(A){var O=d();return t(O[0],O[O.length-1],A??10)},c.tickFormat=function(A,O){return O==null?K:u(O)},c.nice=function(A){var O=d();return(!A||typeof A.range!="function")&&(A=e(O[0],O[O.length-1],A??10)),A?d(ou(O,A)):c},c.copy=function(){return nu(c,Vr(t,e,n,r,i,o,a,s,l,u))},c}function Br(){return hn.apply(Vr(gu,mu,St,wn,ze,le,_n,vn,Bt,Qt).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}const Le=t=>()=>t;function xl(t,{sourceEvent:e,target:n,transform:r,dispatch:i}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:i}})}function At(t,e,n){this.k=t,this.x=e,this.y=n}At.prototype={constructor:At,scale:function(t){return t===1?this:new At(this.k*t,this.x,this.y)},translate:function(t,e){return t===0&e===0?this:new At(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Et=new At(1,0,0);At.prototype;function Mn(t){t.stopImmediatePropagation()}function de(t){t.preventDefault(),t.stopImmediatePropagation()}function wl(t){return(!t.ctrlKey||t.type==="wheel")&&!t.button}function bl(){var t=this;return t instanceof SVGElement?(t=t.ownerSVGElement||t,t.hasAttribute("viewBox")?(t=t.viewBox.baseVal,[[t.x,t.y],[t.x+t.width,t.y+t.height]]):[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]):[[0,0],[t.clientWidth,t.clientHeight]]}function Gr(){return this.__zoom||Et}function kl(t){return-t.deltaY*(t.deltaMode===1?.05:t.deltaMode?1:.002)*(t.ctrlKey?10:1)}function Ml(){return navigator.maxTouchPoints||"ontouchstart"in this}function Tl(t,e,n){var r=t.invertX(e[0][0])-n[0][0],i=t.invertX(e[1][0])-n[1][0],o=t.invertY(e[0][1])-n[0][1],a=t.invertY(e[1][1])-n[1][1];return t.translate(i>r?(r+i)/2:Math.min(0,r)||Math.max(0,i),a>o?(o+a)/2:Math.min(0,o)||Math.max(0,a))}function Zr(){var t=wl,e=bl,n=Tl,r=kl,i=Ml,o=[0,1/0],a=[[-1/0,-1/0],[1/0,1/0]],s=250,l=La,u=Xe("start","zoom","end"),c,g,d,v=500,L=150,$=0,G=10;function S(p){p.property("__zoom",Gr).on("wheel.zoom",f,{passive:!1}).on("mousedown.zoom",h).on("dblclick.zoom",x).filter(i).on("touchstart.zoom",E).on("touchmove.zoom",D).on("touchend.zoom touchcancel.zoom",W).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}S.transform=function(p,N,b,k){var U=p.selection?p.selection():p;U.property("__zoom",Gr),p!==U?K(p,N,b,k):U.interrupt().each(function(){A(this,arguments).event(k).start().zoom(null,typeof N=="function"?N.apply(this,arguments):N).end()})},S.scaleBy=function(p,N,b,k){S.scaleTo(p,function(){var U=this.__zoom.k,T=typeof N=="function"?N.apply(this,arguments):N;return U*T},b,k)},S.scaleTo=function(p,N,b,k){S.transform(p,function(){var U=e.apply(this,arguments),T=this.__zoom,Y=b==null?H(U):typeof b=="function"?b.apply(this,arguments):b,R=T.invert(Y),z=typeof N=="function"?N.apply(this,arguments):N;return n(Z(tt(T,z),Y,R),U,a)},b,k)},S.translateBy=function(p,N,b,k){S.transform(p,function(){return n(this.__zoom.translate(typeof N=="function"?N.apply(this,arguments):N,typeof b=="function"?b.apply(this,arguments):b),e.apply(this,arguments),a)},null,k)},S.translateTo=function(p,N,b,k,U){S.transform(p,function(){var T=e.apply(this,arguments),Y=this.__zoom,R=k==null?H(T):typeof k=="function"?k.apply(this,arguments):k;return n(Et.translate(R[0],R[1]).scale(Y.k).translate(typeof N=="function"?-N.apply(this,arguments):-N,typeof b=="function"?-b.apply(this,arguments):-b),T,a)},k,U)};function tt(p,N){return N=Math.max(o[0],Math.min(o[1],N)),N===p.k?p:new At(N,p.x,p.y)}function Z(p,N,b){var k=N[0]-b[0]*p.k,U=N[1]-b[1]*p.k;return k===p.x&&U===p.y?p:new At(p.k,k,U)}function H(p){return[(+p[0][0]+ +p[1][0])/2,(+p[0][1]+ +p[1][1])/2]}function K(p,N,b,k){p.on("start.zoom",function(){A(this,arguments).event(k).start()}).on("interrupt.zoom end.zoom",function(){A(this,arguments).event(k).end()}).tween("zoom",function(){var U=this,T=arguments,Y=A(U,T).event(k),R=e.apply(U,T),z=b==null?H(R):typeof b=="function"?b.apply(U,T):b,F=Math.max(R[1][0]-R[0][0],R[1][1]-R[0][1]),B=U.__zoom,Q=typeof N=="function"?N.apply(U,T):N,j=l(B.invert(z).concat(F/B.k),Q.invert(z).concat(F/Q.k));return function(C){if(C===1)C=Q;else{var _=j(C),y=F/_[2];C=new At(y,z[0]-_[0]*y,z[1]-_[1]*y)}Y.zoom(null,C)}})}function A(p,N,b){return!b&&p.__zooming||new O(p,N)}function O(p,N){this.that=p,this.args=N,this.active=0,this.sourceEvent=null,this.extent=e.apply(p,N),this.taps=0}O.prototype={event:function(p){return p&&(this.sourceEvent=p),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(p,N){return this.mouse&&p!=="mouse"&&(this.mouse[1]=N.invert(this.mouse[0])),this.touch0&&p!=="touch"&&(this.touch0[1]=N.invert(this.touch0[0])),this.touch1&&p!=="touch"&&(this.touch1[1]=N.invert(this.touch1[0])),this.that.__zoom=N,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(p){var N=ct(this.that).datum();u.call(p,this.that,new xl(p,{sourceEvent:this.sourceEvent,target:S,transform:this.that.__zoom,dispatch:u}),N)}};function f(p,...N){if(!t.apply(this,arguments))return;var b=A(this,N).event(p),k=this.__zoom,U=Math.max(o[0],Math.min(o[1],k.k*Math.pow(2,r.apply(this,arguments)))),T=Rt(p);if(b.wheel)(b.mouse[0][0]!==T[0]||b.mouse[0][1]!==T[1])&&(b.mouse[1]=k.invert(b.mouse[0]=T)),clearTimeout(b.wheel);else{if(k.k===U)return;b.mouse=[T,k.invert(T)],Ue(this),b.start()}de(p),b.wheel=setTimeout(Y,L),b.zoom("mouse",n(Z(tt(k,U),b.mouse[0],b.mouse[1]),b.extent,a));function Y(){b.wheel=null,b.end()}}function h(p,...N){if(d||!t.apply(this,arguments))return;var b=p.currentTarget,k=A(this,N,!0).event(p),U=ct(p.view).on("mousemove.zoom",z,!0).on("mouseup.zoom",F,!0),T=Rt(p,b),Y=p.clientX,R=p.clientY;sa(p.view),Mn(p),k.mouse=[T,this.__zoom.invert(T)],Ue(this),k.start();function z(B){if(de(B),!k.moved){var Q=B.clientX-Y,j=B.clientY-R;k.moved=Q*Q+j*j>$}k.event(B).zoom("mouse",n(Z(k.that.__zoom,k.mouse[0]=Rt(B,b),k.mouse[1]),k.extent,a))}function F(B){U.on("mousemove.zoom mouseup.zoom",null),ua(B.view,k.moved),de(B),k.event(B).end()}}function x(p,...N){if(t.apply(this,arguments)){var b=this.__zoom,k=Rt(p.changedTouches?p.changedTouches[0]:p,this),U=b.invert(k),T=b.k*(p.shiftKey?.5:2),Y=n(Z(tt(b,T),k,U),e.apply(this,N),a);de(p),s>0?ct(this).transition().duration(s).call(K,Y,k,p):ct(this).call(S.transform,Y,k,p)}}function E(p,...N){if(t.apply(this,arguments)){var b=p.touches,k=b.length,U=A(this,N,p.changedTouches.length===k).event(p),T,Y,R,z;for(Mn(p),Y=0;Y<k;++Y)R=b[Y],z=Rt(R,this),z=[z,this.__zoom.invert(z),R.identifier],U.touch0?!U.touch1&&U.touch0[2]!==z[2]&&(U.touch1=z,U.taps=0):(U.touch0=z,T=!0,U.taps=1+!!c);c&&(c=clearTimeout(c)),T&&(U.taps<2&&(g=z[0],c=setTimeout(function(){c=null},v)),Ue(this),U.start())}}function D(p,...N){if(this.__zooming){var b=A(this,N).event(p),k=p.changedTouches,U=k.length,T,Y,R,z;for(de(p),T=0;T<U;++T)Y=k[T],R=Rt(Y,this),b.touch0&&b.touch0[2]===Y.identifier?b.touch0[0]=R:b.touch1&&b.touch1[2]===Y.identifier&&(b.touch1[0]=R);if(Y=b.that.__zoom,b.touch1){var F=b.touch0[0],B=b.touch0[1],Q=b.touch1[0],j=b.touch1[1],C=(C=Q[0]-F[0])*C+(C=Q[1]-F[1])*C,_=(_=j[0]-B[0])*_+(_=j[1]-B[1])*_;Y=tt(Y,Math.sqrt(C/_)),R=[(F[0]+Q[0])/2,(F[1]+Q[1])/2],z=[(B[0]+j[0])/2,(B[1]+j[1])/2]}else if(b.touch0)R=b.touch0[0],z=b.touch0[1];else return;b.zoom("touch",n(Z(Y,R,z),b.extent,a))}}function W(p,...N){if(this.__zooming){var b=A(this,N).event(p),k=p.changedTouches,U=k.length,T,Y;for(Mn(p),d&&clearTimeout(d),d=setTimeout(function(){d=null},v),T=0;T<U;++T)Y=k[T],b.touch0&&b.touch0[2]===Y.identifier?delete b.touch0:b.touch1&&b.touch1[2]===Y.identifier&&delete b.touch1;if(b.touch1&&!b.touch0&&(b.touch0=b.touch1,delete b.touch1),b.touch0)b.touch0[1]=this.__zoom.invert(b.touch0[0]);else if(b.end(),b.taps===2&&(Y=Rt(Y,this),Math.hypot(g[0]-Y[0],g[1]-Y[1])<G)){var R=ct(this).on("dblclick.zoom");R&&R.apply(this,arguments)}}}return S.wheelDelta=function(p){return arguments.length?(r=typeof p=="function"?p:Le(+p),S):r},S.filter=function(p){return arguments.length?(t=typeof p=="function"?p:Le(!!p),S):t},S.touchable=function(p){return arguments.length?(i=typeof p=="function"?p:Le(!!p),S):i},S.extent=function(p){return arguments.length?(e=typeof p=="function"?p:Le([[+p[0][0],+p[0][1]],[+p[1][0],+p[1][1]]]),S):e},S.scaleExtent=function(p){return arguments.length?(o[0]=+p[0],o[1]=+p[1],S):[o[0],o[1]]},S.translateExtent=function(p){return arguments.length?(a[0][0]=+p[0][0],a[1][0]=+p[1][0],a[0][1]=+p[0][1],a[1][1]=+p[1][1],S):[[a[0][0],a[0][1]],[a[1][0],a[1][1]]]},S.constrain=function(p){return arguments.length?(n=p,S):n},S.duration=function(p){return arguments.length?(s=+p,S):s},S.interpolate=function(p){return arguments.length?(l=p,S):l},S.on=function(){var p=u.on.apply(u,arguments);return p===u?S:p},S.clickDistance=function(p){return arguments.length?($=(p=+p)*p,S):Math.sqrt($)},S.tapDistance=function(p){return arguments.length?(G=+p,S):G},S}class Cl{static render(e,n,r){const i={axisStrategy:r.axisStrategy??"time",minLabelGap:r.minLabelGap??40,labelYOffset:r.labelYOffset??-16,cardWidth:r.cardWidth??140,cardHeight:r.cardHeight??200,enforceUniformCardSize:r.enforceUniformCardSize??!0,hideOverlappingLabels:r.hideOverlappingLabels??!0,labelCardGap:r.labelCardGap??8,mediaObjectFit:r.mediaObjectFit??"cover",...r};n.innerHTML="";const o={top:10,right:80,bottom:50,left:80},a=n.clientWidth-o.left-o.right,s=n.clientHeight-o.top-o.bottom,l=r.zoom?.minScale??1,u=r.zoom?.maxScale??80,c=ct(n),g=c.append("svg").attr("width",a+o.left+o.right).attr("height",s+o.top+o.bottom).style("background","var(--tl-background-color, #fff)"),d=a+o.left+o.right,v=s+o.top+o.bottom,L=g.append("g").attr("class","tl-canvas-bg"),$=r.canvasBackground;if(!$)g.style("background","var(--tl-background-color, #fff)");else if($.kind==="color")g.style("background",$.value??"var(--tl-background-color, #fff)");else if($.kind==="image"){const C=$.fit??"cover";L.append("foreignObject").attr("x",0).attr("y",0).attr("width",d).attr("height",v).append("xhtml:div").style("width",`${d}px`).style("height",`${v}px`).style("opacity",String($.opacity??1)).style("backgroundImage",`url("${$.src}")`).style("backgroundRepeat","no-repeat").style("backgroundPosition","center").style("backgroundSize",C==="contain"?"contain":"cover")}else if($.kind==="video"){const C=$.fit??"cover",y=L.append("foreignObject").attr("x",0).attr("y",0).attr("width",d).attr("height",v).append("xhtml:div").style("width",`${d}px`).style("height",`${v}px`).style("overflow","hidden").style("opacity",String($.opacity??1)).append("xhtml:video");y.style("width","100%").style("height","100%").style("objectFit",C==="contain"?"contain":"cover").style("objectPosition","center").attr("src",$.src).attr("playsinline","true").attr("muted",$.muted??!0?"":null).attr("loop",$.loop??!0?"":null).attr("autoplay",$.autoplay??!0?"":null).attr("controls",$.controls??!1?"":null),$.poster&&y.attr("poster",$.poster);try{y.node()?.play?.().catch(()=>{})}catch{}}const G=g.append("g").attr("transform",`translate(${o.left},${o.top})`),S=[...e.items].sort((C,_)=>+C.start-+_.start),tt=S.map(C=>C.start),Z=r.baselineY??s/2,[H,K]=Sn(tt),A=Br().domain([H,K]).range([0,a]),O=S.map((C,_)=>_.toString()),f=Ar().domain(O).range([0,a]).padding(.5),h=C=>C.rescaleX(A),x=(C,_,y)=>{if(i.axisStrategy==="point"){const M=f(_.toString())??0;return y.applyX(M)}else return h(y)(C.start)};G.append("line").attr("x1",0).attr("x2",a).attr("y1",Z).attr("y2",Z).attr("stroke","var(--tl-axis-color, var(--tl-primary-color, #4285f4))").attr("stroke-width",2);const E=G.append("g").attr("transform",`translate(0,${s+5})`),D=()=>{E.attr("fill",null),E.select(".domain").attr("stroke","var(--tl-axis-color, var(--tl-primary-color, #4285f4))").attr("fill","none"),E.selectAll(".tick line").attr("stroke","var(--tl-axis-color, var(--tl-primary-color, #4285f4))"),E.selectAll(".tick text").attr("fill","var(--tl-tick-color, var(--tl-primary-color, #4285f4))").attr("font-family","var(--tl-font, system-ui)").attr("font-size","10px")},W=G.append("g"),p=W.append("g"),N=W.append("g"),b=p.selectAll("circle").data(S).enter().append("circle").attr("cy",Z).attr("r",6).attr("fill","var(--tl-accent-color, var(--tl-primary-color, #4285f4))").style("cursor",C=>i.onItemClick?"pointer":"default").on("click",(C,_)=>i.onItemClick?.(_,C)).on("mouseover",(C,_)=>i.onItemHover?.(_,C)),k=N.selectAll("g.tl-label").data(S).enter().append("g").attr("class","tl-label").style("cursor",C=>i.onItemClick?"pointer":"default").on("click",(C,_)=>i.onItemClick?.(_,C)).on("mouseover",(C,_)=>i.onItemHover?.(_,C));k.each(function(C){const _=C.label,y=ct(this);y.selectAll("*").remove();const M=i.enforceUniformCardSize?i.cardWidth:_?.width??i.cardWidth,w=i.enforceUniformCardSize?i.cardHeight:_?.height??i.cardHeight,m=Z+i.labelYOffset,P=y.append("g").attr("class","tl-card").attr("transform",`translate(${-M/2}, ${m-w})`).attr("data-card-width",String(M));if(P.append("rect").attr("class","tl-card-bg").attr("x",0).attr("y",0).attr("width",M).attr("height",w).attr("rx",10).attr("ry",10).attr("fill","var(--tl-card-bg, transparent)").attr("stroke","var(--tl-card-border, transparent)"),!_||_.kind==="text")P.append("foreignObject").attr("class","tl-label-text-card").attr("x",0).attr("y",0).attr("width",M).attr("height",w).append("xhtml:div").style("width",`${M}px`).style("height",`${w}px`).style("display","flex").style("align-items","center").style("justify-content","center").style("padding","8px 12px 8px 10px").style("text-align","center").style("font-family","var(--tl-font, system-ui)").style("color","var(--tl-text-color, #e6eefc)").style("line-height","1.25").style("overflow","hidden").text(_&&_.text||C.title);else if(_.kind==="image"){const X=(_.fit??i.mediaObjectFit??"cover")==="contain"?"xMidYMid meet":"xMidYMid slice",et=_.zoom??1;P.append("g").attr("class","tl-media").attr("transform",et!==1?`translate(${M/2}, ${w/2}) scale(${et}) translate(${-M/2}, ${-w/2})`:null).append("image").attr("class","tl-label-image").attr("href",_.src).attr("x",0).attr("y",0).attr("width",M).attr("height",w).attr("preserveAspectRatio",X),_.alt&&P.append("title").text(_.alt)}else if(_.kind==="video"){const nt=_.fit??i.mediaObjectFit??"cover",X=_.zoom??1,vt=P.append("foreignObject").attr("class","tl-label-video").attr("x",0).attr("y",0).attr("width",M).attr("height",w).append("xhtml:div").style("width",`${M}px`).style("height",`${w}px`).style("overflow","hidden").style("borderRadius","var(--tl-card-radius, 10px)").style("boxShadow","var(--tl-card-shadow, none)").style("pointerEvents","auto").style("transformOrigin","center").style("transform",X!==1?`scale(${X})`:"none").append("xhtml:video");vt.style("width","100%").style("height","100%").style("objectFit",nt==="contain"?"contain":"cover").style("objectPosition","center").attr("src",_.src).attr("playsinline","true").attr("muted","").attr("loop","").attr("autoplay","").attr("controls",null),_.poster&&vt.attr("poster",_.poster);try{vt.node()?.play?.().catch(()=>{})}catch{}}C.overlayColor&&P.append("rect").attr("class","tl-card-overlay").attr("x",0).attr("y",0).attr("width",M).attr("height",w).attr("rx",10).attr("ry",10).attr("fill",C.overlayColor).style("opacity","0.4").style("pointer-events","none");const I=`translate(${-M/2}, ${m-w})`;P.attr("transform",I);const V=()=>P.transition().duration(120).attr("transform",`${I} translate(${M/2},${w/2}) scale(1.07) translate(${-M/2},${-w/2})`),q=()=>P.transition().duration(120).attr("transform",I);y.on("mouseenter",V).on("mouseleave",q)});const U=c.append("div").attr("class","tl-tooltip").style("position","absolute").style("pointer-events","none").style("padding","6px 10px").style("border-radius","4px").style("background","var(--tl-tooltip-bg, rgba(0,0,0,0.7))").style("color","var(--tl-tooltip-color, #fff)").style("font-family","var(--tl-font, system-ui)").style("font-size","12px").style("opacity","0");function T(C){const _=C.start.toLocaleDateString(),y=C.end?`  ${C.end.toLocaleDateString()}`:"",M=C.description?`<div>${C.description}</div>`:"";return`<strong>${C.title}</strong><div>${_}${y}</div>${M}`}const Y=C=>{C.on("mouseover",(_,y)=>U.html(T(y)).style("opacity","1")).on("mousemove",_=>U.style("left",`${_.pageX+10}px`).style("top",`${_.pageY+10}px`)).on("mouseout",()=>U.style("opacity","0"))};Y(b),Y(k);function R(C){const _=E.selectAll(".tick").nodes();let y=-1/0;_.forEach(M=>{const w=M.transform?.baseVal?.[0]?.matrix?.e??M.getCTM()?.e??0;w-y<C?M.style.display="none":(M.style.display="",y=w)})}const z=C=>{if(b.attr("cx",(_,y)=>x(_,y,C)),k.each(function(_,y){const M=x(_,y,C);ct(this).attr("transform",`translate(${M},0)`).style("display","")}),i.axisStrategy==="point"){const _=(f.step?.()??a/Math.max(1,S.length-1))*C.k,y=Math.max(1,Math.ceil(i.minLabelGap/Math.max(1,_))),M=S.map((w,m)=>m).filter(w=>w%y===0).map(w=>w.toString());E.call(On(Ar().domain(M).range([C.applyX(0),C.applyX(a)])).tickFormat(w=>{const m=Number(w),P=S[m]?.start;return P?Qt("%Y-%m-%d")(P):""}))}else{const _=h(C);E.call(On(_).ticks(10).tickFormat(Qt("%Y-%m-%d")))}if(D(),R(i.minLabelGap),i.hideOverlappingLabels&&Q(C),i.onRangeChange)if(i.axisStrategy==="time"){const _=C.rescaleX(A);i.onRangeChange(_.domain())}else{const _=(f.step?.()??1)*C.k,y=Math.max(0,Math.floor((0-C.x)/Math.max(1,_))),M=Math.min(S.length-1,Math.ceil((a-C.x)/Math.max(1,_))),w=S[y]?.start??S[0].start,m=S[M]?.start??S[S.length-1].start;i.onRangeChange([w,m])}},F=Zr().scaleExtent([l,u]).translateExtent([[0,0],[a,s]]).extent([[0,0],[a,s]]).on("zoom",C=>{const _=C.transform;i.axisStrategy==="point"?(W.attr("transform",`translate(${_.x},0)`),z(_)):(W.attr("transform",null),z(_))});g.call(F);function B(){if(S.length<=1)return Et;const C=r.zoom?.initialScale;if(C&&isFinite(C))return Et.scale(C);if(i.axisStrategy==="point"){const _=f.step?.()??a/Math.max(1,S.length-1),y=Math.max(1,(i.minLabelGap??40)/Math.max(1,_));return Et.scale(Math.min(u,Math.max(l,y)))}else{let _=1/0;for(let w=1;w<S.length;w++){const m=Math.abs(A(S[w].start)-A(S[w-1].start));m>0&&m<_&&(_=m)}if(!isFinite(_)||_===0)return Et;const M=Math.max(i.cardWidth+(i.labelCardGap??8),i.minLabelGap??40)/_;return Et.scale(Math.min(u,Math.max(l,M)))}}function Q(C){const _=k.nodes().map((w,m)=>{const P=ct(w),I=P.datum(),V=x(I,m,C),nt=P.select("g.tl-card").attr("data-card-width"),X=Number(nt)||i.cardWidth;return{node:w,x:V,w:X}});_.sort((w,m)=>w.x-m.x);let y=-1/0;const M=i.labelCardGap;for(const{node:w,x:m,w:P}of _){const I=m-P/2,V=m+P/2;I<y+M?w.style.display="none":(w.style.display="",y=V)}}const j=B();i.axisStrategy==="point"?(W.attr("transform",`scale(${j.k},1)`),F.transform(g,j),z(j)):(F.transform(g,j),z(j))}}class Sl{static render(e,n,r){n.innerHTML="";const i={top:20,right:10,bottom:20,left:60},o=n.clientWidth-i.left-i.right,a=n.clientHeight-i.top-i.bottom,s=ct(n),l=s.append("svg").attr("width",i.left+o+i.right).attr("height",i.top+a+i.bottom);l.append("rect").attr("width",i.left+o+i.right).attr("height",i.top+a+i.bottom).style("fill","none").style("pointer-events","all");const u=l.append("g").attr("transform",`translate(${i.left},${i.top})`),c=e.items.map(H=>H.start),[g,d]=Sn(c),v=Br().domain([g,d]).range([0,a]);if(r.showTodayLine){const H=v(new Date);u.append("line").attr("x1",0).attr("x2",o).attr("y1",H).attr("y2",H).attr("stroke","var(--tl-primary-color, steelblue)").attr("stroke-dasharray","4 2")}u.append("line").attr("x1",o/2).attr("x2",o/2).attr("y1",0).attr("y2",a).attr("stroke","var(--tl-primary-color, steelblue)").attr("stroke-width",2);const L=u.append("g").call(zn(v).tickValues(c).tickFormat(Qt("%Y-%m-%d")));L.attr("fill",null),L.select(".domain").attr("stroke","var(--tl-primary-color, steelblue)").attr("fill","none"),L.selectAll(".tick line").attr("stroke","var(--tl-primary-color, steelblue)"),L.selectAll(".tick text").attr("fill","var(--tl-primary-color, steelblue)").attr("font-family","var(--tl-font, sans-serif)").attr("font-size","10px").attr("dx","-8");const $=s.append("div").attr("class","tl-tooltip").style("position","absolute").style("pointer-events","none").style("padding","6px 10px").style("border-radius","4px").style("background","var(--tl-tooltip-bg, rgba(0,0,0,0.7))").style("color","var(--tl-tooltip-color, #fff)").style("font-family","var(--tl-font, sans-serif)").style("font-size","12px").style("opacity","0");function G(H){const K=H.start.toLocaleDateString(),A=H.end?`  ${H.end.toLocaleDateString()}`:"",O=H.description?`<div>${H.description}</div>`:"";return`<strong>${H.title}</strong><div>${K}${A}</div>${O}`}const S=u.append("g").selectAll("g.event").data(e.items).enter().append("g").attr("class","event");S.append("circle").attr("cx",o/2).attr("cy",H=>v(H.start)).attr("r",6).attr("fill","var(--tl-primary-color, steelblue)").on("click",(H,K)=>r.onItemClick?.(K,H)).on("mouseover",(H,K)=>{r.onItemHover?.(K,H),$.html(G(K)).style("opacity","1")}).on("mousemove",H=>$.style("left",`${H.pageX+10}px`).style("top",`${H.pageY+10}px`)).on("mouseout",()=>$.style("opacity","0")),S.append("text").attr("x",o/2+12).attr("y",H=>v(H.start)+4).text(H=>H.title).attr("fill","var(--tl-primary-color, steelblue)").attr("font-family","var(--tl-font, sans-serif)").attr("font-size","12px");const tt=H=>{const K=H.rescaleY(v);L.call(zn(K).tickValues(c).tickFormat(Qt("%Y-%m-%d"))),L.selectAll(".tick text").attr("fill","var(--tl-primary-color, steelblue)"),S.selectAll("circle").attr("cy",A=>K(A.start)),S.selectAll("text").attr("y",A=>K(A.start)+4),r.onRangeChange?.(K.domain())},Z=Zr().scaleExtent([1,10]).translateExtent([[0,0],[o,a]]).extent([[0,0],[o,a]]).on("zoom",H=>tt(H.transform));l.call(Z),Z.transform(l,Et),tt(Et)}}class Al{static render(e,n,r){n.innerHTML="";const i="chrono-leaf-grid-styles";if(!document.getElementById(i)){const a=document.createElement("style");a.id=i,a.textContent=`
        .tl-grid {
          display: grid;
          gap: var(--grid-gap, 16px);
          grid-template-columns: repeat(auto-fit, minmax(var(--grid-item-min, 150px), 1fr));
          padding: var(--grid-padding, 16px);
          background: var(--tl-background-color);
          font-family: var(--tl-font);
          border-radius: var(--tl-border-radius);
        }
        .tl-grid-item {
          position: relative;
          background: var(--card-bg, #fff);
          color: var(--card-color, inherit);
          border-radius: var(--tl-border-radius);
          box-shadow: var(--card-shadow, 0 1px 4px rgba(0,0,0,0.1));
          padding: var(--card-padding, 12px);
          overflow: hidden;
          cursor: pointer;
        }
        .tl-grid-item h4 {
          margin: 0 0 var(--card-title-gap, 4px) 0;
          font-size: var(--card-title-size, 1em);
        }
        .tl-grid-item time {
          display: block;
          font-size: var(--card-date-size, 0.85em);
          color: var(--card-date-color, #555);
        }
        .tl-grid-item p {
          margin-top: var(--card-desc-gap, 8px);
          font-size: var(--card-desc-size, 0.9em);
          color: var(--card-desc-color, #333);
        }
      `,document.head.appendChild(a)}const o=document.createElement("div");o.className="tl-grid",e.items.forEach(a=>{const s=document.createElement("div");s.className="tl-grid-item",a.background?.type==="color"&&(s.style.backgroundColor=a.background.source),r.onItemClick&&s.addEventListener("click",c=>r.onItemClick(a,c)),r.onItemHover&&s.addEventListener("mouseenter",c=>r.onItemHover(a,c));const l=document.createElement("h4");l.textContent=a.title,s.appendChild(l);const u=document.createElement("time");if(u.textContent=a.start.toLocaleDateString()+(a.end?`  ${a.end.toLocaleDateString()}`:""),s.appendChild(u),a.description){const c=document.createElement("p");c.textContent=a.description,s.appendChild(c)}o.appendChild(s)}),n.appendChild(o)}}function El(t){return t.replace(/[A-Z]/g,e=>"-"+e.toLowerCase())}function Dl(t,e){if(t.classList.remove("tl-theme-light","tl-theme-dark"),Array.from(t.style).forEach(n=>{n.startsWith("--tl-")&&t.style.removeProperty(n)}),!!e)if(e==="light"||e==="dark")t.classList.add(`tl-theme-${e}`);else for(const[n,r]of Object.entries(e)){if(r==null)continue;const i=`--tl-${El(n)}`;t.style.setProperty(i,r)}}class Ht{constructor(e,n){this.items=e,this.config={theme:"light",mode:"slider",showTodayLine:!0,interactive:!0,language:"en",...n}}render(e){switch(e.innerHTML="",Dl(e,this.config.theme),this.config.mode){case"slider":Cl.render(this,e,this.config);break;case"vertical":Sl.render(this,e,this.config);break;case"grid":Al.render(this,e,this.config);break;default:e.innerHTML=this.toHTML()}}toHTML(){return`<div class="tl-container">${this.items.map(n=>`<div class="tl-item">
         <strong>${n.title}</strong>
         <time>${n.start.toLocaleDateString()}</time>
       </div>`).join("")}</div>`}static fromCSV(e){const n=Nt.parse(e,"csv");return new Ht(n)}static fromJSON(e){const n=Nt.parse(e,"json");return new Ht(n)}static fromXML(e){const n=Nt.parse(e,"xml");return new Ht(n)}static fromTEI(e){const n=Nt.parse(e,"tei");return new Ht(n)}static from(e,n){const r=Nt.parse(e,n);return new Ht(r)}static registerParser(e){Nt.register(e)}static supportedFormats(){return Nt.supportedFormats()}}const Kr="chrono-leaf-default-themes";if(!document.getElementById(Kr)){const t=document.createElement("style");t.id=Kr,t.textContent=`
     /* Theme classes just set variables */
      .tl-theme-light {
       --tl-primary-color: #4285f4;
       --tl-background-color: #fff;
       --tl-font: system-ui, sans-serif;
       --tl-border-radius: 4px;
       --tl-tooltip-bg: rgba(0,0,0,0.7);
       --tl-tooltip-color: #fff;
       --tl-card-bg: rgba(0,0,0,0.04);
       --tl-card-border: rgba(0,0,0,0.15);
       --tl-card-radius: 10px;
       --tl-card-shadow: 0 2px 8px rgba(0,0,0,0.12);
       }
       .tl-theme-dark {
        --tl-primary-color: #8ab4f8;
        --tl-background-color: #222;
        --tl-font: system-ui, sans-serif;
        --tl-border-radius: 4px;
        --tl-tooltip-bg: rgba(255,255,255,0.85);
        --tl-tooltip-color: #000;
        --tl-card-bg: rgba(255,255,255,0.06);
        --tl-card-border: rgba(255,255,255,0.18);
        --tl-card-radius: 10px;
        --tl-card-shadow: 0 2px 10px rgba(0,0,0,0.35);
      }

     /* Base container styles */
     .tl-container, .tl-grid {
       background: var(--tl-background-color);
       font-family: var(--tl-font);
       border-radius: var(--tl-border-radius);
      color: inherit;
       color: var(--tl-text-color, inherit);
     }
  .tl-container svg foreignObject.tl-label-video {
    overflow: visible;
  }
  .tl-container svg .tl-label-text {
    user-select: none;
  }

     /* Axis & SVG text defaults (renderer reads these vars) */
     .tl-container svg .domain,
     .tl-container svg .tick line {
       stroke: var(--tl-axis-color, var(--tl-primary-color, #4285f4));
     }
     .tl-container svg .tick text {
       fill: var(--tl-tick-color, var(--tl-primary-color, #4285f4));
       font-family: var(--tl-font);
     }
 
     /* Tooltip */
     .tl-tooltip {
       background: var(--tl-tooltip-bg);
       color: var(--tl-tooltip-color);
       font-family: var(--tl-font);
     }
   `,document.head.appendChild(t)}Yt.Timeline=Ht,Object.defineProperty(Yt,Symbol.toStringTag,{value:"Module"})});
//# sourceMappingURL=chrono-leaf.umd.js.map
